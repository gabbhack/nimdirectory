<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">nimPNG</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">graphics</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">library</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">PNG</button></a>
                </span>
            
        </p>
        <p class="pkg-desc">some("PNG(Portable Network Graphics) encoder and decoder")</p>
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install nimPNG" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>nimPNG (PNG + APNG)</h1>
<p>Portable Network Graphics Encoder and Decoder written in Nim store lossless image with good compression.</p>
<p>Notable releases:</p>
<ul>
<li>0.2.0 support Animated PNG!</li>
<li>0.2.6 compile with --gc:arc.</li>
<li>0.3.0 <a href="apidoc.md">new set of API</a> using seq[uint8] and new method to handle error.</li>
<li>0.3.1 fix new API bug and add openArray API</li>
</ul>
<p>  <img src="https://img.shields.io/badge/available%20on-nimble-yellow.svg?style=flat-square" style="max-width: 100%;" alt="nimble" />  <img src="https://img.shields.io/github/license/citycide/cascade.svg?style=flat-square" style="max-width: 100%;" alt="license" />  <img src="https://github.com/jangko/nimPNG/workflows/CI/badge.svg" style="max-width: 100%;" alt="Github action" /></p>
<p>all PNG standard color mode are supported:</p>
<ul>
<li>LCT_GREY = 0,       # greyscale: 1,2,4,8,16 bit</li>
<li>LCT_RGB = 2,        # RGB: 8,16 bit</li>
<li>LCT_PALETTE = 3,    # palette: 1,2,4,8 bit</li>
<li>LCT_GREY_ALPHA = 4, # greyscale with alpha: 8,16 bit</li>
<li>LCT_RGBA = 6        # RGB with alpha: 8,16 bit</li>
</ul>
<p>both interlaced and non-interlaced mode supported</p>
<p>recognize all PNG standard chunks:
IHDR, IEND, PLTE, IDAT, tRNS, bKGD, pHYs, tIME, iTXt, zTXt
tEXt, gAMA, cHRM, sRGB, iCCP, sBIT, sPLT, hIST</p>
<p>unknown chunks will be handled properly</p>
<p>the following chunks are supported (generated/interpreted) by both encoder and decoder:</p>
<ul>
<li>IHDR: header information</li>
<li>PLTE: color palette</li>
<li>IDAT: pixel data</li>
<li>IEND: the final chunk</li>
<li>tRNS: transparency for palettized images</li>
<li>tEXt: textual information</li>
<li>zTXt: compressed textual information</li>
<li>iTXt: international textual information</li>
<li>bKGD: suggested background color</li>
<li>pHYs: physical dimensions</li>
<li>tIME: modification time</li>
</ul>
<p>the following chunks are parsed correctly, but not used by decoder:
cHRM, gAMA, iCCP, sRGB, sBIT, hIST, sPLT</p>
<p>Supported color conversions:</p>
<ul>
<li>anything to 8-bit RGB, 8-bit RGBA, 16-bit RGB, 16-bit RGBA</li>
<li>any grey or grey+alpha, to grey or grey+alpha</li>
<li>anything to a palette, as long as the palette has the requested colors in it</li>
<li>removing alpha channel</li>
<li>higher to smaller bitdepth, and vice versa</li>
</ul>
<h3>Planned Feature(s):</h3>
<ul>
<li>streaming for progressive loading</li>
</ul>
<h2>Basic Usage</h2>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">nimPNG</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">png</span> <span class="op">=</span> <span class="ide">loadPNG32</span>(<span class="str">&quot;image.png&quot;</span>)</div></div><div class="line"><div class="line-content"><span class="com"># is equivalent to:</span></div></div><div class="line"><div class="line-content"><span class="com"># let png = loadPNG(&quot;image.png&quot;, LCT_RGBA, 8)</span></div></div><div class="line"><div class="line-content"><span class="com"># will produce rgba pixels:</span></div></div><div class="line"><div class="line-content"><span class="com"># png.width -&gt; width of the image</span></div></div><div class="line"><div class="line-content"><span class="com"># png.height -&gt; height of the image</span></div></div><div class="line"><div class="line-content"><span class="com"># png.data -&gt; pixels data in RGBA format</span></div></div>  </code></pre>
<p>if you already have the whole file in memory:</p>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">png</span> <span class="op">=</span> <span class="ide">decodePNG32</span>(<span class="ide">raw_bytes</span>)</div></div><div class="line"><div class="line-content"><span class="com"># will do the same as above</span></div></div>  </code></pre>
<p>other variants:</p>
<ul>
<li>loadPNG24 -&gt; will produce pixels in RGB format 8 bpp</li>
<li>decodePNG24 -&gt; load png from memory instead of file</li>
</ul>
<p>to create PNG:</p>
<ul>
<li>savePNG32(&quot;output.png&quot;, rgba_pixels, width, height) or savePNG24</li>
<li>encodePNG32(rgba_pixels, width, height) or encodePNG24</li>
</ul>
<p>special notes:</p>
<ul>
<li>Use <strong>loadPNG</strong> or <strong>savePNG</strong> if you need specific input/output format by supplying supported <strong>colorType</strong> and <strong>bitDepth</strong> information.</li>
<li>Use <strong>encodePNG</strong> or <strong>decodePNG</strong> to do <em>in-memory</em> encoding/decoding by supplying desired <strong>colorType</strong> and <strong>bitDepth</strong> information.</li>
</ul>
<p>pixels are stored as raw bytes using Nim&apos;s <code>string</code>/<code>seq[T]</code> as container:</p>
<table>
<thead>
<tr>
<th align="center">Byte Order</th>
<th align="center">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">r1,g1,b1,a1,...,rn,gn,bn,an</td>
<td align="center">RGBA 8 bit</td>
</tr>
<tr>
<td align="center">r1,g1,b1,r2,g2,b2,...,rn,gn,bn</td>
<td align="center">RGB 8 bit</td>
</tr>
<tr>
<td align="center">grey1,grey2,grey3, ..., greyn</td>
<td align="center">GREY 8 bit</td>
</tr>
<tr>
<td align="center">grey1,a1,grey2,a2,...,greyn,an</td>
<td align="center">GREY ALPHA 8 bit</td>
</tr></tbody></table>
<h2>Animated PNG (APNG)</h2>
<p>Since version 0.2.0, nimPNG provides support for <a href="https://en.wikipedia.org/wiki/APNG">Animated PNG</a>.</p>
<p>Both decoder and encoder recognize/generate APNG chunks correctly: acTL, fcTL, fdAT.</p>
<p>Decoded frames is provided as is, the dimension and coordinate offset might be different with default frame.
No alpha blending or other blending method performed.
It is up to the application to do proper in-memory rendering before displaying the animation.
Don&apos;t ask how to do it, any decent graphics rendering library have their own set of API to do alpha blending and
offset rendering. In the future nimPNG might be shipped with simple frame rendering utility for common cases.
Right now nimPNG is just a PNG encoder/decoder.</p>
<h3>Decoding</h3>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="com">#let png = loadPNG32(&quot;image.png&quot;)</span></div></div><div class="line"><div class="line-content"><span class="com"># or</span></div></div><div class="line"><div class="line-content"><span class="com">#let png = loadPNG(&quot;image.png&quot;, LCT_RGBA, 8)</span></div></div><div class="line"><div class="line-content"><span class="com"># or</span></div></div><div class="line"><div class="line-content"><span class="com">#let png = decodePNG32(raw_bytes)</span></div></div>  </code></pre>
<p>The usual loadPNG and decodePNG can decode both unanimated and animated PNG.
<code>png.width</code>, <code>png.height</code>, <code>png.data</code> works as usual. If the decoded PNG is an APNG, <code>png.data</code> will contains default frame.
Animation frames can be accessible via <code>png.frames</code>. If it is not an APNG, <code>png.frames</code> will be have zero length.</p>
<h3>Encoding</h3>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">png</span> <span class="op">=</span> <span class="ide">prepareAPNG24</span>(<span class="ide">numPlays</span>)</div></div>  </code></pre>
<ul>
<li>First step is to call <code>prepareAPNG</code>, <code>prepareAPNG24</code>, or <code>prepareAPNG32</code>. You also can specify how many times the animation
will be played</li>
</ul>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="ide">png</span><span class="op">.</span><span class="ide">addDefaultImage</span>(<span class="ide">framePixels</span>, <span class="ide">w</span>, <span class="ide">h</span>, <span class="ide">ctl</span>)</div></div>  </code></pre>
<ul>
<li>Second step is also mandatory, you should call <code>addDefaultImage</code>. <code>ctl</code> is optional, if you provide a <code>ctl</code>(Frame Control),
the default image will be part of the animation. If <code>ctl</code> is nil, default image will not be part of animation.</li>
</ul>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="ide">png</span><span class="op">.</span><span class="ide">addFrame</span>(<span class="ide">frames</span>[<span class="ide">i</span>]<span class="op">.</span><span class="ide">data</span>, <span class="ide">ctl</span>)</div></div>  </code></pre>
<ul>
<li>Third step is calling <code>addFrame</code> one or more times. Here <code>ctl</code> is mandatory.</li>
</ul>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="ide">png</span><span class="op">.</span><span class="ide">saveAPNG</span>(<span class="str">&quot;rainbow.png&quot;</span>)</div></div><div class="line"><div class="line-content">  <span class="com"># or</span></div></div><div class="line"><div class="line-content">  <span class="kwd">var</span> <span class="ide">str</span> <span class="op">=</span> <span class="ide">png</span><span class="op">.</span><span class="ide">encodeAPNG</span>()</div></div>  </code></pre>
<ul>
<li>Final step is to call <code>saveAPNG</code> if you want save it to a file or call <code>encodeAPNG</code> if you want to get the result in memory.</li>
</ul>
<p>You can read the details of frame control from <a href="https://wiki.mozilla.org/APNG_Specification">spec</a>.
You can also see an example in tester/test.nim -&gt; generateAPNG</p>
<h2>Installation via nimble</h2>
<blockquote>
<p>nimble install nimPNG</p>
</blockquote>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/jangko/nimPNG">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-06-24T01:44:43Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
