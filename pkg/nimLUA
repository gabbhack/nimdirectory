<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">nimLUA</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">lua</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">library</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">bind</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">glue</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">macros</button></a>
                </span>
            
        </p>
        <p class="pkg-desc">some("glue code generator to bind Nim and Lua together using Nim\'s powerful macro")</p>
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install nimLUA" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>nimLua</h1>
<p>glue code generator to bind Nim and Lua together using Nim&apos;s powerful macro</p>
<p><a href="https://travis-ci.org/jangko/nimLUA">  <img src="https://img.shields.io/travis/jangko/nimLUA/master.svg?label=Linux%20/%20macOS" style="max-width: 100%;" alt="Build Status (Travis)" title="Linux/macOS build status (Travis)" /></a>
<a href="https://ci.appveyor.com/project/jangko/nimLUA">  <img src="https://img.shields.io/appveyor/ci/jangko/nimLUA/master.svg?label=Windows" style="max-width: 100%;" alt="Windows build status (Appveyor)" title="Windows build status (Appveyor)" /></a>
<img src="https://img.shields.io/badge/available%20on-nimble-yellow.svg?style=flat-square" style="max-width: 100%;" alt="nimble" /><img src="https://img.shields.io/github/license/citycide/cascade.svg?style=flat-square" style="max-width: 100%;" alt="license" /><img src="https://github.com/jangko/nimLUA/workflows/nimLUA%20CI/badge.svg" style="max-width: 100%;" alt="Github action" /></p>
<hr />
<p><strong>Features</strong>:</p>
<ul>
<li>bind free proc</li>
<li>bind proc as Lua method</li>
<li>bind const</li>
<li>bind enum</li>
<li>bind object</li>
<li>generic proc binding</li>
<li>closure binding</li>
<li>properties getter/setter</li>
<li>automatic resolve overloaded proc</li>
<li>easy namespace creation</li>
<li>easy debugging</li>
<li>consistent simple API</li>
<li>can rename exported symbol</li>
<li>support automatic type conversion</li>
<li>can change binding dynamically at runtime too</li>
<li>generate clean and optimized glue code that you can inspect at compile time</li>
<li>it&apos;s free</li>
</ul>
<p><strong>planned features</strong>:</p>
<ul>
<li>complex data types conversion, at least standard container</li>
<li>access Lua code/data from Nim</li>
</ul>
<hr />
<p><strong>Current version API</strong>:
no need to remember complicated API, the API is simple but powerful</p>
<ul>
<li>newNimLua</li>
<li>bindEnum</li>
<li>bindConst</li>
<li>bindFunction/bindProc</li>
<li>bindObject</li>
</ul>
<hr />
<h2>  <strong>DATA TYPE CONVERSION</strong></h2>
<table>
<thead>
<tr>
<th>Nim</th>
<th>Lua</th>
</tr>
</thead>
<tbody>
<tr>
<td>char,int,uint,int8-64,uint8-64</td>
<td>integer/number</td>
</tr>
<tr>
<td>float, float32, float64</td>
<td>number</td>
</tr>
<tr>
<td>array[0..n, T], [n, T]</td>
<td>array[1..n]</td>
</tr>
<tr>
<td>enum</td>
<td>integer/number</td>
</tr>
<tr>
<td>string, cstring</td>
<td>string</td>
</tr>
<tr>
<td>ref/object</td>
<td>userdata</td>
</tr>
<tr>
<td>bool</td>
<td>boolean</td>
</tr>
<tr>
<td>seq[T]</td>
<td>array[1..n]</td>
</tr>
<tr>
<td>set[T]</td>
<td>table with unique element</td>
</tr>
<tr>
<td>pointer</td>
<td>light user data</td>
</tr>
<tr>
<td>ptr T</td>
<td>light user data</td>
</tr>
<tr>
<td>range/subrange</td>
<td>integer</td>
</tr>
<tr>
<td>openArray[T]</td>
<td>table -&gt; seq[T]</td>
</tr>
<tr>
<td>tuple</td>
<td>assoc-table or array</td>
</tr>
<tr>
<td>varargs[T]</td>
<td>not supported</td>
</tr></tbody></table>
<hr />
<h2>  <strong>HOW TO USE</strong></h2>
<h3>  <strong>1. bindEnum</strong></h3>
<pre>  <code class="language-nimrod">import nimLUA, os

type
  FRUIT = enum
    APPLE, BANANA, PEACH, PLUM
  SUBATOM = enum
    ELECTRON, PROTON, NEUTRON
  GENE = enum
    ADENINE, CYTOSINE, GUANINE, THYMINE

proc test(L: PState, fileName: string) =
  if L.doFile(&quot;test&quot; &amp; DirSep &amp; fileName) != 0.cint:
    echo L.toString(-1)
    L.pop(1)
  else:
    echo fileName &amp; &quot; .. OK&quot;

proc main() =
  var L = newNimLua()
  L.bindEnum(FRUIT, SUBATOM, GENE)
  L.test(&quot;test.lua&quot;)
  L.close()

main()
</code></pre>
<p>and you can access them at Lua side like this:</p>
<pre>  <code class="language-Lua">assert(FRUIT.APPLE == 0)
assert(FRUIT.BANANA == 1)
assert(FRUIT.PEACH == 2)
assert(FRUIT.PLUM == 3)

assert(GENE.ADENINE == 0)
assert(GENE.CYTOSINE == 1)
assert(GENE.GUANINE == 2)
assert(GENE.THYMINE == 3)

assert(SUBATOM.ELECTRON == 0)
assert(SUBATOM.PROTON == 1)
assert(SUBATOM.NEUTRON == 2)
</code></pre>
<p>another style:</p>
<pre>  <code class="language-nimrod">L.bindEnum:
  FRUIT
  SUBATOM
  GENE
</code></pre>
<p>if you want to rename the namespace, you can do this:</p>
<pre>  <code class="language-nimrod">L.bindEnum:
  GENE -&gt; &quot;DNA&quot;
  SUBATOM -&gt; GLOBAL
</code></pre>
<p>or</p>
<pre>  <code class="language-nimrod">L.bindEnum(GENE -&gt; &quot;DNA&quot;, SUBATOM -&gt; GLOBAL)
</code></pre>
<p>a note on <strong>GLOBAL</strong> and &quot;GLOBAL&quot;:</p>
<ul>
<li><strong>GLOBAL</strong> without quote will not create namespace on Lua side but will bind the symbol in Lua globalspace</li>
<li>&quot;GLOBAL&quot; with quote, will create &quot;GLOBAL&quot; namespace on Lua side</li>
</ul>
<p>now Lua side will become:</p>
<pre>  <code class="language-Lua">assert(DNA.ADENINE == 0)
assert(DNA.CYTOSINE == 1)
assert(DNA.GUANINE == 2)
assert(DNA.THYMINE == 3)

assert(ELECTRON == 0)
assert(PROTON == 1)
assert(NEUTRON == 2)
</code></pre>
<h3>  <strong>2. bindConst</strong></h3>
<pre>  <code class="language-nimrod">import nimLUA

const
  MANGOES = 10.0
  PAPAYA = 11.0&apos;f64
  LEMON = 12.0&apos;f32
  GREET = &quot;hello world&quot;
  connected = true

proc main() =
  var L = newNimLua()
  L.bindConst(MANGOES, PAPAYA, LEMON)
  L.bindConst:
    GREET
    connected
  L.close()

main()
</code></pre>
<p>by default, bindConst will not generate namespace, so how do you create namespace for const? easy:</p>
<pre>  <code class="language-nimrod">L.bindConst(&quot;fruites&quot;, MANGOES, PAPAYA, LEMON)
L.bindConst(&quot;status&quot;):
  GREET
  connected
</code></pre>
<p>first argument(actually second) to bindConst will become the namespace. Without namespace, symbol will be put into global namespace</p>
<p>if you use <strong>GLOBAL</strong> without quote as namespace, it will have no effect</p>
<p>operator <code>-&gt;</code> have same meaning with bindEnum, to rename exported symbol on Lua side</p>
<h3>  <strong>3. bindFunction/bindProc</strong></h3>
<p>bindFunction is an alias to bindProc, they behave identically</p>
<pre>  <code class="language-nimrod">import nimLUA

proc abc(a, b: int): int =
  result = a + b

var L = newNimLua()
L.bindFunction(abc)
L.bindFunction:
  abc -&gt; &quot;cba&quot;
L.bindFunction(&quot;alphabet&quot;, abc)
</code></pre>
<p>bindFunction more or less behave like bindConst, without namespace, it will bind symbol to global namespace.</p>
<p>overloaded procs will be automatically resolved by their params count and types</p>
<p>operator <code>-&gt;</code> have same meaning with bindEnum, to rename exported symbol on Lua side</p>
<h3>  <strong>4. bindObject</strong></h3>
<pre>  <code class="language-nimrod">import nimLUA

type
  Foo = ref object
    name: string

proc newFoo(name: string): Foo =
  new(result)
  result.name = name

proc addv(f: Foo, a, b: int): int =
  result = 2 * (a + b)

proc addv(f: Foo, a, b: string): string =
  result = &quot;hello: my name is $1, here is my message: $2, $3&quot; % [f.name, a, b]

proc addk(f: Foo, a, b: int): string =
  result = f.name &amp; &quot;: &quot; &amp; $a &amp; &quot; + &quot; &amp; $b &amp; &quot; = &quot; &amp; $(a+b)

proc main() =
  var L = newNimLua()
  L.bindObject(Foo):
    newFoo -&gt; constructor
    addv
    addk -&gt; &quot;add&quot;
  L.close()

main()
</code></pre>
<p>this time, Foo will become object name and also namespace name in Lua</p>
<p>&quot;newFoo <code>-&gt;</code> constructor&quot; have special meaning, it will create constructor on Lua side with special name: <code>new</code>(this is an artefact)
but any other constructor like procs will be treated as constructor too:</p>
<pre>  <code class="language-nimrod">L.bindObject(Foo):
  newFoo                    #constructor #1 &apos;newFoo&apos;
  newFoo -&gt; constructor     #constructor #2 &apos;new&apos;
  newFoo -&gt; &quot;whatever&quot;      #constructor #3 &apos;whatever&apos;
  makeFoo -&gt; &quot;constructor&quot;  #constructor #4 &apos;constructor&apos;
</code></pre>
<p>operator <code>-&gt;</code> on non constructor will behave the same as other binder.</p>
<p>overloaded proc will be automatically resolved by their params count and types, including overloaded constructor</p>
<p>destructor will be generated automatically for ref object, none for regular object.
GC safety works as usual on both side of Nim and Lua, no need to worry, except when you manually allocated memory</p>
<pre>  <code class="language-Lua">local foo = Foo.new(&quot;fred&quot;)
local m = foo:add(3, 4)

-- &quot;fred: 3 + 4 = 7&quot;
print(m)

assert(foo:addv(4,5) == 2 * (4+5))

-- &quot;hello: my name is fred, here is my message: abc, nop&quot;
print(foo:addv(&quot;abc&quot;, &quot;nop&quot;))
</code></pre>
<p>operator <code>-&gt;</code> when applied to object, will rename exported symbol on Lua side:</p>
<pre>  <code class="language-nimrod">L.bindObject(Foo -&gt; &quot;cat&quot;):
  newFoo -&gt; constructor
</code></pre>
<p>on Lua side:</p>
<pre>  <code class="language-lua">local c = cat.new(&quot;fred&quot;) --not &apos;Foo&apos; anymore
</code></pre>
<p>both <strong>bindObject</strong> and <strong>bindFunction</strong> and <strong>bindConst</strong> can add member to existing namespace</p>
<p>if you want to turn off this functionality, call <strong>nimLuaOptions</strong>(nloAddMember, false)</p>
<pre>  <code class="language-nimrod">L.bindObject(Foo): #namespace creation
  newFoo -&gt; constructor

L.bindObject(Foo): #add new member
  addv
  addk -&gt; &quot;add&quot;

L.bindFunction(&quot;gem&quot;): #namespace &quot;gem&quot; creation
  mining

L.bindFunction(&quot;gem&quot;): #add &apos;polish&apos; member
  polish
</code></pre>
<h4>  <strong>4.1. bindObject without member</strong></h4>
<p>It&apos;s ok to call bindObject without any additional member/method if you want to
register object type and use it later. For example if you want to create your own
object constructor</p>
<h4>  <strong>4.2. bindObject for opaque C pointer</strong></h4>
<p>Usually a C library have constructor(s) and destructor function.
The constructor will return an opaque pointer.</p>
<p>On Nim side, we usually use something like:</p>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">  <span class="ide">CContext</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">distinct</span> <span class="ide">pointer</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">createCContext</span><span class="op">*</span>(): <span class="ide">CContext</span> {<span class="op">.</span><span class="ide">cdecl</span>, <span class="ide">importc</span><span class="op">.</span>}</div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">deleteCContext</span><span class="op">*</span>(<span class="ide">ctx</span>: <span class="ide">CContext</span>) {<span class="op">.</span><span class="ide">cdecl</span>, <span class="ide">importc</span><span class="op">.</span>}</div></div>  </code></pre>
<p>Of course this is not an object or ref object, but we treat it as an object in this case.
Therefore bindObject will work like usual.
Only this time, we also need to specify the destructor function using <code>~</code> operator.</p>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="ide">L</span><span class="op">.</span><span class="ide">bindObject</span>(<span class="ide">CContext</span>):</div></div><div class="line"><div class="line-content">  <span class="ide">createCContext</span> <span class="op">-&gt;</span> <span class="str">&quot;create&quot;</span></div></div><div class="line"><div class="line-content">  <span class="op">~</span><span class="ide">deleteCContext</span></div></div>  </code></pre>
<h2>  <strong>PASSING BY REFERENCE</strong></h2>
<p>Lua basic data types cannot be passed by reference, but Nim does</p>
<p>if you have something like this in Nim:</p>
<pre>  <code class="language-nimrod">proc abc(a, b: var int) =
  a = a + 1
  b = b + 5
</code></pre>
<p>then on Lua side:</p>
<pre>  <code class="language-lua">a = 10
b = 20
a, b = abc(a, b)
assert(a == 11)
assert(b == 25)
</code></pre>
<p>basically, outval will become retval, FIFO ordered</p>
<h2>  <strong>GENERIC PROC BINDING</strong></h2>
<pre>  <code class="language-nimrod">proc mew[T, K](a: T, b: K): T =
  discard

L.bindFunction:
  mew[int, string]
  mew[int, string] -&gt; &quot;mewt&quot;
</code></pre>
<h2>  <strong>CLOSURE BINDING</strong></h2>
<pre>  <code class="language-nimrod">proc main() =
  ...

  var test = 1237
  proc cl() =
    echo test

  L.bindFunction:
    [cl]
    [cl] -&gt; &quot;clever&quot;
</code></pre>
<h2>  <strong>GETTER/SETTER</strong></h2>
<pre>  <code class="language-nimrod">type
  Ship = object
    speed*: int
    power: int

L.bindObject(Ship):
  speed(set)
  speed(get) -&gt; &quot;currentSpeed&quot;
  speed(get, set) -&gt; &quot;velocity&quot;
</code></pre>
<p>then you can access the object&apos;s properties on lua side using &apos;.&apos; (dot) and not &apos;:&apos; (colon)</p>
<pre>  <code class="language-lua">local b = Ship.newShip()
b.speed = 19
assert(b.speed == nil) -- setter only
assert(b.currentSpeed == 19) -- getter only
b.velocity = 20
assert(b.velocity == 20) -- getter &amp; setter
</code></pre>
<h2>  <strong>HOW TO DEBUG</strong></h2>
<p>you can call <strong>nimLuaOptions</strong>(nloDebug, true/false)</p>
<pre>  <code class="language-nimrod">nimLuaOptions(nloDebug, true) #turn on debug
L.bindEnum:
  GENE
  SUBATOM

nimLuaOptions(nloDebug, false) #turn off debug mode
L.bindFunction:
  machine
  engine
</code></pre>
<h2>  <strong>DANGEROUS ZONE</strong></h2>
<p>lua_error, lua_checkstring, lua_checkint, lua_checkudata and other lua C API that can throw error
are dangerous functions when called from Nim context. lua_error use <code>longjmp</code> when compiled to C
or <code>throw</code> when compiled to C++.</p>
<p>Although Nim compiled to C, Nim have it&apos;s own stack frame. Calling lua_error and other functions
that can throw error will disrupt Nim stack frame, and application will crash.</p>
<p>nimLUA avoid using those dangerous functions and and use it&apos;s own set of functions that is considerably
safe. those functions are:</p>
<table>
<thead>
<tr>
<th>lua</th>
<th>nimLUA</th>
</tr>
</thead>
<tbody>
<tr>
<td>lua_error</td>
<td>N/A</td>
</tr>
<tr>
<td>lua_checkstring</td>
<td>nimCheckString</td>
</tr>
<tr>
<td>lua_checkinteger</td>
<td>nimCheckInteger</td>
</tr>
<tr>
<td>lua_checkbool</td>
<td>nimCheckBool</td>
</tr>
<tr>
<td>lua_checknumber</td>
<td>nimCheckNumber</td>
</tr>
<tr>
<td>N/A</td>
<td>nimCheckCstring</td>
</tr>
<tr>
<td>N/A</td>
<td>nimCheckChar</td>
</tr>
<tr>
<td>lua_newmetatable</td>
<td>nimNewMetaTable</td>
</tr>
<tr>
<td>lua_getmetatable</td>
<td>nimGetMetaTable</td>
</tr>
<tr>
<td>lua_checkudata</td>
<td>nimCheckUData</td>
</tr></tbody></table>
<h2>  <strong>Error Handling</strong></h2>
<pre>  <code class="language-Nim"><div class="line"><div class="line-content"><span class="ide">NLError</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">source</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">currentLine</span>: <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">msg</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">NLErrorFunc</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">proc</span>(<span class="ide">ctx</span>: <span class="ide">pointer</span>, <span class="ide">err</span>: <span class="ide">NLError</span>) {<span class="op">.</span><span class="ide">nimcall</span><span class="op">.</span>}</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">NLSetErrorHandler</span><span class="op">*</span>(<span class="ide">L</span>: <span class="ide">PState</span>, <span class="ide">errFunc</span>: <span class="ide">NLErrorFunc</span>)</div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">NLSetErrorContext</span><span class="op">*</span>(<span class="ide">L</span>: <span class="ide">PState</span>, <span class="ide">errCtx</span>: <span class="ide">pointer</span>)</div></div>  </code></pre>
<p>This is actually not a real error handler, because you cannot use raise exception.
The purpose of this function is to provide information to user about wrong argument type
passed from Lua to Nim.</p>
<p>nimLUA already provide a default error handler in case you forget to provide one.</p>
<h2>  <strong>HOW TO ACCESS LUA CODE FROM NIM?</strong></h2>
<p>still under development, contributions are welcome</p>
<h2>Installation via nimble</h2>
<blockquote>
<p>nimble install nimLUA</p>
</blockquote>
<h2>Override shared library name</h2>
<p>You can use compiler switch <code>-d:SHARED_LIB_NAME=&quot;yourlibname&quot;</code></p>
<pre>  <code class="language-bash">$&gt; nim c -r -d:SHARED_LIB_NAME=&quot;lua534.dll&quot; test/test
</code></pre>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/jangko/nimLUA">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-04-14T17:47:11Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
