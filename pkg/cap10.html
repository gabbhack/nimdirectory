<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">cap10</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">terminal</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">expect</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">pty</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">capture</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">replay</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">A tool to capture and replay command line terminal sessions</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install cap10" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Cap10</h1>
<h2>Script, capture and replay terminal sessions</h2>
<p>  <img src="https://github-production-user-asset-6210df.s3.amazonaws.com/4764481/280741508-3a3d90cd-b4d2-44e0-9b1a-c38543cbd903.gif" style="max-width: 100%;" alt="Cap10 Demo" /></p>
<p>You record and play back terminal sessions or other terminal programs
with the <code>cap10</code> command, which will record a process until it exits.</p>
<p>Cap10 will automatically remove long pauses in your input stream. So
type as slow as you want... walk away and come back an hour
later. You&apos;re good.</p>
<ul>
<li><code>cap10 record [optional command]</code> starts recording.</li>
<li>  <code>cap10 play file.cap10</code></li>
<li><code>cap10 convert [filename]</code> will convert a cap10 file to the <em>asciicast 2.0</em> format.</li>
</ul>
<p>The <code>cap10</code> capture format is binary, and there&apos;s currently not a web
player for it. But you can convert it to asciicast format.</p>
<p>On Linux, cap10 should build as a static ELF binary, so can run in
minimal environments like Alpine, without the Python dependencies of
asciinema.</p>
<p>Also, we produce a separate input log to make it easier to automate
scripting for demos (in conjunction w/ our expect capabilities
below). It captures keypresses only, so if you don&apos;t type out a full
command, it won&apos;t capture the exact commands (in the future we may do
some shell integration to get the shell view).</p>
<p>Essentially, cap10 should replace the following tools:</p>
<ul>
<li>script</li>
<li>asciinema</li>
<li>expect</li>
<li>autoexpect (which never worked well anyway)</li>
</ul>
<h2>GIF conversion</h2>
<p>If you&apos;d like to convert the output to a video for a web page, instead
of an Asciicast, we recommend producing an GIF, which you can do
do this by exporting to asciicast and then running the
<a href="https://github.com/asciinema/agg">agg tool</a> from asciinema.</p>
<h2>Expect More</h2>
<p>You can also use <code>cap10</code> as an expect-like library, with the added
benefits:</p>
<ol>
<li>You can fully capture your <code>expect</code> sessions if you want.</li>
<li>You can interact with your scripts if you want.</li>
<li>You can capture the input from your interactions.</li>
</ol>
<p>The second makes expect-like automation easier to write. I&apos;ve had many
cases where the regexp didn&apos;t fire, and the result was a hanging
process, with a long iteration cycle to test. Here, you can just
manually enter input, which will generate output that runs through the
pattern matcher.</p>
<p>For example, the below code waits for a prompt, runs a command, then
waits for &apos;hiho&apos; followed by the enter key (The enter key generates
&apos;\r&apos; NOT &apos;\n&apos;; the log file does translate them back to &apos;\n&apos; to be more
human readable).</p>
<p>But the code never does anything to send that string to the
terminal. Instead, you&apos;re left to manually interact with it, and when
the pattern is matched, the &apos;expect&apos; call returns.</p>
<p>The <code>passthrough</code> flag specifies that the user should be able to
interact. At some point, we&apos;ll expose the ability to turn this on and
off at will, and to provide more control over tty settings.</p>
<pre>  <code>import cap10
var s: ExpectObject

s.spawnSession(captureFile = &quot;expect.cap10&quot;, passthrough = true)
s.expect(&quot;.*\\$ &quot;)
s.send(&quot;~/dev/chalk/chalk&quot;)
s.expect(&quot;hiho\r&quot;)
s.send(&quot;exit&quot;)
s.expect(&quot;eof&quot;)
echo &quot;Capture saved to: &quot;, s.capturePath
</code></pre>
<h2>The switchboard</h2>
<p>At some point, we&apos;ll package this up as a library with bindings to
other languages.</p>
<p>Underlying everything is an IO multiplexing system that allows us to
abitrarily (and dynamically) route output from file descriptors to
other file descriptors, callbacks, etc, all without the need for
threads. We&apos;ve got a bunch of little utilities we&apos;d like to see on top
of this, that we may eventually add.</p>
<h2>Status</h2>
<p>It&apos;s early, and there are some rough edges (for instance, if there are
file perms issues, we&apos;re currently not handling gracefully). This was
done for our internal use, but eventually we will polish this
up. Until then, use at your own risk :)</p>
<p>In the not too distant future, we&apos;ll bundle the API for direct calling
from other languages, with wrappers for (at least) Go and Python.</p>
<p>Eventually, we&apos;d like to have a native player and more, and be able to
natively produce GIFs. But no hurry; the asciinema tools there are
good.</p>
<h2>Building</h2>
<p>You need to have Nim 2.0 installed, and be on a 64-bit posix
system. We really develop only on Linux and Mac, so there&apos;s more than
a non-zero chance that *BSD or WSL won&apos;t work at this point...</p>
<p>But all you should need to do to build the <code>cap10</code> binary is run from
the root of the repo:</p>
<pre>  <code>nimble build
</code></pre>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        Apache-2.0
                    </p>
                

                
                    <p> <a href="https://github.com/crashappsec/cap10">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-12-10T09:01:36Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
