<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">iterrr</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">iterator</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">iterate</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">iterating</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">functional</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">lazy</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">library</button></a>
                </span>
            
        </p>
        <p class="pkg-desc">some("iterate faster. functional style, lazy like, extensible iterator library")</p>
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install iterrr" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><blockquote>
<p>Once a young man approached the Prophet Muhammad and asked him for some advice. The Prophet replied, ‚ÄúDo not become angry,‚Äù and he repeated this three times</p>
</blockquote>
<h1>iterrr!</h1>
<p>iterate faster ... üèéÔ∏è.
Write higher-order functions, get its imperative style at the compile time!</p>
<h2>The Problem</h2>
<p>Writing a full nested loop is a boring task, <code>std/sequtils</code> creates lots of temporary <code>seq</code>s, <a href="https://github.com/def-/nim-iterutils">iterutils</a> uses closure iterators (which is slow).</p>
<h2>The Solution</h2>
<p><code>iterrr</code> uses the <em>ultimate</em> power of meta-programming to bring you the speed that Nim programmers deserve.</p>
<h2>example of generated code</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="str">&quot;hello&quot;</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> </div></div><div class="line"><div class="line-content">  <span class="ide">filter</span>((<span class="ide">i</span>, <span class="ide">_</span>) <span class="op">=&gt;</span> <span class="ide">i</span>  <span class="op">&gt;</span> <span class="num">1</span>)</div></div><div class="line"><div class="line-content">  <span class="op">.</span><span class="ide">map</span>((<span class="ide">_</span>, <span class="ide">ch</span>) <span class="op">=&gt;</span> <span class="ide">ch</span>)</div></div><div class="line"><div class="line-content">  <span class="op">.</span><span class="ide">strjoin</span>() <span class="com">## llo</span></div></div>  </code></pre>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">block</span>:</div></div><div class="line"><div class="line-content">  <span class="kwd">template</span> <span class="ide">iterrrFn3</span>(<span class="ide">_</span>; <span class="ide">ch</span>): <span class="ide">untyped</span> {<span class="op">.</span><span class="ide">dirty</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">ch</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="kwd">template</span> <span class="ide">iterrrFn4</span>(<span class="ide">i</span>; <span class="ide">_</span>): <span class="ide">untyped</span> {<span class="op">.</span><span class="ide">dirty</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">i</span> <span class="op">&gt;</span> <span class="num">1</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="kwd">var</span> <span class="ide">iterrrAcc2</span> <span class="op">=</span> <span class="ide">strjoinInit</span>[<span class="ide">typeof</span>(<span class="ide">iterrrFn3</span>(</div></div><div class="line"><div class="line-content">      <span class="ide">default</span>(<span class="ide">typeof</span>(<span class="str">&quot;hello&quot;</span><span class="op">.</span><span class="ide">pairs</span>))[<span class="num">0</span>], <span class="ide">default</span>(<span class="ide">typeof</span>(<span class="str">&quot;hello&quot;</span><span class="op">.</span><span class="ide">pairs</span>))[<span class="num">1</span>]))]()</div></div><div class="line"><div class="line-content">  <span class="kwd">block</span> <span class="ide">mainLoop</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">li1</span> <span class="kwd">in</span> <span class="str">&quot;hello&quot;</span><span class="op">.</span><span class="ide">pairs</span>:</div></div><div class="line"><div class="line-content">      <span class="kwd">if</span> <span class="ide">iterrrFn4</span>(<span class="ide">li1</span>[<span class="num">0</span>], <span class="ide">li1</span>[<span class="num">1</span>]):</div></div><div class="line"><div class="line-content">        <span class="kwd">block</span>:</div></div><div class="line"><div class="line-content">          <span class="kwd">let</span> <span class="ide">li1</span> <span class="op">=</span> <span class="ide">iterrrFn3</span>(<span class="ide">li1</span>[<span class="num">0</span>], <span class="ide">li1</span>[<span class="num">1</span>])</div></div><div class="line"><div class="line-content">          <span class="kwd">if</span> <span class="kwd">not</span> <span class="ide">strjoinUpdate</span>(<span class="ide">iterrrAcc2</span>, <span class="ide">li1</span>):</div></div><div class="line"><div class="line-content">            <span class="kwd">break</span> <span class="ide">mainLoop</span></div></div><div class="line"><div class="line-content">  <span class="ide">strjoinFinalizer</span>(<span class="ide">iterrrAcc2</span>)</div></div>  </code></pre>
<h2>Usage</h2>
<h3>complete syntax</h3>
<p>  <strong>There is 3 type of usage:</strong></p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="com"># predefined reducer</span></div></div><div class="line"><div class="line-content"><span class="ide">iterable</span> <span class="op">|&gt;</span> <span class="ide">entity1</span>(<span class="ide">_</span>)<span class="op">.</span><span class="ide">entity2</span>(<span class="ide">_</span>)<span class="op">...</span><span class="ide">Reducer</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># custom reducer</span></div></div><div class="line"><div class="line-content"><span class="ide">iterable</span> <span class="op">|&gt;</span> <span class="ide">entity1</span>(<span class="ide">_</span>)<span class="op">.</span><span class="ide">entity2</span>(<span class="ide">_</span>)<span class="op">...</span><span class="ide">reduce</span>(<span class="ide">loopIdents</span>, <span class="ide">accIdent</span> <span class="op">=</span> <span class="ide">initial_value</span>, [<span class="ide">Finalizer</span>]):</div></div><div class="line"><div class="line-content">  <span class="com"># update accIdent</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># custom code</span></div></div><div class="line"><div class="line-content"><span class="ide">iterable</span> <span class="op">|&gt;</span> <span class="ide">entity1</span>(<span class="ide">_</span>)<span class="op">.</span><span class="ide">entity2</span>(<span class="ide">_</span>)<span class="op">...</span><span class="ide">each</span>(<span class="op">...</span><span class="ide">loopIdents</span>):</div></div><div class="line"><div class="line-content">  <span class="com"># do with loopIdents</span></div></div>  </code></pre>
<h3>Main Entities:</h3>
<ol>
<li><strong>map</strong> :: similar to <code>mapIt</code> from <code>std/sequtils</code></li>
<li><strong>filter</strong> :: similar to <code>filterIt</code> from <code>std/sequtils</code></li>
<li><strong>breakif</strong> :: similar to <code>takeWhile</code> in functional programming languages but negative.</li>
<li><strong>inject</strong> :: injects custom code</li>
</ol>
<h4>1. predefined reducer</h4>
<p><strong>NOTE:</strong> you can chain as many <code>map</code>/<code>filter</code>/... as you want in any order, but there is <strong>only one</strong> reducer.</p>
<p>  <strong>There are some predefined reducers in iterrr library:</strong></p>
<ul>
<li><code>toSeq</code> :: stores elements into a <code>seq</code></li>
<li><code>count</code> :: counts elements</li>
<li><code>sum</code> :: calculates summation</li>
<li><code>min</code> :: calculates minimum</li>
<li><code>max</code> :: calculates maximum</li>
<li><code>first</code> :: returns the first item</li>
<li><code>last</code> :: returns the last item</li>
<li><code>any</code> :: similar to <code>any</code> from <code>std/sequtils</code></li>
<li><code>all</code> :: similar to <code>all</code> from <code>std/sequtils</code></li>
<li><code>toHashSet</code> :: stores elements into a <code>HashSet</code></li>
<li><code>strJoin</code> :: similar to <code>join</code> from <code>std/strutils</code></li>
<li><code>toCountTable</code> :: similar to <code>toCountTable</code> from <code>std/tables</code></li>
</ul>
<p>here&apos;s how you can get maximum x, when <code>flatPoints</code> is: <code>[x0, y0, x1, y1, x2, y2, ...]</code></p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">xmax</span> <span class="op">=</span> <span class="ide">flatPoints</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> <span class="ide">filter</span>(<span class="ide">it</span>[<span class="num">0</span>] <span class="kwd">mod</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span>)<span class="op">.</span><span class="ide">map</span>(<span class="ide">it</span>[<span class="num">1</span>])<span class="op">.</span><span class="ide">max</span>()</div></div><div class="line"><div class="line-content"><span class="com"># or</span></div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">xmax</span> <span class="op">=</span> <span class="ide">countup</span>(<span class="num">0</span>, <span class="ide">flatPoints</span><span class="op">.</span><span class="ide">high</span>, <span class="num">2</span>) <span class="op">|&gt;</span> <span class="ide">map</span>(<span class="ide">flatPoints</span>[<span class="ide">it</span>])<span class="op">.</span><span class="ide">max</span>()</div></div>  </code></pre>
<p><strong>NOTE</strong>: see more examples in <code>tests/test.nim</code></p>
<h3>Custom Idents ?!?</h3>
<p>using just <code>it</code> in <code>mapIt</code> and <code>filterIt</code> is just ... and makes code a little unreadable.</p>
<h4>remember these principles when using custom ident:</h4>
<ol>
<li>if there was no custom idents, <code>it</code> is assumed</li>
<li>if there was only 1 custom ident, the custom ident is replaced with <code>it</code></li>
<li>if there was more than 1 custom idents, <code>it</code> is unpacked</li>
</ol>
<p><strong>Here&apos;s some examples</strong>:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">map</span>( <span class="ide">_</span> ) <span class="com"># &quot;it&quot; is available inside the &quot;map&quot;</span></div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">map</span>(<span class="ide">n</span> <span class="op">=&gt;</span> <span class="ide">_</span> )</div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">map</span>((<span class="ide">n</span>) <span class="op">=&gt;</span> <span class="ide">_</span> )</div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">map</span>((<span class="ide">a1</span>, <span class="ide">a2</span>, <span class="op">...</span>) <span class="op">=&gt;</span> <span class="ide">_</span> )</div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">reduce</span>((<span class="ide">a1</span>, <span class="ide">a2</span>, <span class="op">...</span>), <span class="ide">acc</span> <span class="op">=</span> <span class="num">2</span>)</div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">each</span>(<span class="ide">a1</span>, <span class="ide">a2</span>)</div></div>  </code></pre>
<p>Custom idents work with both <code>op:</code> and <code>op()</code> style syntax:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>)<span class="op">.</span><span class="ide">items</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">map</span>: <span class="ide">n</span> <span class="op">=&gt;</span> <span class="ide">_</span></div></div><div class="line"><div class="line-content">  <span class="com"># or map n =&gt; _</span></div></div><div class="line"><div class="line-content">  <span class="op">...</span></div></div><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>)<span class="op">.</span><span class="ide">items</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">filter</span>: (<span class="ide">n</span>, <span class="ide">k</span>) <span class="op">=&gt;</span> <span class="ide">_</span></div></div><div class="line"><div class="line-content">  <span class="com"># or filter (n, k) =&gt; _</span></div></div><div class="line"><div class="line-content">  <span class="op">...</span></div></div>  </code></pre>
<p><strong>example</strong>:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="str">&quot;hello&quot;</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> <span class="ide">filter</span>((<span class="ide">i</span>, <span class="ide">c</span>) <span class="op">=&gt;</span> <span class="ide">i</span> <span class="op">&gt;</span> <span class="num">2</span>)<span class="op">.</span><span class="ide">map</span>((<span class="ide">_</span>, <span class="ide">c</span>) <span class="op">=&gt;</span> <span class="ide">ord</span> <span class="ide">c</span>)</div></div>  </code></pre>
<h3>Limitation</h3>
<p>you have to specify the iterator for <code>seq</code> and other iterable objects [<code>HSlice</code> is an exception]</p>
<p>  <strong>example:</strong></p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">s</span> <span class="op">=</span> [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>]</div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">s</span> <span class="op">|&gt;</span> <span class="ide">map</span>(<span class="op">$</span><span class="ide">it</span>)<span class="op">.</span><span class="ide">toseq</span>() <span class="com"># doesn&apos;t work</span></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">s</span><span class="op">.</span><span class="ide">items</span> <span class="op">|&gt;</span> <span class="ide">map</span>(<span class="op">$</span><span class="ide">it</span>)<span class="op">.</span><span class="ide">toseq</span>() <span class="com"># works fine</span></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">s</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> <span class="ide">map</span>(<span class="op">$</span><span class="ide">it</span>)<span class="op">.</span><span class="ide">toseq</span>() <span class="com"># works fine</span></div></div>  </code></pre>
<h3>Define Your Reducer!</h3>
<p><strong>every reducer have</strong>: [let&apos;t name our custom reducer <code>zzz</code>]</p>
<ol>
<li><code>zzzInit[T](args...): ...</code> :: initializes the value of accumulator(state) :: must be <em>generic</em>.</li>
<li><code>zzzUpdate(var acc, newValue): bool</code> :: updates the accumulator based on <code>newValue</code>, if returns false, the iteration stops.</li>
<li><code>zzzFinalizer(n): ...</code> :: returns the result of the accumulator.</li>
</ol>
<p><strong>NOTE</strong>: see implementations in <code>src/iterrr/reducers.nim</code></p>
<h3>Custom Reducer</h3>
<p><strong>pattern</strong>:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">ITER</span> <span class="op">|&gt;</span> <span class="op">...</span><span class="ide">reduce</span>(<span class="ide">idents</span>, <span class="ide">acc</span> <span class="op">=</span> <span class="ide">initial_value</span>, [<span class="ide">finalizer</span>]): </div></div><div class="line"><div class="line-content">   <span class="ide">update</span> <span class="ide">acc</span> <span class="ide">here</span></div></div>  </code></pre>
<p><strong>Notes</strong>:</p>
<ul>
<li>acc can be any ident like <code>result</code> or <code>answer</code>, ...</li>
<li><strong>Finalizer</strong>:
<ul>
<li>it&apos;s optional</li>
<li>it&apos;s an experssion inside of it you have access to the <code>acc</code> ident</li>
<li>the default finalizer is <code>acc</code> ident</li>
</ul>
</li>
</ul>
<p><strong>Example of searching for a number</strong>:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">element</span> <span class="op">=</span> (<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">reduce</span>(<span class="ide">it</span>, <span class="ide">answer</span> <span class="op">=</span> <span class="ide">none</span> <span class="ide">int</span>, <span class="ide">answer</span><span class="op">.</span><span class="ide">get</span>):</div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="ide">your_condition</span>(<span class="ide">it</span>):</div></div><div class="line"><div class="line-content">    <span class="ide">answer</span> <span class="op">=</span> <span class="ide">some</span> <span class="ide">MyNumber</span></div></div><div class="line"><div class="line-content">    <span class="kwd">break</span> <span class="ide">mainLoop</span></div></div>  </code></pre>
<p><strong>Note</strong>: if the item has not found, raises <code>UnpackDefect</code> error as result of <code>get</code> function  in finalizer <code>answer.get</code>.</p>
<h3>Don&apos;t Wanna Use Reducer?</h3>
<blockquote>
<p>My view is that a lot of the time in Nim when you&apos;re doing filter or map you&apos;re just going to operate it on afterwards
:: <a href="https://github.com/beef331">@beef331</a> AKA beef.</p>
</blockquote>
<p>I&apos;m agree with beef. it happens a lot.
you can do it with <code>each(arg1, arg2,...)</code>. [arguments semantic is the same as custom idents]</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">(<span class="num">1.</span><span class="op">.</span><span class="num">10</span>) <span class="op">|&gt;</span> <span class="ide">filter</span>(<span class="ide">it</span> <span class="kwd">in</span> <span class="num">3.</span><span class="op">.</span><span class="num">5</span>)<span class="op">.</span><span class="ide">each</span>(<span class="ide">num</span>):</div></div><div class="line"><div class="line-content">  <span class="ide">echo</span> <span class="ide">num</span></div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="ide">num</span> <span class="op">&lt;</span> <span class="num">7</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">break</span> <span class="ide">mainLoop</span></div></div>  </code></pre>
<p><strong>Note</strong>: <code>mainLoop</code> is the main loop block</p>
<h3>Custom Adapter</h3>
<p>adapters are inspired from implmentation of iterators in Nim.
TODO: explain more</p>
<p><strong>Limitations</strong>: you have to import the dependencies of adapters in order to use them.</p>
<p><strong>Built-in adapter</strong>:</p>
<ul>
<li>  <code>group</code></li>
<li>  <code>window</code></li>
<li>  <code>cycle</code></li>
<li>  <code>flatten</code></li>
<li>  <code>drop</code></li>
<li>  <code>take</code></li>
</ul>
<p><strong>Usage</strong>:
example:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">matrix</span> <span class="op">=</span> [</div></div><div class="line"><div class="line-content">  [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>],</div></div><div class="line"><div class="line-content">  [<span class="num">4</span>, <span class="num">5</span>, <span class="num">6</span>],</div></div><div class="line"><div class="line-content">  [<span class="num">7</span>, <span class="num">8</span>, <span class="num">9</span>]</div></div><div class="line"><div class="line-content">]</div></div><div class="line"><div class="line-content"><span class="ide">matrix</span><span class="op">.</span><span class="ide">items</span> <span class="op">|&gt;</span> <span class="ide">flatten</span>()<span class="op">.</span><span class="ide">map</span>(<span class="op">-</span><span class="ide">it</span>)<span class="op">.</span><span class="ide">cycle</span>(<span class="num">11</span>)<span class="op">.</span><span class="ide">group</span>(<span class="num">4</span>)<span class="op">.</span><span class="ide">toseq</span>()</div></div>  </code></pre>
<p>result:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="op">@</span>[</div></div><div class="line"><div class="line-content">  <span class="op">@</span>[<span class="op">-</span><span class="num">1</span>, <span class="op">-</span><span class="num">2</span>, <span class="op">-</span><span class="num">3</span>, <span class="op">-</span><span class="num">4</span>], </div></div><div class="line"><div class="line-content">  <span class="op">@</span>[<span class="op">-</span><span class="num">5</span>, <span class="op">-</span><span class="num">6</span>, <span class="op">-</span><span class="num">7</span>, <span class="op">-</span><span class="num">8</span>], </div></div><div class="line"><div class="line-content">  <span class="op">@</span>[<span class="op">-</span><span class="num">9</span>, <span class="op">-</span><span class="num">1</span>, <span class="op">-</span><span class="num">2</span>] </div></div><div class="line"><div class="line-content">]</div></div>  </code></pre>
<p>  <em>see   <code>tests</code>/  <code>test.nim</code> for more.</em></p>
<p><strong>Define your custom adapter</strong>:
for now the name of loop iterator are limited to <code>it</code>.
TODO;
see <code>src</code>/<code>iterrr</code>/<code>adapters</code>.</p>
<h2><code>iterrr</code> macro</h2>
<p>don&apos;t like <code>|&gt;</code> operator? no problem! use <code>iterrr</code> keyword:</p>
<p>pattern:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">iterable</span><span class="op">.</span><span class="kwd">iterator</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">filter</span>(<span class="op">...</span>)</div></div><div class="line"><div class="line-content">  <span class="ide">map</span>(<span class="op">...</span>)</div></div><div class="line"><div class="line-content">  <span class="ide">reducer</span>(<span class="op">...</span>)</div></div><div class="line"><div class="line-content">  <span class="ide">reduce</span>(<span class="op">...</span>)<span class="op">/</span><span class="ide">each</span>(<span class="op">...</span>):</div></div><div class="line"><div class="line-content">    <span class="com"># code ...</span></div></div>  </code></pre>
<p>example:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">points</span> <span class="op">=</span> <span class="op">@</span>[(<span class="num">1</span>, <span class="num">2</span>), (<span class="op">-</span><span class="num">3</span>, <span class="num">4</span>), (<span class="num">12</span>, <span class="num">3</span>), (<span class="op">-</span><span class="num">1</span>, <span class="op">-</span><span class="num">6</span>), (<span class="num">5</span>, <span class="op">-</span><span class="num">9</span>)]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">points</span><span class="op">.</span><span class="ide">items</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">map</span> (<span class="ide">x</span>, <span class="ide">y</span>) <span class="op">=&gt;</span> <span class="ide">x</span> <span class="com"># or map((x, y) =&gt; x)</span></div></div><div class="line"><div class="line-content">  <span class="ide">filter</span> <span class="ide">it</span> <span class="op">&gt;</span> <span class="num">0</span>   <span class="com"># or filter(it &gt; 0)</span></div></div><div class="line"><div class="line-content">  <span class="ide">each</span> <span class="ide">n</span>:         <span class="com"># or each(n):</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">n</span></div></div>  </code></pre>
<h2>Nesting</h2>
<p>Both the <code>|&gt;</code> operator and <code>iterrr</code> macro can be nested.</p>
<p>Examples:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">matrix</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> <span class="ide">map</span>((<span class="ide">ia</span>, <span class="ide">a</span>) <span class="op">=&gt;</span> (</div></div><div class="line"><div class="line-content">    <span class="ide">a</span><span class="op">.</span><span class="ide">pairs</span> <span class="op">|&gt;</span> <span class="ide">map</span>((<span class="ide">ib</span>, <span class="ide">_</span>) <span class="op">=&gt;</span> (<span class="ide">ia</span>, <span class="ide">ib</span>))<span class="op">.</span><span class="ide">toseq</span>()</div></div><div class="line"><div class="line-content">  ))<span class="op">.</span><span class="ide">toseq</span>()</div></div>  </code></pre>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">matrix</span><span class="op">.</span><span class="ide">pairs</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">map</span>: (<span class="ide">ia</span>, <span class="ide">a</span>) <span class="op">=&gt;</span> <span class="ide">a</span><span class="op">.</span><span class="ide">pairs</span><span class="op">.</span><span class="ide">iterrr</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">map</span>: (<span class="ide">ib</span>, <span class="ide">_</span>) <span class="op">=&gt;</span> (<span class="ide">ia</span>, <span class="ide">ib</span>)</div></div><div class="line"><div class="line-content">    <span class="ide">toseq</span>()</div></div><div class="line"><div class="line-content">  <span class="ide">toseq</span>()</div></div>  </code></pre>
<h2>Debugging</h2>
<p>use <code>-d:iterrrDebug</code> flag to see generated code.</p>
<h2>Breaking changes</h2>
<h3><code>0.x</code> -&gt; <code>1.x</code>:</h3>
<ul>
<li>using brackets for defining custom idents is no longer supported.</li>
</ul>
<h2>Inspirations</h2>
<ol>
<li>  <a href="https://github.com/zero-functional/zero-functional">zero_functional</a></li>
<li>  <a href="https://github.com/narimiran/itertools">itertools</a></li>
<li>  <a href="https://github.com/beef331/slicerator">slicerator</a></li>
<li>  <a href="https://github.com/nim-lang/Nim/issues/18405#issuecomment-888391521">xflywind&apos;s comment on this issue</a></li>
<li>  <a href="https://github.com/baabelfish/mangle/">mangle</a></li>
</ol>
<h2>Common Questions:</h2>
<h3><code>iterrr</code> VS <code>zero_functional</code>:</h3>
<p><code>iterrr</code> targets the same problem as <code>zero_functional</code>, while being better at  <em>extensibility</em>.</p>
<p>  <strong>Is it fully &quot;zero cost&quot; like   <code>zero_functional</code> though?</strong></p>
<blockquote>
<p>well NO, most of it is because of reducer update calls, however the speed difference is soooo tiny and you can&apos;t even measure it. I could define all reducer updates as <code>template</code> instead of function but IMO it&apos;s better to have call stack when you hit errors ...</p>
</blockquote>
<h2>Quotes</h2>
<blockquote>
<p>writing macro is kind of addicting...
:: <a href="https://github.com/PMunch/">PMunch</a></p>
</blockquote>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/hamidb80/steps">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-07-16T01:58:56Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
