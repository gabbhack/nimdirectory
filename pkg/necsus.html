<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">necsus</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">ecs</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">entity</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">component</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">system</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">games</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">Entity Component System</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install necsus" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Necsus: An ECS for Nim</h1>
<p><a href="https://github.com/NecsusECS/Necsus/actions/workflows/build.yml">  <img src="https://github.com/NecsusECS/Necsus/actions/workflows/build.yml/badge.svg" style="max-width: 100%;" alt="Build" /></a>
<a href="https://github.com/NecsusECS/Necsus/blob/main/LICENSE">  <img src="https://img.shields.io/badge/License-Apache_2.0-blue.svg" style="max-width: 100%;" alt="License" /></a></p>
<p>  <img src="https://github.com/NecsusECS/NecsusParticleDemo/blob/main/demo.gif?raw=true" style="max-width: 100%;" alt="" /></p>
<p>A &quot;disappearing&quot; ECS (entity component system) library for Nim. Necsus uses Nim macros to generate code for creating
and executing an ECS based application. Components are just regular objects, systems are regular procs, and everything
related to entities is handled for you.</p>
<p>More details about how ECS architectures work can be found here:</p>
<ul>
<li>  <a href="http://gameprogrammingpatterns.com/component.html">Component game programming pattern</a></li>
<li>  <a href="http://entity-systems.wikidot.com/">What&apos;s an Entity System?</a></li>
<li>  <a href="https://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/">Evolve your hierarchy</a></li>
<li>  <a href="https://en.wikipedia.org/wiki/Entity_component_system">ECS on wikipedia</a></li>
</ul>
<h3>Design</h3>
<p>Necsus was born out of the idea that Nim&apos;s macros could drastically reduce the boilerplate required for building an ECS
based application, while still being approachable and keeping the cognitive overhead low.</p>
<ul>
<li>Entities are managed on your behalf. Under the covers, they&apos;re represented as an <code>int32</code></li>
<li>Components are regular Nim types. Just about any type can be be used as a component.</li>
<li>Systems are <code>proc</code>s. They get access to the broader application state through arguments with special types; called
directives</li>
<li>Systems and components are wired together automatically into a <code>proc</code> called an &quot;app&quot;. Running your app is as simple
as calling the genereated <code>proc</code>.</li>
</ul>
<h3>An example</h3>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">random</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">Position</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">x</span><span class="op">*</span>, <span class="ide">y</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">Velocity</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">dx</span><span class="op">*</span>, <span class="ide">dy</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">create</span>(<span class="ide">spawn</span>: <span class="ide">Spawn</span>[(<span class="ide">Position</span>, <span class="ide">Velocity</span>)]) {<span class="op">.</span><span class="ide">startupSys</span><span class="op">.</span>}<span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Creates a handful entities at random positions with random velocities</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">_</span> <span class="kwd">in</span> <span class="num">1.</span><span class="op">.</span><span class="num">10</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">spawn</span><span class="op">.</span><span class="ide">with</span>(</div></div><div class="line"><div class="line-content">            <span class="ide">Position</span>(<span class="ide">x</span>: <span class="ide">rand</span>(<span class="num">0.0</span><span class="op">..</span><span class="num">100.0</span>), <span class="ide">y</span>: <span class="ide">rand</span>(<span class="num">0.0</span><span class="op">..</span><span class="num">100.0</span>)),</div></div><div class="line"><div class="line-content">            <span class="ide">Velocity</span>(<span class="ide">dx</span>: <span class="ide">rand</span>(<span class="num">0.0</span><span class="op">..</span><span class="num">10.0</span>), <span class="ide">dy</span>: <span class="ide">rand</span>(<span class="num">0.0</span><span class="op">..</span><span class="num">10.0</span>))</div></div><div class="line"><div class="line-content">        )</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">move</span>(<span class="ide">dt</span>: <span class="ide">TimeDelta</span>, <span class="ide">entities</span>: <span class="ide">Query</span>[(<span class="kwd">ptr</span> <span class="ide">Position</span>, <span class="ide">Velocity</span>)]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Updates the positions of each component</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> (<span class="ide">position</span>, <span class="ide">velocity</span>) <span class="kwd">in</span> <span class="ide">entities</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">position</span><span class="op">.</span><span class="ide">x</span> <span class="op">+=</span> <span class="ide">dt</span>() <span class="op">*</span> <span class="ide">velocity</span><span class="op">.</span><span class="ide">dx</span></div></div><div class="line"><div class="line-content">        <span class="ide">position</span><span class="op">.</span><span class="ide">y</span> <span class="op">+=</span> <span class="ide">dt</span>() <span class="op">*</span> <span class="ide">velocity</span><span class="op">.</span><span class="ide">dy</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">report</span>(<span class="ide">entities</span>: <span class="ide">FullQuery</span>[(<span class="ide">Position</span>, )]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Prints the position of each entity</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">comp</span> <span class="kwd">in</span> <span class="ide">entities</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="ide">eid</span>, <span class="str">&quot; is at &quot;</span>, <span class="ide">comp</span>[<span class="num">0</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">exiter</span>(<span class="ide">iterations</span>: <span class="ide">Local</span>[<span class="ide">int</span>], <span class="ide">exit</span>: <span class="ide">Shared</span>[<span class="ide">NecsusRun</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Keeps track of the number of iterations through the system and eventually exits</span></div></div><div class="line"><div class="line-content">    <span class="kwd">if</span> <span class="ide">iterations</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">&gt;=</span> <span class="num">100</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">exit</span> :<span class="op">=</span> <span class="ide">ExitLoop</span></div></div><div class="line"><div class="line-content">    <span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">iterations</span> :<span class="op">=</span> <span class="ide">iterations</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">+</span> <span class="num">1</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">app</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">create</span>, <span class="op">~</span><span class="ide">move</span>, <span class="op">~</span><span class="ide">report</span>, <span class="op">~</span><span class="ide">exiter</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div><div class="line"><div class="line-content">    <span class="com">## The skeleton into which the ECS code will be injected</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># Run your app</span></div></div><div class="line"><div class="line-content"><span class="ide">app</span>()</div></div>  </code></pre>
<h3>More Examples</h3>
<ul>
<li>  <a href="https://github.com/NecsusECS/NecsusParticleDemo">Particle Demo</a></li>
<li>  <a href="https://github.com/NecsusECS/NecsusAsteroids">Asteroids</a></li>
</ul>
<h2>API Documentation</h2>
<p>API Documentation is available here:</p>
<p>  <a href="https://necsusecs.github.io/Necsus/necsus.html">https://necsusecs.github.io/Necsus/</a></p>
<h2>Using Necsus</h2>
<p>To get started with Necsus, you define your app by adding the <code>necsus</code> pragma onto a function declaration:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<p>That&apos;s it. At this point you have a functioning ECS setup, though it won&apos;t do much without systems attached. If you
were to call <code>myApp</code> it would just loop infinitely.</p>
<h3>Adding systems</h3>
<p>To make your application do useful work, you need to wire up systems. Creating a system is easy -- it&apos;s just a <code>proc</code>.
The name of that <code>proc</code> then prefixed with a <code>~</code> and passed into the <code>necsus</code> pragma:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">helloWorld</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;hello world&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">helloWorld</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<p>In the above example, if you called <code>myApp</code>, it would print <code>hello world</code> to the console in an infinite loop.</p>
<p>If you&apos;re curious about the tilde prefix, it&apos;s used to convince the Nim type checker that all the give systems
are actually compatible, despite being <code>proc</code>s with different arguments.</p>
<h3>Passing multiple systems</h3>
<p>When given multiple systems, they will be executed in the same order in which they are passed in:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">first</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">second</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">first</span>, <span class="op">~</span><span class="ide">second</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h3>Types of Systems</h3>
<p>Within the lifecycle of an app, there are three phases in which a system can be executed:</p>
<ol>
<li>Startup: The system is executed once when the app is started. Systems opt in to this phase by adding the
<code>startupSys</code> pragma.</li>
<li>Loop: The system is executed for every loop. Systems naturally exist in this phase, though you can also be
explicit by adding the <code>loopSys</code> pragma to them.</li>
<li>Teardown: The system is executed once after the loop exits. Systems opt in to this phase by adding the
<code>teardownSys</code> pragma.</li>
</ol>
<p>There are also callback systems that are only invoked when a specific situation is engaged:</p>
<ol>
<li>Save callback: The system is executed anytime the &apos;Save&apos; directive is invoked. Systems opt in to this phase
by adding the <code>saveSys</code> pragma. For these systems, the return type of the system is used as the value being
saved. More on this below.</li>
<li>Restore callback: The system is executed anytime the <code>Restore</code> directive is invoked. Systems opt in to this phase
with the <code>restoreSys</code> pragma. It is expected that the first parameter of these systems is not a directive, but is
instead the value being decoded.</li>
</ol>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">startupSystem</span>() {<span class="op">.</span><span class="ide">startupSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">loopSystem</span>() {<span class="op">.</span><span class="ide">loopSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">teardownSystem</span>() {<span class="op">.</span><span class="ide">teardownSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">savingSystem</span>(): <span class="ide">string</span> {<span class="op">.</span><span class="ide">saveSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="str">&quot;Value to save&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">restoringSystem</span>(<span class="ide">value</span>: <span class="ide">string</span>) {<span class="op">.</span><span class="ide">restoreSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Restored value: &quot;</span>, <span class="ide">value</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>(<span class="ide">input</span>: <span class="ide">string</span>) {<span class="op">.</span><span class="ide">necsus</span>([</div></div><div class="line"><div class="line-content">    <span class="op">~</span><span class="ide">startupSystem</span>,</div></div><div class="line"><div class="line-content">    <span class="op">~</span><span class="ide">loopSystem</span>,</div></div><div class="line"><div class="line-content">    <span class="op">~</span><span class="ide">teardownSystem</span>,</div></div><div class="line"><div class="line-content">    <span class="op">~</span><span class="ide">savingSystem</span>,</div></div><div class="line"><div class="line-content">    <span class="op">~</span><span class="ide">restoringSystem</span>,</div></div><div class="line"><div class="line-content">], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h3>Directives</h3>
<p>Systems interact with the rest of an app by using special method arguments, called <code>Directives</code>. These directives are
just regular types that Necsus knows how to wire up in special ways.</p>
<p>Systems can&apos;t have any other type of argument. If Necsus doesn&apos;t recognize how to wire-up an argument, the compile
will fail.</p>
<h4>Spawn</h4>
<p>To create new entities, use a <code>Spawn</code> directive. This takes a single argument, which is the initial set of components
to attach to the newly minted entity.</p>
<p>There are two ways to spawn an entity, <code>Spawn</code> and <code>FullSpawn</code>. Under the covers, they do the same thing. The difference
is that <code>FullSpawn</code> returns the generated <code>EntityId</code>, and <code>Spawn</code> does not. In general, you should use <code>Spawn</code> over
<code>FullSpawn</code> whenever possible.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">spawningSystem</span>(<span class="ide">spawn</span>: <span class="ide">Spawn</span>[(<span class="ide">A</span>, <span class="ide">B</span>)]) {<span class="op">.</span><span class="ide">startupSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">i</span> <span class="kwd">in</span> <span class="num">1.</span><span class="op">.</span><span class="num">10</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">spawn</span><span class="op">.</span><span class="ide">with</span>(<span class="ide">A</span>(), <span class="ide">B</span>())</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Spawned a new entity!&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">spawningSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h5>Why <code>Spawn</code> and <code>FullSpawn</code>?</h5>
<p>During a build, Necsus automatically generates a set of all possible archetypes that could possibly exist at
runtime. It does this by examining systems with <code>FullQuery</code>, <code>FullSpawn</code>, <code>Lookup</code>, and <code>Attach</code> directives then uses
that to calculate all the combinatorial possibilities. Naively, this is an exponential algorithm. This is important
because archetypes themselves aren&apos;t free. Each archetype that exists increases build times and slows down queries.</p>
<p>Using <code>Spawn</code> instead of <code>FullSpawn</code> allows the underlying algorithm to ignore those directives when calculating the
final set of archetypes. Because your system doesn&apos;t have access to the <code>EntityId</code>, it can&apos;t use the output of a
<code>Spawn</code> call as the input to an <code>Attach</code> directive, which means it can&apos;t contribute to the list of archetypes.</p>
<h4>Query</h4>
<p>Queries allow you to iterate over entities that have a specific set of components attached to them. Queries are the
primary mechanism for interacting with entities and components.</p>
<p>There are two kinds of queries, <code>Query</code> and <code>FullQuery</code>. <code>Query</code> gives you access to the components, while <code>FullQuery</code>
gives you access to the components <em>and</em> the <code>EntityId</code>. You should use <code>Query</code> wherever possible, then only use
<code>FullQuery</code> when you explicitly need the <code>EntityId</code>. For details about why the two mechanisms exist, see the section
above about <code>Spawn</code> versus <code>FullSpawn</code>.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">reportingSystem</span>(<span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">A</span>, <span class="ide">B</span>)]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">components</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Found entity with &quot;</span>, <span class="ide">components</span>[<span class="num">0</span>], <span class="str">&quot; and &quot;</span>, <span class="ide">components</span>[<span class="num">1</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">reportingSystemWithEntity</span>(<span class="ide">query</span>: <span class="ide">FullQuery</span>[(<span class="ide">A</span>, <span class="ide">B</span>)]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">components</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Found entity &quot;</span>, <span class="ide">eid</span>, <span class="str">&quot; with &quot;</span>, <span class="ide">components</span>[<span class="num">0</span>], <span class="str">&quot; and &quot;</span>, <span class="ide">components</span>[<span class="num">1</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">reportingSystem</span>, <span class="op">~</span><span class="ide">reportingSystemWithEntity</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Queries with Pointers</h4>
<p>If you want to loop through a set of entities and update the values of their components, the most efficient
mechanism available is to update those values in place. This is accomplished by requesting pointers when doing a query:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">value</span>: <span class="ide">int</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">inPlaceUpdate</span>(<span class="ide">query</span>: <span class="ide">Query</span>[(<span class="kwd">ptr</span> <span class="ide">A</span>, )]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> (<span class="ide">a</span>) <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">a</span><span class="op">.</span><span class="ide">value</span> <span class="op">+=</span> <span class="num">1</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">inPlaceUpdate</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Queries that exclude components</h4>
<p>There will be times you want to query for entities that <em>exclude</em> a set of
components. This can be accomplished with the <code>Not</code> type:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">a</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">b</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">C</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">excludingC</span>(<span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">A</span>, <span class="ide">B</span>, <span class="kwd">Not</span>[<span class="ide">C</span>])]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> (<span class="ide">a</span>, <span class="ide">b</span>, <span class="ide">_</span>) <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Found a with &quot;</span>, <span class="ide">a</span><span class="op">.</span><span class="ide">a</span>, <span class="str">&quot; and b with &quot;</span>, <span class="ide">b</span><span class="op">.</span><span class="ide">b</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">excludingC</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Queries with optional components</h4>
<p>If you would like a query to include a component if it exists, but still return the entity if it doesn&apos;t exist, you
can use an optional in the component query:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">options</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">a</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">b</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">optionalB</span>(<span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">A</span>, <span class="ide">Option</span>[<span class="ide">B</span>])]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> (<span class="ide">a</span>, <span class="ide">b</span>) <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Found a with &quot;</span>, <span class="ide">a</span><span class="op">.</span><span class="ide">a</span></div></div><div class="line"><div class="line-content">        <span class="kwd">if</span> <span class="ide">b</span><span class="op">.</span><span class="ide">isSome</span>: <span class="ide">echo</span> <span class="str">&quot;Component B exists: &quot;</span>, <span class="ide">b</span><span class="op">.</span><span class="ide">get</span>()<span class="op">.</span><span class="ide">b</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">optionalB</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Querying for a single value</h4>
<p>For situations where you have a singleton instance, you can use the <code>single</code> method to pull it from a query:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">options</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">oneInstance</span>(<span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">A</span>, )]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">let</span> (<span class="ide">a</span>) <span class="op">=</span> <span class="ide">query</span><span class="op">.</span><span class="ide">single</span><span class="op">.</span><span class="ide">get</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">a</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">oneInstance</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Delete</h4>
<p>Deleting is the opposite of spawning -- it deletes an entity and all the associated components:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">deletingSystem</span>(<span class="ide">query</span>: <span class="ide">FullQuery</span>[(<span class="ide">A</span>, <span class="ide">B</span>)], <span class="ide">delete</span>: <span class="ide">Delete</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">_</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">delete</span>(<span class="ide">eid</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">deletingSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Lookup</h4>
<p><code>Lookup</code> allows you to get components for an entity when you already have the entity id. It returns an <code>Option</code>, which
will be a <code>Some</code> if the entity has the exact requested components:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">options</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">C</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">D</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">lookupSystem</span>(<span class="ide">query</span>: <span class="ide">FullQuery</span>[(<span class="ide">A</span>, <span class="ide">B</span>)], <span class="ide">lookup</span>: <span class="ide">Lookup</span>[(<span class="ide">C</span>, <span class="ide">D</span>)]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">_</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="kwd">let</span> (<span class="ide">c</span>, <span class="ide">d</span>) <span class="op">=</span> <span class="ide">lookup</span>(<span class="ide">eid</span>)<span class="op">.</span><span class="ide">get</span>()</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Found entity &quot;</span>, <span class="ide">eid</span>, <span class="str">&quot; with &quot;</span>, <span class="ide">c</span>, <span class="str">&quot; and &quot;</span>, <span class="ide">d</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">lookupSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Attach/Detach</h4>
<p>Attaching and detaching allow you to add new components or remove existing components from an entity:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">options</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">C</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">attachDetach</span>(<span class="ide">query</span>: <span class="ide">FullQuery</span>[(<span class="ide">A</span>, )], <span class="ide">attachB</span>: <span class="ide">Attach</span>[(<span class="ide">B</span>, )], <span class="ide">detachC</span>: <span class="ide">Detach</span>[(<span class="ide">C</span>, )]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">_</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">eid</span><span class="op">.</span><span class="ide">attachB</span>((<span class="ide">B</span>(), ))</div></div><div class="line"><div class="line-content">        <span class="ide">eid</span><span class="op">.</span><span class="ide">detachC</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">attachDetach</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>TimeDelta</h4>
<p><code>TimeDelta</code> is a <code>proc(): float</code> filled with the amount of time since the last execution of a system</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">showTime</span>(<span class="ide">dt</span>: <span class="ide">TimeDelta</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Time since last system execution: &quot;</span>, <span class="ide">dt</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">showTime</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>TimeElapsed</h4>
<p><code>TimeElapsed</code> is a <code>proc(): float</code> that tracks the amount of time spent executing the current application</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">showTime</span>(<span class="ide">elapsed</span>: <span class="ide">TimeElapsed</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Time spent executing app: &quot;</span>, <span class="ide">elapsed</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">showTime</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Local</h4>
<p>Local variables are a way to manage state that is specific to one system. Local variables will only be visible to the
system that declares them as arguments.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">localVars</span>(<span class="ide">executionCount</span>: <span class="ide">Local</span>[<span class="ide">int</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Total executions so far: &quot;</span>, <span class="ide">executionCount</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>)</div></div><div class="line"><div class="line-content">    <span class="ide">executionCount</span> :<span class="op">=</span> <span class="ide">executionCount</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">+</span> <span class="num">1</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">localVars</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Shared</h4>
<p>Shared variables are shared across all systems. Any shared variable with the same type will have access to the same
underlying value.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">updateCount</span>(<span class="ide">count</span>: <span class="ide">Shared</span>[<span class="ide">int</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">count</span> :<span class="op">=</span> <span class="ide">count</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">+</span> <span class="num">1</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">printCount</span>(<span class="ide">count</span>: <span class="ide">Shared</span>[<span class="ide">int</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Total executions so far: &quot;</span>, <span class="ide">count</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">updateCount</span>, <span class="op">~</span><span class="ide">printCount</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Inbox/Outbox (aka Events)</h4>
<p><code>Inbox</code> and <code>Outbox</code> represent the eventing system in Necsus. Events are published using the <code>Outbox</code> and read using
the <code>Inbox</code>. Any <code>Inbox</code> or <code>Outbox</code> with the same type will shared the same underlying mailbox.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">SomeEvent</span> <span class="op">=</span> <span class="kwd">distinct</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">publish</span>(<span class="ide">sender</span>: <span class="ide">Outbox</span>[<span class="ide">SomeEvent</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">sender</span>(<span class="ide">SomeEvent</span>(<span class="str">&quot;This is a message&quot;</span>))</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">receive</span>(<span class="ide">receiver</span>: <span class="ide">Inbox</span>[<span class="ide">SomeEvent</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">event</span> <span class="kwd">in</span> <span class="ide">receiver</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="ide">event</span><span class="op">.</span><span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">publish</span>, <span class="op">~</span><span class="ide">receive</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Bundles</h4>
<p><code>Bundle</code>s are a way of grouping together multiple directives into a single object to make them easier pass around. They
are useful when you want to encapsulate a set of logic that needs to operate on multiple directives.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">B</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">MyBundle</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">spawn</span><span class="op">*:</span> <span class="ide">FullSpawn</span>[(<span class="ide">A</span>, )]</div></div><div class="line"><div class="line-content">        <span class="ide">attach</span><span class="op">*:</span> <span class="ide">Attach</span>[(<span class="ide">B</span>, )]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">useBundle</span>(<span class="ide">bundle</span>: <span class="ide">Bundle</span>[<span class="ide">MyBundle</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">let</span> <span class="ide">eid</span> <span class="op">=</span> <span class="ide">bundle</span><span class="op">.</span><span class="ide">spawn</span><span class="op">.</span><span class="ide">with</span>(<span class="ide">A</span>())</div></div><div class="line"><div class="line-content">    <span class="ide">bundle</span><span class="op">.</span><span class="ide">attach</span>(<span class="ide">eid</span>, (<span class="ide">B</span>(), ))</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">useBundle</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Save</h4>
<p>The <code>Save</code> directive is a <code>proc</code> that performs the following actions:</p>
<ol>
<li>Invokes all the systems tagged with the <code>saveSys</code> pragma</li>
<li>Serializes the results as a JSON object, where the names of the keys are the names of the <em>types</em> returned
from the save systems</li>
<li>Writes the serialized JSON to a stream</li>
</ol>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">MyStrings</span> <span class="op">=</span> <span class="ide">seq</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">saveValues</span>(): <span class="ide">MyStrings</span> {<span class="op">.</span><span class="ide">saveSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="op">@</span>[ <span class="str">&quot;a&quot;</span>, <span class="str">&quot;b&quot;</span>, <span class="str">&quot;c&quot;</span> ]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">doSave</span>(<span class="ide">save</span>: <span class="ide">Save</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">save</span>()</div></div><div class="line"><div class="line-content">    <span class="com"># The above statement prints: { &quot;MyStrings&quot;: [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ] }</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">saveValues</span>, <span class="op">~</span><span class="ide">doSave</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<p>The benefit of using the <code>Save</code> pragma is that it lets you separate your logic for <em>what</em> needs to be serialized from
your logic that defines <em>how</em> to serialize. You can scatter your <code>saveSys</code> systems throughout your project so they
are colocated with the other systems they are associated with.</p>
<h4>Restore</h4>
<p>The <code>Restore</code> directive is the opposite of <code>Save</code>. It accepts a json stream, deserializes it, then invokes any systems
marked with <code>restoreSys</code>. The key names of the JSON are expected to be the type names that get passed in to the
<code>restoreSys</code> systems.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">MyStrings</span> <span class="op">=</span> <span class="ide">seq</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">restoreValues</span>(<span class="ide">values</span>: <span class="ide">MyStrings</span>, <span class="ide">spawn</span>: <span class="ide">Spawn</span>[(<span class="ide">string</span>, )]) {<span class="op">.</span><span class="ide">restoreSys</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Called with decoded values with the `Restore` directive is used</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">value</span> <span class="kwd">in</span> <span class="ide">values</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">spawn</span><span class="op">.</span><span class="ide">with</span>(<span class="ide">value</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">doRestore</span>(<span class="ide">restore</span>: <span class="ide">Restore</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">restore</span>("""{ "MyStrings": [ "a", "b", "c" ] }""")</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">restoreValues</span>, <span class="op">~</span><span class="ide">doRestore</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>TickId</h4>
<p><code>TickId</code> gives you an auto-incrementing ID for each time a <code>tick</code> is executed. This is useful, for example, if you need
to track whether an operation has already been performed for the current tick.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">printTickId</span>(<span class="ide">tickId</span>: <span class="ide">TickId</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Current tick ID is &quot;</span>, <span class="ide">tickId</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">printTickId</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>EntityDebug</h4>
<p>When you find yourelf in a position that you need to see the exact state that an entity is in, you can get a string
dump of that entity by using the <code>EntityDebug</code> directive:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">A</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">debuggingSystem</span>(<span class="ide">query</span>: <span class="ide">FullQuery</span>[(<span class="ide">A</span>, )], <span class="ide">debug</span>: <span class="ide">EntityDebug</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">eid</span>, <span class="ide">_</span> <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="ide">debug</span>(<span class="ide">eid</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">debuggingSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h3>Extended System Usage</h3>
<p>Beyond the basics of declaring systems and using directives, there are a few more advanced system use cases
worth understanding.</p>
<h4>Dependencies between systems</h4>
<p>A system may require that another system always be paired with it. This can be accomplished by adding the  <code>depends</code>
pragma, which declares that relationship:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">runFirst</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## No-op system, but it gets run first</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">runSecond</span>() {<span class="op">.</span><span class="ide">depends</span>(<span class="ide">runFirst</span>)<span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## No-op system that gets run second</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">runSecond</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Instancing systems</h4>
<p>For systems that need to maintain state, it can be convenient to hold on to an instance between invocations. You&apos;ve
got two options:</p>
<p>  <strong>Option 1: Return a Proc</strong></p>
<p>If your system returns a <code>proc</code>, set the return type of your system to <code>SystemInstance</code>. Necsus will invoke your
parent <code>proc</code> during setup, then the returned <code>proc</code> will be invoked for every tick. The <code>proc</code> itself that gets
returned here cannot take any arguments. For example:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">someSystem</span>(<span class="ide">create</span>: <span class="ide">Spawn</span>[(<span class="ide">string</span>, )], <span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">string</span>,)]): <span class="ide">SystemInstance</span> <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">create</span><span class="op">.</span><span class="ide">with</span>(<span class="str">&quot;foo&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">return</span> <span class="kwd">proc</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">        <span class="kwd">for</span> (<span class="ide">str</span>,) <span class="kwd">in</span> <span class="ide">query</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="ide">str</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">someSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<p>Obviously, this makes it easier to capture the pragmas from your parent system as closure variables,
which can then be freely used.</p>
<p>  <strong>Option 2: Return an Object</strong></p>
<p>Your other option is to return an object from the parent <code>proc</code>. First, mark your parent <code>proc</code> with the <code>instanced</code>
pragma. The parent <code>proc</code> will get invoked once during the startup phase, then a <code>tick</code> proc will get invoked as part of
the main loop. This also allows you to create a <code>=destroy</code> proc that gets invoked during teardown:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">MySystem</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">string</span>,)]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">someSystem</span>(<span class="ide">create</span>: <span class="ide">Spawn</span>[(<span class="ide">string</span>, )], <span class="ide">query</span>: <span class="ide">Query</span>[(<span class="ide">string</span>,)]): <span class="ide">MySystem</span> {<span class="op">.</span><span class="ide">instanced</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">create</span><span class="op">.</span><span class="ide">with</span>(<span class="str">&quot;foo&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="ide">result</span><span class="op">.</span><span class="ide">query</span> <span class="op">=</span> <span class="ide">query</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">tick</span>(<span class="ide">system</span>: <span class="kwd">var</span> <span class="ide">MySystem</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> (<span class="ide">str</span>,) <span class="kwd">in</span> <span class="ide">system</span><span class="op">.</span><span class="ide">query</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="ide">str</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> `<span class="op">=</span><span class="ide">destroy</span>`(<span class="ide">system</span>: <span class="kwd">var</span> <span class="ide">MySystem</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Destroying system&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">someSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>Building Re-usable systems</h4>
<p>Reusing code is obviously a fundamental aspect of programming, and using generics is a fundamental aspect of
that in Nim. Necsus, however, can&apos;t resolve generic parameters by itself. It needs to know exactly what components
need to be passed to each system at compile time.</p>
<p>To work around this, you can assign systems to variables, then pass those variables into your app:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">SomeComponent</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">AnotherComponent</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">genericSpawner</span>[<span class="ide">T</span>](): <span class="ide">auto</span> <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">return</span> <span class="kwd">proc</span> (<span class="ide">create</span>: <span class="ide">Spawn</span>[(<span class="ide">T</span>, )]) <span class="op">=</span></div></div><div class="line"><div class="line-content">        <span class="ide">create</span><span class="op">.</span><span class="ide">with</span>(<span class="ide">T</span>())</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">spawnSomeComponent</span> <span class="op">=</span> <span class="ide">genericSpawner</span>[<span class="ide">SomeComponent</span>]()</div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">spawnAnotherComponent</span> <span class="op">=</span> <span class="ide">genericSpawner</span>[<span class="ide">AnotherComponent</span>]()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">spawnSomeComponent</span>, <span class="op">~</span><span class="ide">spawnAnotherComponent</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<p>It&apos;s worth mentioning that if you start usin type aliases, Nim&apos;s type system has a tendency to hide those
from the macro system -- they generally get resolved directly down to the type they are aliasing. To work around that,
you can add in explicit type declarations or use templates to define your systems.</p>
<h4>Game State Management</h4>
<p>Often times, games will have various states they can be in at a high level.  For example, your game may have states to
represent &quot;loading&quot;, &quot;playing&quot;, &quot;won&quot; or &quot;lost&quot;. For this, you can annotate a system with the <code>active</code> pragma so it
only executes when the game is in a specific state. <code>Shared</code> directives are then used for changing between states.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">GameState</span> <span class="op">=</span> <span class="kwd">enum</span> <span class="ide">Loading</span>, <span class="ide">Playing</span>, <span class="ide">Won</span>, <span class="ide">Lost</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">showWon</span>() {<span class="op">.</span><span class="ide">active</span>(<span class="ide">Won</span>)<span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Game won!&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">switchGameState</span>(<span class="ide">state</span>: <span class="ide">Shared</span>[<span class="ide">GameState</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## System that changes the game state to &quot;won&quot;</span></div></div><div class="line"><div class="line-content">    <span class="ide">state</span> :<span class="op">=</span> <span class="ide">Won</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">showWon</span>, <span class="op">~</span><span class="ide">switchGameState</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h3>App</h3>
<p>At an app level, there are a few more features worth discussing.</p>
<h4>App Arguments</h4>
<p>Any arguments passed in to your app will be available as <code>Shared</code> arguments to your systems:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">exampleSystem</span>(<span class="ide">input</span>: <span class="ide">Shared</span>[<span class="ide">string</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">input</span><span class="op">.</span><span class="ide">get</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>(<span class="ide">input</span>: <span class="ide">string</span>) {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">exampleSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>App Return Type</h4>
<p>If an app has a return value, it can be set in a system via a <code>Shared</code> argument:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">setAppReturn</span>(<span class="ide">appReturns</span>: <span class="ide">Shared</span>[<span class="ide">string</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">appReturns</span><span class="op">.</span><span class="ide">set</span>(<span class="str">&quot;Return value from app&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>(): <span class="ide">string</span> {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">setAppReturn</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h4>App Configuration</h4>
<p>Runtime configuration for the execution environment can be controlled through the <code>newNecsusConf()</code> call passed to the
<code>necsus</code> pragma. For example, the number of entities to reserve at startup can be configured as follows:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([], <span class="ide">newNecsusConf</span>(<span class="ide">entitySize</span> <span class="op">=</span> <span class="num">100_000</span>))<span class="op">.</span>}</div></div>  </code></pre>
<h4>Exiting</h4>
<p>With the default tick runner, exiting the app is done through a <code>Shared</code> directive:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">immediateExit</span>(<span class="ide">exit</span>: <span class="ide">Shared</span>[<span class="ide">NecsusRun</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Immediately exit the first time this system is called</span></div></div><div class="line"><div class="line-content">    <span class="ide">exit</span> :<span class="op">=</span> <span class="ide">ExitLoop</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">immediateExit</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">myApp</span>()</div></div>  </code></pre>
<h4>Custom runners</h4>
<p>The <code>runner</code> is the function that is used to execute the primary system loop. The default runner is fairly simple -- it
executes the loop systems repeatedly until the Shared <code>NecsusRun</code> variable flips over to <code>ExitLoop</code>. If you need more
control over your game loop, you can pass in your own.</p>
<p>The last argument for a custom runner must be the <code>tick</code> callback. Any other arguments will be processed in the same
manner as a system. This allows your runner to access entities, shared values or events.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">customRunner</span><span class="op">*</span>(<span class="ide">count</span>: <span class="ide">Shared</span>[<span class="ide">int</span>], <span class="ide">tick</span>: <span class="kwd">proc</span>(): <span class="ide">void</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com"># Loop until 1000 iterations completed</span></div></div><div class="line"><div class="line-content">    <span class="kwd">while</span> <span class="ide">count</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">&lt;</span> <span class="num">1_000</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">tick</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">incrementer</span>(<span class="ide">count</span>: <span class="ide">Shared</span>[<span class="ide">int</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">count</span><span class="op">.</span><span class="ide">set</span>(<span class="ide">count</span><span class="op">.</span><span class="ide">get</span>(<span class="num">0</span>) <span class="op">+</span> <span class="num">1</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>(<span class="ide">customRunner</span>, [<span class="op">~</span><span class="ide">incrementer</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">myApp</span>()</div></div>  </code></pre>
<h4>Don&apos;t call me, I&apos;ll call you</h4>
<p>There are situations where you may not want Necsus to be in charge of executing the loop. For example, if you are
integrating with an SDK that uses a callback mechanism for controlling the main game loop. For those situations,
you can manually initialize your app and invoke the <code>tick</code> function that Necsus generates:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myExampleSystem</span>() <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">myExampleSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># Initialize the app and execute the main loop 3 times</span></div></div><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">app</span> <span class="op">=</span> <span class="ide">initMyApp</span>()</div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">tick</span>()</div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">tick</span>()</div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">tick</span>()</div></div>  </code></pre>
<p>When using Necsus in this setup, you can send data and events in from the outside world either through the
initialization arguments, or using an inbox:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">MyData</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">value</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">MyEvent</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">value</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">printData</span>(<span class="ide">data</span>: <span class="ide">Shared</span>[<span class="ide">MyData</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">data</span><span class="op">.</span><span class="ide">get</span><span class="op">.</span><span class="ide">value</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">printEvent</span>(<span class="ide">events</span>: <span class="ide">Inbox</span>[<span class="ide">MyEvent</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">event</span> <span class="kwd">in</span> <span class="ide">events</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="ide">event</span><span class="op">.</span><span class="ide">value</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myApp</span>(<span class="ide">data</span>: <span class="ide">MyData</span>) {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">printData</span>, <span class="op">~</span><span class="ide">printEvent</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">app</span> <span class="op">=</span> <span class="ide">initMyApp</span>(<span class="ide">MyData</span>(<span class="ide">value</span>: <span class="str">&quot;some data&quot;</span>))</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">sendMyEvent</span>(<span class="ide">MyEvent</span>(<span class="ide">value</span>: <span class="str">&quot;some event&quot;</span>))</div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">sendMyEvent</span>(<span class="ide">MyEvent</span>(<span class="ide">value</span>: <span class="str">&quot;another event&quot;</span>))</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">app</span><span class="op">.</span><span class="ide">tick</span>()</div></div>  </code></pre>
<h2>Patterns</h2>
<p>There are a few useful design patterns that are useful when using Necsus</p>
<h3>Encapsulation using Bundles</h3>
<p>Bundles provide a way to put all your entity state logic in one place, then call it from other places. For example,
you might have a state machien for an enemy that can change in various ways. You can put that logic in a single
file:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span>, <span class="ide">options</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">EnemyState</span> <span class="op">=</span> <span class="kwd">enum</span> <span class="ide">Alive</span>, <span class="ide">Atacking</span>, <span class="ide">KnockedBack</span>, <span class="ide">Dead</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">EnemyData</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">state</span>: <span class="ide">EnemyState</span></div></div><div class="line"><div class="line-content">        <span class="ide">hitPoints</span>: <span class="ide">int</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">EnemyControl</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">createEnemy</span>: <span class="ide">Spawn</span>[(<span class="ide">EnemyData</span>, )]</div></div><div class="line"><div class="line-content">        <span class="ide">findEnemy</span>: <span class="ide">Lookup</span>[(<span class="kwd">ptr</span> <span class="ide">EnemyData</span>, )]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">createEnemy</span><span class="op">*</span>(<span class="ide">control</span>: <span class="ide">Bundle</span>[<span class="ide">EnemyControl</span>], <span class="ide">hitPoints</span>: <span class="ide">int</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">control</span><span class="op">.</span><span class="ide">createEnemy</span><span class="op">.</span><span class="ide">with</span>(<span class="ide">EnemyData</span>(<span class="ide">state</span>: <span class="ide">Alive</span>, <span class="ide">hitPoints</span>: <span class="ide">hitPoints</span>))</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">damage</span><span class="op">*</span>(<span class="ide">control</span>: <span class="ide">Bundle</span>[<span class="ide">EnemyControl</span>], <span class="ide">enemy</span>: <span class="ide">EntityId</span>, <span class="ide">damage</span>: <span class="ide">int</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">control</span><span class="op">.</span><span class="ide">findEnemy</span>(<span class="ide">enemy</span>)<span class="op">.</span><span class="ide">map</span> <span class="kwd">do</span> (<span class="ide">data</span>: <span class="ide">auto</span>) <span class="op">-&gt;</span> <span class="ide">void</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">data</span>[<span class="num">0</span>]<span class="op">.</span><span class="ide">hitPoints</span> <span class="op">-=</span> <span class="ide">damage</span></div></div><div class="line"><div class="line-content">        <span class="kwd">if</span> <span class="ide">data</span>[<span class="num">0</span>]<span class="op">.</span><span class="ide">hitPoints</span> <span class="op">&lt;=</span> <span class="num">0</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">data</span>[<span class="num">0</span>]<span class="op">.</span><span class="ide">state</span> <span class="op">=</span> <span class="ide">Dead</span></div></div><div class="line"><div class="line-content">        <span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">data</span>[<span class="num">0</span>]<span class="op">.</span><span class="ide">state</span> <span class="op">=</span> <span class="ide">KnockedBack</span></div></div>  </code></pre>
<h3>Listening to state changes</h3>
<p>When you have an action that needs to be executed once when a state changes, you can encapsulate your state changes
into a <code>Bundle</code>, then publish an event into an <code>Outbox</code>. For example, imagine a project layed out in a few files
like this:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"><span class="com">## gameState.nim</span></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">GameState</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">enum</span> <span class="ide">Loading</span>, <span class="ide">Playing</span>, <span class="ide">Won</span>, <span class="ide">Lost</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">    <span class="ide">StateManager</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">        <span class="ide">state</span>: <span class="ide">Shared</span>[<span class="ide">GameState</span>]</div></div><div class="line"><div class="line-content">        <span class="ide">stateChange</span>: <span class="ide">Outbox</span>[<span class="ide">GameState</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">change</span><span class="op">*</span>(<span class="ide">manager</span>: <span class="ide">Bundle</span>[<span class="ide">StateManager</span>], <span class="ide">newState</span>: <span class="ide">GameState</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="com">## Central entry point when then game state needs to be changed</span></div></div><div class="line"><div class="line-content">    <span class="ide">manager</span><span class="op">.</span><span class="ide">state</span> :<span class="op">=</span> <span class="ide">newState</span></div></div><div class="line"><div class="line-content">    <span class="ide">manager</span><span class="op">.</span><span class="ide">stateChange</span>(<span class="ide">newState</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"><span class="com">## customSystem.nim</span></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">customSystem</span><span class="op">*</span>(<span class="ide">stateChanges</span>: <span class="ide">Inbox</span>[<span class="ide">GameState</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">newState</span> <span class="kwd">in</span> <span class="ide">stateChanges</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;State changed to &quot;</span>, <span class="ide">newState</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"><span class="com">## changeStateSystem.nim</span></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">changeStateSystem</span>(<span class="ide">manager</span>: <span class="ide">Bundle</span>[<span class="ide">StateManager</span>], <span class="ide">winConditionMet</span>: <span class="ide">Shared</span>[<span class="ide">bool</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">if</span> <span class="ide">winConditionMet</span><span class="op">.</span><span class="ide">get</span>(<span class="ide">false</span>):</div></div><div class="line"><div class="line-content">        <span class="ide">manager</span><span class="op">.</span><span class="ide">change</span>(<span class="ide">Won</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"><span class="com">## app.nim</span></div></div><div class="line"><div class="line-content"><span class="com">##</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">app</span>() {<span class="op">.</span><span class="ide">necsus</span>([<span class="op">~</span><span class="ide">customSystem</span>, <span class="op">~</span><span class="ide">changeStateSystem</span>], <span class="ide">newNecsusConf</span>())<span class="op">.</span>}</div></div>  </code></pre>
<h2>Testing Systems</h2>
<p>To test a system, you can use the <code>runSystemOnce</code> macro. It accepts a single lambda as an
argument, and will invoke that lambda as if it were a system. You can then pass those
directives to other systems, or interact with them directly.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">unittest</span>, <span class="ide">necsus</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">myExampleSystem</span>(<span class="ide">str</span>: <span class="ide">Shared</span>[<span class="ide">string</span>]) <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">str</span> :<span class="op">=</span> <span class="str">&quot;foo&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">runSystemOnce</span> <span class="kwd">do</span> (<span class="ide">str</span>: <span class="ide">Shared</span>[<span class="ide">string</span>]) <span class="op">-&gt;</span> <span class="ide">void</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">test</span> <span class="str">&quot;Execute myExampleSystem&quot;</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">myExampleSystem</span>(<span class="ide">str</span>)</div></div><div class="line"><div class="line-content">        <span class="ide">check</span>(<span class="ide">str</span><span class="op">.</span><span class="ide">get</span> <span class="op">==</span> <span class="str">&quot;foo&quot;</span>)</div></div>  </code></pre>
<h2>Profiling systems</h2>
<p>To get a quick and dirty idea of how your app is performing, you can compile with the <code>-d:profile</code> flag set. This
will cause Necsus to add profiling code that will report how long each system is taking. It takes measurements,
then outputs the timings to the console.</p>
<h2>Debugging Generated Code</h2>
<p>If Necsus isn&apos;t behaving as you would expect, the best tool you&apos;ve got in your toolbox is the ability to dump the code
that it generates. This allows you to walk through what is happening, or even substitute the generated code into your
app and execute it. This can be enabled by compiling with the <code>-d:dump</code> flag set.</p>
<h1>License</h1>
<p>Code released under the <a href="https://github.com/NecsusECS/Necsus/blob/main/LICENSE">Apache 2.0 license</a></p>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/NecsusECS/Necsus">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2024-03-19T01:07:59Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
