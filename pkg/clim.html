<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">clim</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">cli</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">macros</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">Yet another CLI option parser generator for Nim.</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install clim" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Clim</h1>
<p>Yet another CLI option parser generator for Nim.</p>
<p>Clim has a very simple usage, a feature set enough for (very?) simple CLI tools, and gracefully handles some problems for you.</p>
<h2>Getting started</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">os</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">path</span>, <span class="ide">string</span>, [<span class="str">&quot;--path&quot;</span>, <span class="str">&quot;-p&quot;</span>], <span class="str">&quot;.&quot;</span>) <span class="com"># Default value is &quot;.&quot;</span></div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">help</span>, <span class="ide">bool</span>, [<span class="str">&quot;--help&quot;</span>, <span class="str">&quot;-h&quot;</span>])</div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">name</span>, <span class="ide">string</span>, [<span class="str">&quot;--name&quot;</span>])</div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">level</span>, <span class="ide">int</span>, [<span class="str">&quot;--level&quot;</span>])</div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">definitions</span>, <span class="ide">seq</span>[<span class="ide">string</span>], [<span class="str">&quot;--define&quot;</span>, <span class="str">&quot;-d&quot;</span>])</div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">config</span>, <span class="ide">JsonNode</span>, [<span class="str">&quot;--config&quot;</span>], <span class="op">%*</span>{}) <span class="com"># Must provide default for JsonNode</span></div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">output</span>, <span class="ide">Option</span>[<span class="ide">string</span>], [<span class="str">&quot;--output&quot;</span>, <span class="str">&quot;-o&quot;</span>])</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">getOpt</span>(<span class="ide">commandLineParams</span>())</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;{path=}, {help=}, {name=}, {level=}, {definitions=}, {config=}, {output=}&quot;</span></div></div>  </code></pre>
<p>Expands roughly to:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">static</span> :</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">string</span> <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">string</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">bool</span> <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">bool</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">string</span> <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">string</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">int</span> <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">int</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">seq</span>[<span class="ide">string</span>] <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">seq</span>[<span class="ide">string</span>])</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">JsonNode</span> <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">JsonNode</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">when</span> <span class="ide">Option</span>[<span class="ide">string</span>] <span class="kwd">isnot</span> <span class="ide">CommandParamTypes</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">error</span>(<span class="str">&quot;Unsupported option type: &quot;</span> <span class="op">&amp;</span> <span class="op">$</span><span class="ide">Option</span>[<span class="ide">string</span>])</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">identNamesThatIsSet</span>: <span class="ide">seq</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content"><span class="kwd">var</span></div></div><div class="line"><div class="line-content">  <span class="ide">path</span>: <span class="ide">string</span> <span class="op">=</span> <span class="str">&quot;.&quot;</span></div></div><div class="line"><div class="line-content">  <span class="ide">help</span>: <span class="ide">bool</span></div></div><div class="line"><div class="line-content">  <span class="ide">name</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">  <span class="ide">level</span>: <span class="ide">int</span></div></div><div class="line"><div class="line-content">  <span class="ide">definitions</span>: <span class="ide">seq</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content">  <span class="ide">config</span>: <span class="ide">JsonNode</span> <span class="op">=</span> <span class="ide">newJObject</span>()</div></div><div class="line"><div class="line-content">  <span class="ide">output</span>: <span class="ide">Option</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">src</span>: <span class="ide">seq</span>[<span class="ide">string</span>] <span class="op">=</span> <span class="ide">commandLineParams</span>()</div></div><div class="line"><div class="line-content"><span class="kwd">for</span> <span class="ide">part</span> <span class="kwd">in</span> <span class="ide">src</span>:</div></div><div class="line"><div class="line-content">  <span class="kwd">let</span> (<span class="ide">prefix</span>, <span class="ide">name</span>, <span class="ide">value</span>) <span class="op">=</span> <span class="ide">getParam</span>(<span class="ide">part</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">case</span> <span class="ide">prefix</span></div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--path&quot;</span>, <span class="str">&quot;-p&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">path</span> <span class="op">=</span> <span class="ide">value</span></div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;path&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;path&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;string&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--help&quot;</span>, <span class="str">&quot;-h&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">help</span> <span class="op">=</span> <span class="ide">parseBool</span>(<span class="ide">value</span>)</div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;help&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;help&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;bool&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--name&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">name</span> <span class="op">=</span> <span class="ide">value</span></div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;name&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;name&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;string&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--level&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">level</span> <span class="op">=</span> <span class="ide">int</span>(<span class="ide">parseInt</span>(<span class="ide">value</span>))</div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;level&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;level&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;int&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--define&quot;</span>, <span class="str">&quot;-d&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">definitions</span><span class="op">.</span><span class="ide">add</span>(<span class="ide">value</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;definitions&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;string&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--config&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">config</span> <span class="op">=</span> <span class="ide">parseJson</span>(<span class="ide">value</span>)</div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;config&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;config&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;JsonNode&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">of</span> <span class="str">&quot;--output&quot;</span>, <span class="str">&quot;-o&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">try</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">output</span> <span class="op">=</span> <span class="ide">some</span>(<span class="ide">value</span>)</div></div><div class="line"><div class="line-content">      <span class="ide">add</span>(<span class="ide">identNamesThatIsSet</span>, <span class="str">&quot;output&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">except</span> <span class="ide">ValueError</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="str">&quot;output&quot;</span>, <span class="str">&quot;</span>\"<span class="str"> is set to </span>\"<span class="str">&quot;</span>, <span class="ide">value</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> but can not be parsed to </span>\"<span class="str">&quot;</span>, <span class="str">&quot;string&quot;</span>, <span class="str">&quot;</span>\"<span class="str">.&quot;</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="ide">name</span>, <span class="str">&quot;</span>\"<span class="str"> is not defined, </span>\"<span class="str">&quot;</span>, <span class="ide">part</span>,</div></div><div class="line"><div class="line-content">          <span class="str">&quot;</span>\"<span class="str"> is ignored.&quot;</span>]</div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">deduplicated</span> <span class="op">=</span> <span class="ide">deduplicate</span>(<span class="ide">identNamesThatIsSet</span>, <span class="ide">false</span>)</div></div><div class="line"><div class="line-content"><span class="kwd">if</span> <span class="ide">len</span>(<span class="ide">identNamesThatIsSet</span>) <span class="op">!=</span> <span class="ide">len</span>(<span class="ide">deduplicated</span>):</div></div><div class="line"><div class="line-content">  <span class="kwd">for</span> <span class="ide">ident</span> <span class="kwd">in</span> <span class="ide">deduplicated</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">identNamesThatIsSet</span><span class="op">.</span><span class="ide">del</span> <span class="ide">binarySearch</span>(<span class="ide">identNamesThatIsSet</span>, <span class="ide">ident</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">if</span> <span class="ide">ident</span> <span class="kwd">in</span> <span class="ide">identNamesThatIsSet</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">echo</span> [<span class="str">&quot;Warning: Option </span>\"<span class="str">&quot;</span>, <span class="ide">ident</span>,</div></div><div class="line"><div class="line-content">            <span class="str">&quot;</span>\"<span class="str"> is set for multiple times. Only the last one will be used.&quot;</span>]</div></div>  </code></pre>
<p>Yes! As you can see, the generated code is <em>very</em> clear and simple. And it handles parse error, duplicated options and undefined options for you.</p>
<p><code>opt</code> registers a variable that is bound to some command parameters. <code>getOpt</code> parses the given <code>seq[string]</code> and assigns option values to the varaibles. So, in one program you can only have one set of parameters. You <strong>can&apos;t</strong> do so:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">block</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">foo</span>, <span class="ide">string</span>, [<span class="str">&quot;--foo&quot;</span>])</div></div><div class="line"><div class="line-content">  <span class="ide">getOpt</span>(<span class="op">@</span>[<span class="str">&quot;--foo:foo&quot;</span>])</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">block</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">foo</span>, <span class="ide">int</span>, [<span class="str">&quot;--foo&quot;</span>])</div></div><div class="line"><div class="line-content">  <span class="ide">getOpt</span>(<span class="op">@</span>[<span class="str">&quot;--foo:1&quot;</span>])</div></div>  </code></pre>
<p>Although Clim supports very simple CLI features, there is support for containers of options: <code>seq[ParseAble]</code>. This allows you to implement things like Nim compiler&apos;s <code>--define</code> option. In the example above, <code>./test -d:foo -d:bar</code> will let <code>definitions</code> to be <code>@[&quot;foo&quot;, &quot;bar&quot;]</code>.</p>
<h2>Hooks</h2>
<p>You can define template/macro/procedure <code>undefinedOptionHook</code>, <code>parseErrorHook</code>, <code>duplicateOptionHook</code> to customize how the generated code handles parse error, duplicated options and undefined options. If you want to make a CLI tool in another language than English, it can be helpful to rewrite such warning texts.</p>
<p>Example:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">os</span></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">macros</span></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">strformat</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">clim</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">commandLineParams</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">undefinedOptionHook</span>(<span class="ide">name</span>, <span class="ide">part</span>: <span class="ide">string</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">  <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">template</span> <span class="ide">parseErrorHook</span>(<span class="ide">name</span>, <span class="ide">value</span>: <span class="ide">string</span>, <span class="ide">typ</span>: <span class="ide">typedesc</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">  <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">macro</span> <span class="ide">duplicateOptionHook</span>(<span class="ide">name</span>: <span class="ide">string</span>) <span class="op">=</span></div></div><div class="line"><div class="line-content">  <span class="kwd">discard</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">expandMacros</span>:</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">path</span>, <span class="ide">string</span>, [<span class="str">&quot;--path&quot;</span>, <span class="str">&quot;-p&quot;</span>], <span class="str">&quot;.&quot;</span>)</div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">help</span>, <span class="ide">bool</span>, [<span class="str">&quot;--help&quot;</span>, <span class="str">&quot;-h&quot;</span>])</div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">name</span>, <span class="ide">string</span>, [<span class="str">&quot;--name&quot;</span>])</div></div><div class="line"><div class="line-content">  <span class="ide">opt</span>(<span class="ide">level</span>, <span class="ide">int</span>, [<span class="str">&quot;--level&quot;</span>])</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">getOpt</span>(<span class="ide">commandLineParams</span>())</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;{path=}, {help=}, {name=}, {level=}&quot;</span></div></div>  </code></pre>
<p><strong>Note:</strong> Due to implemention of strformat, you can&apos;t use strformat to format template parameters here.</p>
<h2>Types for options</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">ParseAble</span> <span class="op">=</span> <span class="ide">string</span> <span class="op">|</span> <span class="ide">cstring</span> <span class="op">|</span> <span class="ide">bool</span> <span class="op">|</span> <span class="ide">SomeInteger</span> <span class="op">|</span> <span class="ide">SomeFloat</span> <span class="op">|</span> <span class="kwd">enum</span> <span class="op">|</span> <span class="ide">JsonNode</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">CommandParamTypes</span> <span class="op">=</span> <span class="ide">ParseAble</span> <span class="op">|</span> <span class="ide">seq</span>[<span class="ide">ParseAble</span>] <span class="op">|</span> <span class="ide">Option</span>[<span class="ide">ParseAble</span>]</div></div>  </code></pre>
<p>Clim provides a rather small set of types that can be parsed from CLI options, because it is reasonable and natural to write code yourself to parse special types in your own way. This also works for files or paths.</p>
<p>For example, you can do:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">paths</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">opt</span>(<span class="ide">pathString</span>, <span class="ide">string</span>, [<span class="str">&quot;--path&quot;</span>, <span class="str">&quot;-p&quot;</span>], <span class="str">&quot;.&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">getOpt</span>(<span class="ide">commandLineParams</span>())</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">path</span> <span class="op">=</span> <span class="ide">Path</span>(<span class="ide">pathString</span>)</div></div>  </code></pre>
<p>Clim supports JSON options, but it is not very sweet to write them in commands, you need to write like <code>--config:&quot;{\&quot;key\&quot;: \&quot;value\&quot;}&quot;</code> or <code>--config:&quot;{&quot;&quot;key&quot;&quot;: &quot;&quot;value&quot;&quot;}&quot;</code> to escape quotation marks.</p>
<p>Clim supports option types: <code>Option[ParseAble]</code>.</p>
<h2>Internal</h2>
<p>Clim uses procedure <code>getparam</code> to parse parameters. It works very naturally, returns <code>(string, string, string)</code>. <code>--name:value</code> will return <code>(&quot;--name&quot;, &quot;name&quot;, &quot;value&quot;)</code>. <code>--name</code> will return <code>(&quot;--name&quot;, &quot;name&quot;, &quot;true&quot;)</code>.</p>
<p>Clim generates human readable code with very simple logic. If Clim can&apos;t fulfill your needs but you can implement them by editing clim itself (e.g. Customize parsing), and you don&apos;t want to learn another option parser library, you can use <code>expandMacros</code> to see the generated code and start from it to write your own code. With good helper functions, you mat not need a option parser library.</p>
<h2>Comparison</h2>
<table>
<thead>
<tr>
<th />
<th>Clim</th>
<th>Cliche</th>
<th>Cligen</th>
<th>Docopt</th>
</tr>
</thead>
<tbody>
<tr>
<td>Directly assign to variables</td>
<td>T</td>
<td>T</td>
<td>F</td>
<td>F</td>
</tr>
<tr>
<td>Generated Code Simplicity</td>
<td>++</td>
<td>+</td>
<td>F</td>
<td>F</td>
</tr>
<tr>
<td>Flexibility</td>
<td>+</td>
<td>-</td>
<td>+</td>
<td>++</td>
</tr>
<tr>
<td>Custom Param name<a href="For">^1</a></td>
<td>T</td>
<td>F</td>
<td>/</td>
<td>F</td>
</tr>
<tr>
<td>User defined hook</td>
<td>T</td>
<td>F</td>
<td>F</td>
<td>T</td>
</tr>
<tr>
<td>Generated CLI Help</td>
<td>F</td>
<td>T</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>Advanced features[^2]</td>
<td>F</td>
<td>F</td>
<td>T</td>
<td>T</td>
</tr></tbody></table>
<p>Clim is inspired by <a href="https://github.com/juancarlospaco/cliche">cliche</a>, and created in order to remove its drawbacks, but keep its easy to use.</p>
<p>With cliche, you are not allowed to get from mutiple param names for one option, or allow <code>--name:value</code> and <code>--name=value</code> at the same time. You are also not allowed to get from a param name that is different from the variable name.</p>
<p>Cliche uses <code>--name=value</code> for default, which is different from what is used in Nim official documents! (Cliche doesn&apos;t support multiple delimiters. However, for the time being custom delimiters are not supported by Clim, only the default value <code>{&apos;:&apos;, &apos;=&apos;}</code>.)</p>
<p>Cliche uses no procedures to help its work, it generates what is used, and even compares strings in a low-level way:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">std</span><span class="op">/</span>[<span class="ide">macros</span>, <span class="ide">os</span>, <span class="ide">strutils</span>], <span class="ide">cliche</span></div></div><div class="line"><div class="line-content"><span class="ide">expandMacros</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">commandLineParams</span>()<span class="op">.</span><span class="ide">getOpt</span> (<span class="ide">foo</span>: 'x')</div></div><div class="line"><div class="line-content"><span class="ide">doAssert</span> <span class="ide">foo</span> <span class="op">==</span> 'z'</div></div>  </code></pre>
<p>Expands to:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">var</span> <span class="ide">foo</span> <span class="op">=</span> 'x'</div></div><div class="line"><div class="line-content"><span class="kwd">for</span> <span class="ide">v</span> <span class="kwd">in</span> <span class="ide">commandLineParams</span>():</div></div><div class="line"><div class="line-content">  <span class="kwd">var</span> <span class="ide">sepPos</span>: <span class="ide">int</span></div></div><div class="line"><div class="line-content">  <span class="kwd">var</span> <span class="ide">k</span>, <span class="ide">b</span>: <span class="ide">string</span></div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="kwd">not</span>(<span class="ide">v</span><span class="op">.</span><span class="ide">len</span> <span class="op">&gt;</span> <span class="num">3</span>) <span class="kwd">or</span> <span class="ide">v</span>[<span class="num">0</span>] <span class="op">!=</span> '-'  <span class="kwd">or</span> <span class="ide">v</span>[<span class="num">1</span>] <span class="op">!=</span> '-': <span class="kwd">continue</span></div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="ide">v</span><span class="op">.</span><span class="ide">len</span> <span class="op">==</span> <span class="num">6</span> <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">0</span>] <span class="op">==</span> 'h' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">1</span>] <span class="op">==</span> 'e' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">2</span>] <span class="op">==</span> 'l' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">3</span>] <span class="op">==</span> 'p':</div></div><div class="line"><div class="line-content">    <span class="ide">quit</span>(<span class="ide">apiExplained</span>, <span class="num">0</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="ide">len</span>(<span class="ide">v</span>) <span class="op">==</span> <span class="num">8</span> <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">2</span>] <span class="op">==</span> 'x' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">3</span>] <span class="op">==</span> 'd' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">4</span>] <span class="op">==</span> 'e' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">5</span>] <span class="op">==</span> 'b' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">6</span>] <span class="op">==</span> 'u' <span class="kwd">and</span> <span class="ide">v</span>[<span class="num">7</span>] <span class="op">==</span> 'g':</div></div><div class="line"><div class="line-content">    <span class="ide">quit</span>(<span class="ide">debuginfos</span>, <span class="num">0</span>)</div></div><div class="line"><div class="line-content">  <span class="kwd">for</span> <span class="ide">x</span> <span class="kwd">in</span> <span class="num">2</span> <span class="op">..</span> <span class="ide">v</span><span class="op">.</span><span class="ide">len</span>:</div></div><div class="line"><div class="line-content">    <span class="kwd">if</span> <span class="ide">v</span>[<span class="ide">x</span>] <span class="op">==</span> '=':</div></div><div class="line"><div class="line-content">      <span class="ide">sepPos</span> <span class="op">=</span> <span class="ide">x</span></div></div><div class="line"><div class="line-content">      <span class="kwd">break</span></div></div><div class="line"><div class="line-content">  <span class="ide">k</span> <span class="op">=</span> <span class="ide">v</span>[<span class="num">2</span> <span class="op">..&lt;</span> <span class="ide">sepPos</span>]</div></div><div class="line"><div class="line-content">  <span class="ide">b</span> <span class="op">=</span> <span class="ide">v</span>[<span class="ide">sepPos</span> <span class="op">..</span> <span class="op">^</span><span class="num">1</span>]</div></div><div class="line"><div class="line-content">  <span class="kwd">if</span> <span class="ide">k</span><span class="op">.</span><span class="ide">len</span> <span class="op">==</span> <span class="num">3</span> <span class="kwd">and</span> <span class="ide">k</span>[<span class="num">0</span>] <span class="op">==</span> 'f' <span class="kwd">and</span> <span class="ide">k</span>[<span class="num">1</span>] <span class="op">==</span> 'o' <span class="kwd">and</span> <span class="ide">k</span>[<span class="num">2</span>] <span class="op">==</span> 'o':</div></div><div class="line"><div class="line-content">    <span class="ide">foo</span> <span class="op">=</span> <span class="ide">char</span>(<span class="ide">b</span>[<span class="num">0</span>])</div></div>  </code></pre>
<p>(From cliche repo)</p>
<p>By contrast, Clim generates graceful, human-readable code, and handles edge cases for you.</p>
<p>example, when you want <code>-O</code> to equal to <code>--optimize</code>, or <code>-x</code> to equal to <code>--checks</code>.
[^2]: Arguments, subcommand, etc.</p>
<h2>Todo</h2>
<ul>
<li>[ ] Now, flags are implemented by parsing <code>--name</code> as <code>--name:true</code>. Should warn when <code>name</code> is not <code>bool</code>.</li>
</ul>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/xjzh123/clim">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2024-02-24T01:05:05Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
