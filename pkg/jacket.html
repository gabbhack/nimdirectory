<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">jacket</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">audio</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">midi</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">jack</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">library</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">wrapper</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">A Nim wrapper for the JACK client-side C API aka libjack</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install jacket" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>jacket</h1>
<p>A <a href="https://nim-lang.org/">Nim</a> wrapper for the <a href="https://jackaudio.org/">JACK</a> client side <a href="https://jackaudio.org/api/">C API</a> aka <em>libjack</em>.</p>
<h2>Project status</h2>
<p>This software is in <em>beta status</em>.</p>
<p>The majority of JACK client APIs have been wrapped and are functional (see
<a href="./examples">examples</a>), but some APIs (e.g. threading) still need wrapping. Others, like
the server control or the deprecated session API, will probably not be covered
by these bindings. While this project is in beta stage, symbol names may still
be changed and things moved around before the first stable release.</p>
<h2>Installation</h2>
<ul>
<li>
<p>Clone this repository.</p>
</li>
<li>
<p>Change into the <code>jacket</code> directory.</p>
</li>
<li>
<p>Run <a href="https://github.com/nim-lang/nimble#nimble-usage">  <code>nimble install</code></a> (or <code>nimble develop</code>).</p>
</li>
<li>
<p>Run the <a href="./examples">examples</a> with <code>nim compile --run examples/&lt;example&gt;.nim</code>.</p>
<p>(Some examples need <code>--threads:on</code> with Nim &lt; 2.0).</p>
</li>
</ul>
<h2>Usage</h2>
<p>Here is a very minimal JACK client application, which just passes audio through
from its single input port to its output port.</p>
<p>Any error checking and handling has been omitted for brevity&apos;s sake. See the
files in the <a href="./examples">examples</a> directory for more robust example code.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">std</span><span class="op">/</span><span class="ide">os</span></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">system</span><span class="op">/</span><span class="ide">ansi_c</span></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">jacket</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">var</span></div></div><div class="line"><div class="line-content">    <span class="ide">jackClient</span>: <span class="ide">ClientP</span></div></div><div class="line"><div class="line-content">    <span class="ide">status</span>: <span class="ide">cint</span></div></div><div class="line"><div class="line-content">    <span class="ide">exitSignalled</span>: <span class="ide">bool</span> <span class="op">=</span> <span class="ide">false</span></div></div><div class="line"><div class="line-content">    <span class="ide">inpPort</span>, <span class="ide">outPort</span>: <span class="ide">PortP</span></div></div><div class="line"><div class="line-content"><span class="kwd">type</span> <span class="ide">JackBufferP</span> <span class="op">=</span> <span class="kwd">ptr</span> <span class="ide">UncheckedArray</span>[<span class="ide">DefaultAudioSample</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">signalCb</span>(<span class="ide">sig</span>: <span class="ide">cint</span>) {<span class="op">.</span><span class="ide">noconv</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">exitSignalled</span> <span class="op">=</span> <span class="ide">true</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">shutdownCb</span>(<span class="ide">arg</span>: <span class="ide">pointer</span> <span class="op">=</span> <span class="kwd">nil</span>) {<span class="op">.</span><span class="ide">cdecl</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="ide">exitSignalled</span> <span class="op">=</span> <span class="ide">true</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">processCb</span>(<span class="ide">nFrames</span>: <span class="ide">NFrames</span>, <span class="ide">arg</span>: <span class="ide">pointer</span>): <span class="ide">cint</span> {<span class="op">.</span><span class="ide">cdecl</span><span class="op">.</span>} <span class="op">=</span></div></div><div class="line"><div class="line-content">    <span class="kwd">var</span> <span class="ide">inpbuf</span> <span class="op">=</span> <span class="kwd">cast</span>[<span class="ide">JackBufferP</span>](<span class="ide">portGetBuffer</span>(<span class="ide">inpPort</span>, <span class="ide">nFrames</span>))</div></div><div class="line"><div class="line-content">    <span class="kwd">var</span> <span class="ide">outbuf</span> <span class="op">=</span> <span class="kwd">cast</span>[<span class="ide">JackBufferP</span>](<span class="ide">portGetBuffer</span>(<span class="ide">outPort</span>, <span class="ide">nFrames</span>))</div></div><div class="line"><div class="line-content">    <span class="com"># copy samples from input to output buffer</span></div></div><div class="line"><div class="line-content">    <span class="kwd">for</span> <span class="ide">i</span> <span class="kwd">in</span> <span class="num">0</span> <span class="op">..&lt;</span> <span class="ide">nFrames</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">outbuf</span>[<span class="ide">i</span>] <span class="op">=</span> <span class="ide">inpbuf</span>[<span class="ide">i</span>]</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># Create JACK Client ptr</span></div></div><div class="line"><div class="line-content"><span class="ide">jackClient</span> <span class="op">=</span> <span class="ide">clientOpen</span>(<span class="str">&quot;passthru&quot;</span>, <span class="ide">NullOption</span><span class="op">.</span><span class="ide">ord</span>, <span class="ide">status</span><span class="op">.</span><span class="kwd">addr</span>)</div></div><div class="line"><div class="line-content"><span class="com"># Register audio input and output ports</span></div></div><div class="line"><div class="line-content"><span class="ide">inpPort</span> <span class="op">=</span> <span class="ide">jackClient</span><span class="op">.</span><span class="ide">portRegister</span>(<span class="str">&quot;in_1&quot;</span>, <span class="ide">JACK_DEFAULT_AUDIO_TYPE</span>, <span class="ide">PortIsInput</span><span class="op">.</span><span class="ide">ord</span>, <span class="num">0</span>)</div></div><div class="line"><div class="line-content"><span class="ide">outPort</span> <span class="op">=</span> <span class="ide">jackClient</span><span class="op">.</span><span class="ide">portRegister</span>(<span class="str">&quot;out_1&quot;</span>, <span class="ide">JACK_DEFAULT_AUDIO_TYPE</span>, <span class="ide">PortIsOutput</span><span class="op">.</span><span class="ide">ord</span>, <span class="num">0</span>)</div></div><div class="line"><div class="line-content"><span class="com"># Set JACK callbacks</span></div></div><div class="line"><div class="line-content"><span class="ide">jackClient</span><span class="op">.</span><span class="ide">onShutdown</span>(<span class="ide">shutdownCb</span>)</div></div><div class="line"><div class="line-content"><span class="kwd">discard</span> <span class="ide">jackClient</span><span class="op">.</span><span class="ide">setProcessCallback</span>(<span class="ide">processCb</span>, <span class="kwd">nil</span>)</div></div><div class="line"><div class="line-content"><span class="com"># Handle POSIX signals</span></div></div><div class="line"><div class="line-content"><span class="ide">c_signal</span>(<span class="ide">SIGINT</span>, <span class="ide">signalCb</span>)</div></div><div class="line"><div class="line-content"><span class="ide">c_signal</span>(<span class="ide">SIGTERM</span>, <span class="ide">signalCb</span>)</div></div><div class="line"><div class="line-content"><span class="com"># Activate JACK client ...</span></div></div><div class="line"><div class="line-content"><span class="kwd">discard</span> <span class="ide">jackClient</span><span class="op">.</span><span class="ide">activate</span>()</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">while</span> <span class="kwd">not</span> <span class="ide">exitSignalled</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">sleep</span>(<span class="num">50</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">discard</span> <span class="ide">jackClient</span><span class="op">.</span><span class="ide">clientClose</span>()</div></div>  </code></pre>
<h2>License</h2>
<p>This software is released under the <em>MIT License</em>. See the file
<a href="./LICENSE.md">LICENSE.md</a> for more information.</p>
<p>Please note that the JACK client library (libjack), which this project wraps,
is licensed under the <a href="https://spdx.org/licenses/LGPL-2.1-or-later.html">LGPL-2.1</a>. This wrapper does not statically or
dynamically link to libjack, but only loads it via the dynamic linker at
run-time.</p>
<p>Software using this wrapper is, in the opinion of its author, not considered a
derivative work of libjack and not required to be released under the LGPL, but
no guarantees are made in this regard and users are advised to employ
professional legal counsel when in doubt.</p>
<h2>Author</h2>
<p><em>jacket</em> is written by <a href="mailto:info@chrisarndt.de">Christopher Arndt</a>.</p>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/SpotlightKid/jacket">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2024-02-19T01:08:39Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
