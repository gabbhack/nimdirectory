<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">nordnet</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">nordnet</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">stocks</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">scrape</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">Scraping API for www.nordnet.dk ready to integrate with Home Assistant (Hassio)</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install nordnet" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>nim_nordnet_api</h1>
<p>Okay, not really an API. Actually not even close to an API. Nordnet wasn&apos;t gonna
play with me, so this ended up as an oldschool scraper.</p>
<p>The originale purpose to develop a sensor for <a href="https://www.home-assistant.io/">https://www.home-assistant.io/</a></p>
<h2>What is Nordnet</h2>
<p>Nordnet is an online stockbroker with customers in Denmark, Norway, Sweden, and Finland. It serves stock from around the world. Checkout their website www.nordnet.dk and start trading with a low fee and an excellent UI.</p>
<h2>What is this?</h2>
<p>Well, this is a simple scraper. You provide the URL to the stock, and this little Nim program provide you with the latest data on the stock.</p>
<p>You can use this library in 3 ways:</p>
<ol>
<li>Normal library, either by cloning the repo or installing with Nimble</li>
<li>CLI tool which outputs the data to the console</li>
<li>Home Assistant &quot;plugin&quot; to serve data to your dashboard with automatic adding of sensors</li>
</ol>
<h2>What not to do</h2>
<p>You should absolutely not set the scraping interval too low (!!). This is <strong>not</strong> an API provided by Nordnet, so please use it with care for Nordnets servers.</p>
<h2>What&apos;s next?</h2>
<p>Nothing. Nordnet properly changes their div-structure on monday, and then the scraping is failing.</p>
<p>  <em>Currently been working for a month...</em></p>
<h1>How to use it</h1>
<p>For all the 3 methods, you have to provide the URL to stock page. Navigate to the site, e.g. for Novo:</p>
<pre>  <code class="language-url">https://www.nordnet.dk/markedet/aktiekurser/16256554-novo-nordisk-b
</code></pre>
<p>Now grab the last part of the url, which is what you need:</p>
<pre>  <code class="language-url">16256554-novo-nordisk-b
</code></pre>
<p>You can provide multiple URLs, so repeat the above until satisfied.</p>
<h1>Normal library</h1>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">nordnet</span></div></div><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">nnObject</span> <span class="op">=</span> <span class="ide">nordnetData</span>(<span class="str">&quot;Novo&quot;</span>, <span class="str">&quot;16256554-novo-nordisk-b&quot;</span>)</div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">nnObject</span><span class="op">.</span><span class="ide">priceLatest</span> <span class="com"># The price</span></div></div><div class="line"><div class="line-content"><span class="ide">echo</span> <span class="ide">nordnetJson</span>(<span class="ide">nnObject</span>) <span class="com"># JsonNode</span></div></div>  </code></pre>
<h1>CLI tool</h1>
<p>Just find the url path and run:</p>
<pre>  <code class="language-bash">$ nim c -d:ssl -d:release nordnet.nim
$ ./nordnet 16256554-novo-nordisk-b
</code></pre>
<h1>Home Assistant</h1>
<p>The following is for implementing the data in <a href="https://www.home-assistant.io/">https://www.home-assistant.io/</a>.</p>
<h2>Compile</h2>
<p>First compile the file:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">nim</span> <span class="ide">c</span> <span class="op">-</span><span class="ide">d</span>:<span class="ide">ssl</span> <span class="op">-</span><span class="ide">d</span>:<span class="ide">release</span> <span class="ide">nordnet</span><span class="op">.</span><span class="ide">nim</span></div></div>  </code></pre>
<h2>Config file</h2>
<p>Then edit the config file, <code>config.json</code>, to your needs.</p>
<p>If you need to place your config file elsewhere, just edit the <code>&quot;config&quot;</code> path. Otherwise leave blank.</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">nano</span> <span class="ide">config</span><span class="op">/</span><span class="ide">config</span><span class="op">.</span><span class="ide">json</span></div></div>  </code></pre>
<h2>Auto run</h2>
<p>Now adjust the service file and deploy for autorun:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">nano</span> <span class="ide">nordnet</span><span class="op">.</span><span class="ide">service</span></div></div><div class="line"><div class="line-content"><span class="ide">sudo</span> <span class="ide">cp</span> <span class="ide">nordnet</span><span class="op">.</span><span class="ide">service</span> <span class="op">/</span><span class="ide">etc</span><span class="op">/</span><span class="ide">systemd</span><span class="op">/</span><span class="ide">system</span><span class="op">/</span><span class="ide">nordnet</span><span class="op">.</span><span class="ide">service</span></div></div><div class="line"><div class="line-content"><span class="ide">sudo</span> <span class="ide">systemctl</span> <span class="ide">enable</span> <span class="ide">nordnet</span></div></div><div class="line"><div class="line-content"><span class="ide">sudo</span> <span class="ide">systemctl</span> <span class="ide">start</span> <span class="ide">nordnet</span></div></div><div class="line"><div class="line-content"><span class="ide">sudo</span> <span class="ide">systemctl</span> <span class="ide">status</span> <span class="ide">nordnet</span></div></div>  </code></pre>
<h2>Add as sensor to Home Assistant</h2>
<p>As default the stocks will automatic be added as sensors named <code>sensor.stock_{stockname}</code>. So just run it, and you can directly after add the sensors to your lovelace frontpage.</p>
<p>A birth message is also supported - if Hass restarts, the config needs to be resend, otherwise the sensor will be inactive. You can setup a birth topic and birth payload inside Hass, which will be send on each boot - we are using that payload to resend the sensors configuration.</p>
<p>If you <strong>dont</strong> want the sensors added automatic, then set the <code>autodiscover: false</code> in the <code>config.json</code> - but then you have to add them manually, see the example with Node red below.</p>
<h3>Node red</h3>
<p>We are making 3 nodes:</p>
<ul>
<li>MQTT-in node - convert to JSON object</li>
<li>Switch node - prepared for more stocks</li>
<li>HA entity node - make the sensor</li>
</ul>
<details><summary>Node red JSON code</summary>
[
    {
        &quot;id&quot;: &quot;99ad52.619902b&quot;,
        &quot;type&quot;: &quot;mqtt in&quot;,
        &quot;z&quot;: &quot;f9f7e30c.acb0a&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;topic&quot;: &quot;nordnet/#&quot;,
        &quot;qos&quot;: &quot;2&quot;,
        &quot;datatype&quot;: &quot;json&quot;,
        &quot;broker&quot;: &quot;6e85e811.77a988&quot;,
        &quot;x&quot;: 160,
        &quot;y&quot;: 460,
        &quot;wires&quot;: [
            [
                &quot;a55a5b7e.c1b6f8&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;a55a5b7e.c1b6f8&quot;,
        &quot;type&quot;: &quot;switch&quot;,
        &quot;z&quot;: &quot;f9f7e30c.acb0a&quot;,
        &quot;name&quot;: &quot;Determine stock&quot;,
        &quot;property&quot;: &quot;topic&quot;,
        &quot;propertyType&quot;: &quot;msg&quot;,
        &quot;rules&quot;: [
            {
                &quot;t&quot;: &quot;eq&quot;,
                &quot;v&quot;: &quot;nordnet/Novo&quot;,
                &quot;vt&quot;: &quot;str&quot;
            },
            {
                &quot;t&quot;: &quot;eq&quot;,
                &quot;v&quot;: &quot;nordnet/Alibaba&quot;,
                &quot;vt&quot;: &quot;str&quot;
            }
        ],
        &quot;checkall&quot;: &quot;false&quot;,
        &quot;repair&quot;: false,
        &quot;outputs&quot;: 2,
        &quot;x&quot;: 360,
        &quot;y&quot;: 460,
        &quot;wires&quot;: [
            [
                &quot;7ec6bbab.c507a4&quot;
            ],
            [
                &quot;447985cf.024a3c&quot;
            ]
        ]
    },
    {
        &quot;id&quot;: &quot;7ec6bbab.c507a4&quot;,
        &quot;type&quot;: &quot;ha-entity&quot;,
        &quot;z&quot;: &quot;f9f7e30c.acb0a&quot;,
        &quot;name&quot;: &quot;Stock Novo&quot;,
        &quot;server&quot;: &quot;b95e3a52.453dc8&quot;,
        &quot;version&quot;: 1,
        &quot;debugenabled&quot;: true,
        &quot;outputs&quot;: 1,
        &quot;entityType&quot;: &quot;sensor&quot;,
        &quot;config&quot;: [
            {
                &quot;property&quot;: &quot;name&quot;,
                &quot;value&quot;: &quot;nordnet_novo&quot;
            },
            {
                &quot;property&quot;: &quot;device_class&quot;,
                &quot;value&quot;: &quot;&quot;
            },
            {
                &quot;property&quot;: &quot;icon&quot;,
                &quot;value&quot;: &quot;&quot;
            },
            {
                &quot;property&quot;: &quot;unit_of_measurement&quot;,
                &quot;value&quot;: &quot;DKK&quot;
            }
        ],
        &quot;state&quot;: &quot;payload.Novo.priceLatest&quot;,
        &quot;stateType&quot;: &quot;msg&quot;,
        &quot;attributes&quot;: [
            {
                &quot;property&quot;: &quot;percentToday&quot;,
                &quot;value&quot;: &quot;payload.Novo.percentToday&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;plusminusToday&quot;,
                &quot;value&quot;: &quot;payload.Novo.plusminusToday&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;priceBuy&quot;,
                &quot;value&quot;: &quot;payload.Novo.priceBuy&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;priceSell&quot;,
                &quot;value&quot;: &quot;payload.Novo.priceSell&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;priceHighest&quot;,
                &quot;value&quot;: &quot;payload.Novo.priceHighest&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;priceLowest&quot;,
                &quot;value&quot;: &quot;payload.Novo.priceLowest&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;tradeTotal&quot;,
                &quot;value&quot;: &quot;payload.Novo.tradeTotal&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;orderdepthBuy&quot;,
                &quot;value&quot;: &quot;payload.Novo.orderdepthBuy&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;orderdepthSell&quot;,
                &quot;value&quot;: &quot;payload.Novo.orderdepthSell&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;epochtime&quot;,
                &quot;value&quot;: &quot;payload.Novo.epochtime&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            },
            {
                &quot;property&quot;: &quot;success&quot;,
                &quot;value&quot;: &quot;payload.Novo.success&quot;,
                &quot;valueType&quot;: &quot;msg&quot;
            }
        ],
        &quot;resend&quot;: true,
        &quot;outputLocation&quot;: &quot;&quot;,
        &quot;outputLocationType&quot;: &quot;none&quot;,
        &quot;inputOverride&quot;: &quot;allow&quot;,
        &quot;x&quot;: 590,
        &quot;y&quot;: 420,
        &quot;wires&quot;: [
            []
        ]
    },
    {
        &quot;id&quot;: &quot;6a83e811.77a988&quot;,
        &quot;type&quot;: &quot;mqtt-broker&quot;,
        &quot;z&quot;: &quot;&quot;,
        &quot;name&quot;: &quot;Main MQTT&quot;,
        &quot;broker&quot;: &quot;127.0.0.1&quot;,
        &quot;port&quot;: &quot;1883&quot;,
        &quot;clientid&quot;: &quot;noderedmqtt&quot;,
        &quot;usetls&quot;: false,
        &quot;compatmode&quot;: false,
        &quot;keepalive&quot;: &quot;60&quot;,
        &quot;cleansession&quot;: true,
        &quot;birthTopic&quot;: &quot;&quot;,
        &quot;birthQos&quot;: &quot;0&quot;,
        &quot;birthPayload&quot;: &quot;&quot;,
        &quot;closeTopic&quot;: &quot;&quot;,
        &quot;closeQos&quot;: &quot;0&quot;,
        &quot;closePayload&quot;: &quot;&quot;,
        &quot;willTopic&quot;: &quot;&quot;,
        &quot;willQos&quot;: &quot;0&quot;,
        &quot;willPayload&quot;: &quot;&quot;
    },
    {
        &quot;id&quot;: &quot;b93f3a12.453dc8&quot;,
        &quot;type&quot;: &quot;server&quot;,
        &quot;z&quot;: &quot;&quot;,
        &quot;name&quot;: &quot;Home Assistant&quot;,
        &quot;legacy&quot;: false,
        &quot;addon&quot;: true,
        &quot;rejectUnauthorizedCerts&quot;: true,
        &quot;ha_boolean&quot;: &quot;y|yes|true|on|home|open&quot;,
        &quot;connectionDelay&quot;: true,
        &quot;cacheJson&quot;: true
    }
]
</details>
<h3>Graph</h3>
<p>Now just create a sensor-graph with the sensor <code>sensor.nordnet_novo</code>, or use the
<a href="https://github.com/kalkih/mini-graph-card">mini-graph</a> with the following code:</p>
<pre>  <code class="language-yaml"><div class="line"><div class="line-content"><span class="str">type</span>: <span class="str">&apos;custom:mini-graph-card&apos;</span></div></div><div class="line"><div class="line-content"><span class="str">name</span>: <span class="str">&apos;Stock: Novo&apos;</span></div></div><div class="line"><div class="line-content"><span class="str">icon</span>: <span class="str">&apos;mdi:chart-bell-curve&apos;</span></div></div><div class="line"><div class="line-content"><span class="str">entities</span>:</div></div><div class="line"><div class="line-content">  - <span class="str">entity</span>: <span class="str">sensor.nordnet_novo</span></div></div><div class="line"><div class="line-content">    <span class="str">name</span>: <span class="str">Latest price</span></div></div><div class="line"><div class="line-content"><span class="str">hours_to_show</span>: <span class="num">168</span></div></div><div class="line"><div class="line-content"><span class="str">points_per_hour</span>: <span class="num">30</span></div></div>  </code></pre>
<h1>Types</h1>
<h2>MqttInfo* = object</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">MqttInfo</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">host</span><span class="op">*:</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">port</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">username</span><span class="op">*:</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">password</span><span class="op">*:</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">topic</span><span class="op">*:</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">ssl</span><span class="op">*:</span> <span class="ide">bool</span></div></div><div class="line"><div class="line-content">    <span class="ide">clientname</span><span class="op">*:</span> <span class="ide">string</span></div></div>  </code></pre>
<hr />
<h2>Nordnetapi* = object</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">Nordnetapi</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">urls</span><span class="op">*:</span> <span class="ide">seq</span>[<span class="ide">string</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">wait</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">refresh</span><span class="op">*:</span> <span class="ide">int</span></div></div>  </code></pre>
<hr />
<h2>Nordnet* = object</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">Nordnet</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">object</span></div></div><div class="line"><div class="line-content">    <span class="ide">success</span><span class="op">*:</span> <span class="ide">bool</span></div></div><div class="line"><div class="line-content">    <span class="ide">name</span><span class="op">*:</span> <span class="ide">string</span></div></div><div class="line"><div class="line-content">    <span class="ide">epochtime</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">priceLatest</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">priceBuy</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">priceSell</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">priceHighest</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">priceLowest</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">percentToday</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">plusminusToday</span><span class="op">*:</span> <span class="ide">float</span></div></div><div class="line"><div class="line-content">    <span class="ide">tradeTotal</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">orderdepthSell</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">    <span class="ide">orderdepthBuy</span><span class="op">*:</span> <span class="ide">int</span></div></div>  </code></pre>
<hr />
<h1>Procs</h1>
<h2>nordnetConfig*</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">nordnetConfig</span><span class="op">*</span>(<span class="ide">configPath</span> <span class="op">=</span> <span class="str">&quot;config/config.json&quot;</span>) <span class="op">=</span></div></div>  </code></pre>
<p>Load the config</p>
<hr />
<h2>nordnetData*</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">nordnetData</span><span class="op">*</span>(<span class="ide">name</span>, <span class="ide">url</span>: <span class="ide">string</span>): <span class="ide">Nordnet</span> <span class="op">=</span></div></div>  </code></pre>
<p>Scrape the data and return the Nordnet object</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">(<span class="ide">success</span>: <span class="ide">true</span>, <span class="ide">name</span>: <span class="str">&quot;Novo&quot;</span>, <span class="ide">epochtime</span>: <span class="num">1584771256</span>, <span class="ide">priceLatest</span>: <span class="num">359.35</span>, <span class="ide">priceBuy</span>: <span class="num">359.35</span>, <span class="ide">priceSell</span>: <span class="num">359.35</span>, <span class="ide">priceHighest</span>: <span class="num">381.5</span>, <span class="ide">priceLowest</span>: <span class="num">355.75</span>, <span class="ide">percentToday</span>: <span class="op">-</span><span class="num">1.55</span>, <span class="ide">plusminusToday</span>: <span class="op">-</span><span class="num">5.65</span>, <span class="ide">tradeTotal</span>: <span class="num">6914045</span>, <span class="ide">orderdepthSell</span>: <span class="num">0</span>, <span class="ide">orderdepthBuy</span>: <span class="num">0</span>)</div></div>  </code></pre>
<hr />
<h2>nordnetJson*</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">nordnetJson</span><span class="op">*</span>(<span class="ide">nn</span>: <span class="ide">Nordnet</span>): <span class="ide">JsonNode</span> <span class="op">=</span></div></div>  </code></pre>
<p>Transform the Nordnet object to a JsonNode</p>
<pre>  <code class="language-json">{
    &quot;Novo&quot;: {
        &quot;priceLatest&quot;: 359.35,
        &quot;percentToday&quot;: -1.55,
        &quot;plusminusToday&quot;: -5.65,
        &quot;priceBuy&quot;: 359.35,
        &quot;priceSell&quot;: 359.35,
        &quot;priceHighest&quot;: 381.5,
        &quot;priceLowest&quot;: 355.75,
        &quot;tradeTotal&quot;: 6914045,
        &quot;orderdepthBuy&quot;: 0,
        &quot;orderdepthSell&quot;: 0,
        &quot;epochtime&quot;: 1584771256,
        &quot;success&quot;: true
    }
}
</code></pre>
<hr />
<h2>apiRun*</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">proc</span> <span class="ide">apiRun</span><span class="op">*</span>() {<span class="op">.</span><span class="ide">async</span><span class="op">.</span>} <span class="op">=</span></div></div>  </code></pre>
<p>Run the async scraping. This will first load the config into
memory, then connect to the mqtt broker, and then do the
first scraping. After the first scraping the loading time
will start.</p>
<hr />
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/ThomasTJdev/nim_nordnet_api">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-12-28T01:09:11Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
