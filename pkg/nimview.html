<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">nimview</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">web</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">library</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">gui</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">webview</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">html</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">css</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">javascript</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">Nim / Python / C library to run webview with HTML/JS as UI</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install nimview" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Nimview</h1>
<p><img src="https://img.shields.io/github/license/marcomq/nimview" style="max-width: 100%;" alt="License" />
<a href="https://github.com/marcomq/nimview/actions/workflows/linux.yml">  <img src="https://github.com/marcomq/nimview/actions/workflows/linux.yml/badge.svg?branch=main" style="max-width: 100%;" alt="Build Status" /></a>
<a href="https://github.com/marcomq/nimview/actions/workflows/windows.yml">  <img src="https://github.com/marcomq/nimview/actions/workflows/windows.yml/badge.svg?branch=main" style="max-width: 100%;" alt="Build Status" /></a>
<a href="https://github.com/marcomq/nimview/actions/workflows/macos.yml">  <img src="https://github.com/marcomq/nimview/actions/workflows/macos.yml/badge.svg?branch=main" style="max-width: 100%;" alt="Build Status" /></a></p>
<p>A lightweight cross platform UI library for Nim, C, C++ or Python. The main purpose is to simplify creation of online / offline applications based on a HTML/CSS/JS layer to be displayed with Webview or a browser. The application can even run on cloud and on desktop environments with the same binary application.</p>
<h2>Status</h2>
<p>Currently, the project is not in active development anymore. There is <a href="https://tauri.app/">tauri</a> (written in rust) that has similar goals and is much more advanced than nimview. Much more important - tauri is using webkit2 which supports state-of-the-art css and javascript. Nimview was still using webkit1 - which causes issues when using basic reactive Javascript on windows or when using modern css libraries. I will probably still review and merge PRs if you want to use nimview or if you think that those PRs are a good idea.</p>
<h2>Features</h2>
<ul>
<li>Compile to small single executable binary that also includes the UI</li>
<li>No network port will be opened by Nimview in Desktop mode</li>
<li>Platforms: Windows, Linux, MacOS, Android, Cloud / Web</li>
<li>Use Nim, Python, C or C++ for your back-end</li>
<li>Use any HTML/CSS/JS based UI you want - Svelte, Vue, React, plain JS etc..</li>
<li>Desktop and Web mode</li>
<li>Simple automated back-end testing as backend functions just return strings</li>
<li>Integrated simple persistent storage</li>
<li>Immediately expose back-end functions to front-end with a simple command</li>
<li>Trigger front-end functions from backend</li>
</ul>
<h2>Table of Contents</h2>
<ul>
<li>  <a href="#about">About</a></li>
<li>  <a href="#demo-binary">Demo binary</a></li>
<li>  <a href="#youtube-introduction">Youtube introduction</a></li>
<li>  <a href="#minimal-python-example">Minimal Python Example</a></li>
<li>  <a href="#minimal-nim-example">Minimal Nim example</a></li>
<li>  <a href="#javascript-and-html-ui">Javascript and HTML UI</a></li>
<li>  <a href="#exchange-data-with-ui">Exchange data with UI</a></li>
<li>  <a href="#development-workflow">Development workflow</a></li>
<li>  <a href="#inline-html-to-single-binary">Inline HTML to single binary</a></li>
<li>  <a href="#why-nim">Why Nim</a></li>
<li>  <a href="#which-js-framework-for-ui">Which JS framework for UI</a></li>
<li>  <a href="#nimview-vs-electron-or-cef">Nimview vs Electron or CEF</a></li>
<li>  <a href="#nimview-vs-eel-or-neel">Nimview vs Eel or Neel</a></li>
<li>  <a href="#difference-to-flask">Difference to Flask</a></li>
<li>  <a href="#wails">Wails</a></li>
<li>  <a href="#csrf-and-security">CSRF and Security</a></li>
<li>  <a href="#multithreading">Multithreading</a></li>
<li>  <a href="#multithreading">IE 11 or - &quot;Why is my page blank?</a></li>
<li>  <a href="#limitations">Limitations</a></li>
<li>  <a href="#using-ui-from-existing-web-applications">Using UI from existing web-applications</a></li>
<li>  <a href="#software-requirements">Software Requirements</a></li>
<li>  <a href="#documnentation">Documentation</a></li>
</ul>
<h2>About</h2>
<p>The target of this project was to have a simple, ultra lightweight cross platform, cross programming language UI layer for desktop, cloud and mobile applications. Nimview applications have just a few MB in static executable size and are targeted to be easy to write, easy to read, stable, secure and easy to test. The RAM consumption of basic Nimview applications is usually less than 20 MB on MS Windows.</p>
<p>This project uses <a href="https://github.com/oskca/webview">Webview</a> to render Desktop
applications and an integrated HttpServer for Development and Cloud. It doesn&apos;t use the latest version, as the latest version stopped working with file urls.</p>
<p>Nimview is an interface to interact with Nim/C/C++/Python code from UI Javascript in the same way for Webview desktop applications, web and mobile applications. It registers functions in the specific languages and also can mix Nim with any of the supported targets.</p>
<p>Technically, the UI layer will be completely HTML/CSS/JS based and the back-end should be using either Nim, C/C++ or Python code directly.
Nim mostly acts as a &quot;glue&quot; layer as it can create python and C libraries easily. As long as you write Nim code, you might integrate the code in C/C++, Python or even Android.
The final result should be a binary executable that runs on Linux, Windows or MacOS Desktop and even <a href="https://github.com/marcomq/examples/android">Android</a>. IOS wasn&apos;t tested yet.</p>
<p>The final application later doesn&apos;t require a webserver, but it is recommended to use the webserver mode during development or in debug mode.
You may also use the webserver for your cloud environemnt, but make sure to use additional authentication and a security reverse proxy when running on cloud.</p>
<p>Node.js is recommended but not required if you want to build your Javascript UI layer with Svelte/Vue/React or the framework of your choice.
The HTTP server will run when compiling the application as &quot;debug&quot; by default, so you can use all your usual debugging and development tools in Chrome or Firefox.
Webview makes it hard to debug Javascript - especially on Windows. You might use webview for production and testing, but you shouldn&apos;t focus Javascript UI development on Webview on windows.</p>
<p>This project is not intended to have any kind of forms, inputs or any additional helpers to create the UI.
If you need HTML generators or helpers, there are widely used open source frameworks available, for example Vue-Bootstrap (https://bootstrap-vue.org/).</p>
<h2>Demo binary</h2>
<p>There is a pre-build &quot;Todo-list&quot; demo application for windows x64 that uses a simple Svelte UI.
To make it work, you need to unzip everything before running the binaries. The zip contains two .exe files,
one desktop application &quot;appTodo&quot; and one HTTP server application &quot;httpTodo&quot; that opens a server on
http://localhost:8000.</p>
<ul>
<li><a href="https://github.com/marcomq/nimview/files/7077224/demo.zip">demo.zip</a>
sha256sum df3d2595b9755b27b7034ce4970f44d3bca72544ce8915739062b4ba1d977158</li>
</ul>
<p>If you want to build this demo from source, you need to run <code>nimble demo</code> on the
Nimview base folder.</p>
<h2>Youtube introduction</h2>
<p>There is some small &quot;Hello World&quot; tutorial for nimview on youtube:
https://www.youtube.com/watch?v=OykIbez7Vfc</p>
<h2>Minimal Python example</h2>
<p>The project is available for python via <code>pip install nimview</code> and for nim via <code>nimble install nimview</code>.
If you just want to display some simple static HTML (or alternatively a jpg), you can run:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">nimview</span></div></div><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">start</span>(<span class="str">&quot;hello_world.html&quot;</span>)</div></div>  </code></pre>
<p>If you want to actually trigger some server code from a button, you can do following in Python:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">nimview</span></div></div><div class="line"><div class="line-content"><span class="ide">def</span> <span class="ide">echoAndModify</span>(<span class="ide">value</span>): <span class="com"># One input value in the function signature is required</span></div></div><div class="line"><div class="line-content">    <span class="ide">print</span> (<span class="str">&quot;From front-end: &quot;</span> <span class="op">+</span> <span class="ide">value</span>)</div></div><div class="line"><div class="line-content">    <span class="kwd">return</span> (<span class="ide">value</span> <span class="op">+</span> <span class="str">&quot; appended&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">add</span>(<span class="str">&quot;echoAndModify&quot;</span>, <span class="ide">echoAndModify</span>)</div></div><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">start</span>(<span class="str">&quot;minimal_ui_sample/index.html&quot;</span>)</div></div>  </code></pre>
<p>The same in Nim:</p>
<h2>Minimal Nim example</h2>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">nimview</span></div></div><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">add</span>(<span class="str">&quot;echoAndModify&quot;</span>, <span class="kwd">proc</span> (<span class="ide">value</span>: <span class="ide">string</span>): <span class="ide">string</span> <span class="op">=</span></div></div><div class="line"><div class="line-content">  <span class="ide">echo</span> <span class="str">&quot;From front-end: &quot;</span> <span class="op">&amp;</span> <span class="ide">value</span></div></div><div class="line"><div class="line-content">  <span class="ide">result</span> <span class="op">=</span> <span class="str">&quot;&apos;&quot;</span> <span class="op">&amp;</span> <span class="ide">value</span> <span class="op">&amp;</span> <span class="str">&quot;&apos; modified by back-end&quot;</span>)</div></div><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">start</span>()</div></div>  </code></pre>
<p>Nimview will automatically use &quot;../public/index.html&quot; as as entry page in debug mode
and will try to load &quot;../dist/inlined.html&quot; in release mode. In release mode, the
inlined.html entry point
will be compiled statically into the release binary. If there are no further dependencies,
the release binary can just run as single executable binary without further UI files.
Keep in mind that when running in webserver mode, it will expose all files and subfolders that in the same directory as the index.html.</p>
<h2>Javascript and HTML UI</h2>
<p>Nimview offers an npm package &quot;npm install nimview&quot; which makes your life easier
on the front-end.
If you want to trigger back-end code from Javascript, you can do following
async callback:</p>
<pre>  <code class="language-js"><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">backend</span> <span class="ide">from</span> <span class="str">&quot;nimview&quot;</span></div></div><div class="line"><div class="line-content"><span class="ide">backend</span>.<span class="ide">waitInit</span>().<span class="ide">then</span>(() <span class="op">=&gt;</span> {</div></div><div class="line"><div class="line-content">  <span class="ide">backend</span>.<span class="ide">echoAndModify</span>(<span class="str">&quot;test&quot;</span>).<span class="ide">then</span>((<span class="ide">resp</span>) <span class="op">=&gt;</span> {<span class="ide">console</span>.<span class="ide">log</span>(<span class="ide">resp</span>)})</div></div><div class="line"><div class="line-content">})</div></div>  </code></pre>
<p><code>backend.waitInit</code> is only required if you want to immediately trigger some
back-end function during initialization. Nimview takes a few milliseconds to
load all functions from back-end to front-end.
You don&apos;t need this function if user action triggers a back-end call.</p>
<p>Keep also in mind that the inlined.html is completely &quot;inlined&quot; for release mode and that any &quot;defer&quot;
keyword would not work for your script tags. So your javascript may be ready before
the DOM is ready for Jasascript. You may still trigger to load the
javascript deferred when using</p>
<pre>  <code class="language-js"><div class="line"><div class="line-content"><span class="ide">document</span>.<span class="ide">addEventListener</span>(<span class="str">&quot;DOMContentLoaded&quot;</span>, <span class="kwd">function</span>(<span class="ide">event</span>) {</div></div>  </code></pre>
<p>to init your javascript when the DOM is ready, for example in your &quot;main.js&quot; for Svelte or Vue.</p>
<h2>Exchange data with UI</h2>
<p>Nimview register functions to take up to 4 arguments. If you need more or if you have
more complex data, it is recommended to use Json to encode your values on the client.
Use a parser on the back-end to read all values and send Json back to the client. By this, you have an unlimited amount of input and output
parameter values.
This is easy when using python or Nim as back-end. This may also simplify automated unit testing, as you can store the specific strings as Json
and only check specific Json values.
Notice, that all registered functions return only strings, so the server will also just return a string value.
If you need Json, you need to parse this value in javascript manually, for example with JSON.parse().
In case you want to use C++ - don&apos;t write your own C++ Json parser. Feel free to use https://github.com/nlohmann/json. You might re-use it in other code locations.</p>
<p>It is also possible to call front-end functions directly from back-end by using
<code>callJs</code>. You may trigger an <code>alert(&quot;Hello World!&quot;)</code> on the frontend by
using following Nim code:</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="ide">nimview</span><span class="op">.</span><span class="ide">callJs</span>(<span class="str">&quot;alert&quot;</span>, <span class="str">&quot;Hello World!&quot;</span>)</div></div>  </code></pre>
<p>in your back-end code. You may use as many parameters as you want.
This works directy for functions in the global js &quot;window&quot; namespace. If you need
to call a local function, you need to register it first in javascript with
<code>window.backend.mapFrontendFunction(&lt;functionName&gt;, function(parameter) {...})</code>.
You can then call it from back-end.
Keep in mind to only use this to send visible information to the UI and not rely
your application workflow on this function. Otherwise, your application might
become hard to test.</p>
<h2>Development workflow</h2>
<p>You need to compile the back-end and usually the front-end too, when using vue or svelte. While this seems unnecessary complicated in the beginning,
you will have the freedom to only restart the back-end if you have back-end changes and
use some autoreload feature of webpack (vue) and rollup (svelte) for the frontend.</p>
<p>The setup/install with Svelte after installing nim would be:</p>
<ul>
<li>  <code>nimble install nimview</code></li>
<li>  <code>npx degit marcomq/nimview/examples/svelte myProject</code></li>
<li>  <code>cd myProject</code></li>
<li>  <code>npm install</code></li>
</ul>
<p>To create a release version, just run</p>
<ul>
<li>  <code>npm run build</code></li>
<li>  <code>nim c -d:release --app:gui src/App.nim</code></li>
</ul>
<p>But if you want to change code easily, the development workflow would be:</p>
<ul>
<li>start your back-end in debug mode with vs code or terminal, run:</li>
<li>  <code>nim c -r -d:debug src/App.nim</code></li>
<li>start your frontend npm in autoreload with VS-Code or terminal, run</li>
<li>  <code>npm run dev</code></li>
<li>open a browser with url http://localhost:5000 to see the current front-end code result that is served by Node.js</li>
<li>change your front-end code, the page will reload automatically</li>
<li>change your back-end code and re-run <code>nim c -r -d:debug src/App.nim</code> or restart the VS Code debugger</li>
<li>keep in mind that http://localhost:5000 is only a development url, the Javascript generated for production would be reachable by default at http://localhost:8000</li>
</ul>
<p>You can also write simple integration tests with cypress using the debug (Webserver) mode.
This makes automated tests nearly as simple as for Electron.
Unfortunately, Cypress doesn&apos;t support IE11 and Nimview doesn&apos;t support Edge/Chromium on Windows yet.
But thx to babel, there aren&apos;t many JS incompatibilities.
An Edge version of Nimview is already planned.</p>
<h2>Inline HTML to single binary</h2>
<p>Nimview doesn&apos;t automatically create a single executable that contains the user interface
for all possible scenarios. Nimview currently adds <code>../dist/inlined.html</code>
to the binary - and only in release mode. This HTML file shouldn&apos;t contain any
external dependencies like css, images
javascript as these wouldn&apos;t be included in the executable binary.
You can use an inliner to inline your external dependencies. Check the svelte_todo exampple
for this. There is a &quot;npm build&quot; command in packages.js which calls an inliner to
scan dist/index.html and write the output to <code>../dist/inlined.html</code>. For very small projects,
you may even use an inlined HTML file directly.</p>
<p>Keep in mind that these inlined HTML files might also be hard to debug if they contain
javascript - so you should still have some way to just open the un-inlined index.html file.</p>
<h2>Components as diagram</h2>
<p>  <img src="https://user-images.githubusercontent.com/62469331/124002547-2ca26100-d9d6-11eb-955a-86954a016b69.png" style="max-width: 100%;" alt="nimview" /></p>
<h3>Why Nim</h3>
<p>Nim is actually some great &quot;batteries included&quot; helper. It is similar readable as python, has some cool Json / HTTP Server / Webview modules
but creates plain C Code that can be compiled by gcc compilers to optimized machine code.
You can also include C/C++ code as the output of Nim is just plain C. Additionally, it can be compiled to a python library easily.
(https://robert-mcdermott.gitlab.io/posts/speeding-up-python-with-nim/).</p>
<h3>Which JS framework for UI</h3>
<p>There are many JS frameworks to choose to create responsive user interfaces.
Svelte will create the fastest and best readable front-end code. But it is completely up to you which framework you will choose, as Vue and React have much more plugins and add-ons.</p>
<p>There is an example for Vue + Bootstrap 4 in tests/vue and one for Svelte in tests/svelte.
For the Windows target, you need to choose a IE 11 compatible CSS library. Bootstrap 5
for example isn&apos;t compatible with IE 11 anymore.</p>
<h3>Nimview vs Electron or CEF</h3>
<p>Electron and CEF are great frameworks with a lot of useful utilities and both were an inspiration to this helper here.
However, the output binary of electron or CEF is usually more than 100 MB and getting started with a new project without previous knowledge of Electron / CEF can also take some time.
Both CEF and Electron might be great for large Desktop projects that don&apos;t need to care about RAM + Disk or that require some additional custom window color,
task symbols or other features.
But setting up Electron / CEF applications and deploying them takes a lot of knowledge and time, which you can safe by using this helper here.
The binary output of Nimview is usually less than 2 MB. If you zip the binary, you even have less than 1 MB for a desktop application with UI. It also might just run in the Cloud as there is an included webserver
You might easily run the app in Docker. Getting started might just take some minutes and it will consume less RAM,
less system resources and will start-up much quicker than an Electron or CEF App.
You might write the same Code and the same UI for your Cloud application as for your Desktop App.
Cypress integration tests might still work as Nimview has a webserver mode that can be used for testing.</p>
<h3>Nimview vs Eel or Neel</h3>
<p>There are another 2 cool similar frameworks: The very popular framework <a href="https://github.com/ChrisKnott/Eel">eel</a> for python
and its cousin <a href="https://github.com/Niminem/Neel">neel</a> for nim.
While the use case seems to be similar, there are some major differences:</p>
<ul>
<li>With Nimview, you don&apos;t need a webserver running that might take requests from any other user on localhost as you use Webview in release mode.
This improves security as you don&apos;t need to worry about open ports or other attack vectors that need to be considered when running a webserver application. It also makes it easy to run multiple applications without having port conflicts. For some security scenarios, using a webserver - even on localhost - might be not an option at all.</li>
</ul>
<p>You can use Nimview in suche a case, as you get a similar development experience but with less security concerns.</p>
<ul>
<li>Nimview also includes a simple global token check in release mode that may be able to prevent most
CSRF attacks when the server is running on localhost.</li>
</ul>
<h3>Difference to Flask</h3>
<p><a href="https://github.com/pallets/flask">Flask</a> is probably the most popular python framework to create micro services and Nimview/AsyncHttpServer probably cannot compete with the easiness or with the amount of available plugins of Flask for simple python cloud applications.
But the use-case is different. While flask was desinged to serve HTML and have easy RESTful routes for &quot;get&quot; and &quot;post&quot;, Nimview was just designed to trigger user events from ajax using &quot;post&quot;. Nimview will not support server side template engines as flask does. The front-end code needs to care of routes and rendering.</p>
<p>Nimview can also create static binaries that can run in a minimal tiny Docker container that doesn&apos;t even need an installed python environment, as long as no python code is used. So you might create containers for your application that have just a few MB. Those deploy and startup much faster than Flask applications. Make sure to avoid building with Webview when creating binaries for Docker by compiling with <code>-d:useServer</code>, or you need to include GTK libraries in your container.</p>
<h3>Wails</h3>
<p>After releasing the first 0.1.0 version of Nimview, I found out about <a href="https://github.com/wailsapp/wails">Wails</a>. And I found out that I nearly created a Wails clone. Just - Wails had some nice additional features
that Nimview didn&apos;t had. So - Wails became a big inspiration for Nimview
Version 0.2.0:</p>
<ul>
<li>
<p>Compilation to a single static binary was added,</p>
</li>
<li>
<p>Multiple arguments for server functions were added and</p>
</li>
<li>
<p>Server functions are automatically exposed to the client when registered on server
Version 0.3.0:</p>
</li>
<li>
<p>Calling JS functions directly from back-end</p>
</li>
</ul>
<p>Nimview currently &quot;borrows&quot; its current Webview code from Wails, as the wails community still performs fixes
on the old C header-only version of Webview.</p>
<p>Nimview still has a smaller code base and creates even smaller binaries. You also have classical languages
for your back-end as C, C++ or Python code - and you can mix those with Nim.
Additionally, Nimview supports Android for offline and online applications.</p>
<h3>CSRF and Security</h3>
<p>Nimview was made with security in mind. For the Webview <code>startDesktop</code> mode, no network ports are opened to display the UI. The webserver is mostly for debugging and development.<br />
So the application doesn&apos;t need to be checked for several common attack vectors
of web-applications as long as Webview is used.</p>
<p>However, if you create a web-application, you need perform most security mitigations by yourself, by middleware or by the javascript framework you are using.
You may check <a href="owasp.org">owasp.org</a></p>
<p>Following CSRF protections are already included in Nimview:</p>
<p>Nimview stores 3 global random non-session tokens that renew each other every 60 seconds. A valid token is required for any Ajax request except &quot;getGlobalToken&quot;.
The token is queried automatically with a &quot;getGlobalToken&quot; request when the application starts. If the token is missing or wrong, there is a &quot;403&quot; error for ajax requests.</p>
<p>This isn&apos;t a full CSRF protection, as the token isn&apos;t bound to a session and all
users that can read responses from localhost could also use this token to
perform an attack (even if they may already send request directly to localhost).
If you add a &quot;Samesite&quot; directive for cookies, you might already prevent most common CSRF attack vectors.
The token check can also be disabled with <code>setUseGlobalToken(false)</code> for debugging, development,
or in case that there is already a session-based CSRF mitigation used by middleware.</p>
<h3>Multithreading</h3>
<p>Nimview was initially planned to run single-threaded. But calling back-end functions stopped Webview from updating the DOM.
Therefore, an additional Webview thread was added automatically that sends information back to the main thread with Nim Channels,
if the application was compiled with the option <code>threads:on</code>. On linux, it is also recommended to use <code>gc:orc</code> to avoid issues
with the Nim garbage collector. You can still enforce to use Nimview to be completely single threaded if you compile with
<code>-d:useWebviewSingleThreaded</code>.
Check the Nim manual on how to deal with multithreading and sharing data as multithreading is still complicate in Nim.</p>
<p>You may also use threads in Python or C++.</p>
<h3>IE 11 or - &quot;Why is my page blank?&quot;</h3>
<p>Nimview uses IE 11 on Windows. Unfortunately, IE 11 doesn&apos;t understand modern Javascript
or ES6. Just writing modern Javascript will result in a blank white page.
You therefore need to transform your code with Babel or other tools.
Check the examples for this.
It might be possible to use Webview2 in future on Windows to get rid of IE 11, but this
is depending on external Nim libraries that offer a wrapper for Webview. It wasn&apos;t tested yet,
but it may be possible to use GTK on Windows in case you really need to avoid IE 11.
At the time of writing, there is no simple and stable library supporting Webview 2 for Nim,
and GTK on Windows was much more complicated as just using the IE 11 engine.
The examples mostly use <code>npm run dev</code> for daily development. These do not
compile for IE 11. If you use IE11, you need to run <code>npm run dev-ie</code>. This is not
the default, as the build takes much longer when using babel.</p>
<h3>Using UI from existing web-applications</h3>
<p>For Desktop applications, it is required to use relative file paths in all your HTML. The paths must point to a directory relative of the binary to the given index html file.
It is not possible to use a subdirectory of the index file. You can also not use a web URL as startpoint, as this must be an existing file.
It is also not recommended to load from an untrusted URL from any existing internet source, as this could easily cause a security breach.
The Desktop mode is using IE11 as platform, so there might be security issues when loading uncontrolled content from internet.</p>
<h2>Software Requirements</h2>
<pre>  <code>- install nim (https://nim-lang.org/install.html)
    avoid white-space in nim install folder name when using windows
    add path by running nim &quot;finish&quot; in the nim install directory, so you have nimble available
    restart or open new shell to have nimble available
- linux: yum install gcc webkitgtk4-devel npm &lt;or:&gt; apt install gcc libwebkit2gtk-4.0-dev npm
- windows: install node &gt; 12.19  (https://nodejs.org/en/download/)
- nimble install nimview
- (optional for C/C++ on Windows: install gcc / make sure that minGW is in your path)
- npx degit marcomq/nimview/examples/xxx myProject
</code></pre>
<h3>Documentation</h3>
<p>A documentation is <a href="https://htmlpreview.github.io/?https://github.com/marcomq/nimview/blob/master/docs/theindex.html">here</a></p>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/marcomq/nimview">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2024-03-01T01:12:59Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
