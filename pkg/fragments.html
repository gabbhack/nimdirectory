<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">fragments</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">ffi</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">math</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">threading</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">dsl</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">memory</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">serialization</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">cpp</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">utilities</button></a>
                </span>
            
        </p>
        <p class="pkg-desc">some("Our very personal collection of utilities")</p>
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install fragments" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>Fragments</h1>
<h2>A collection of pure nim utilities.</h2>
<blockquote>
<p>  <strong>Note: work in progress</strong></p>
</blockquote>
<h2>Structure</h2>
<ul>
<li>
<p>  <strong>ffi</strong></p>
<ul>
<li><strong>cpp</strong>: Write C++ straight from Nim. Inspired by <code>std/jsffi</code> and using the magic of <code>importcpp</code>, <code>macros</code> and many other cool nim features. Wrappers are a thing of the past!</li>
<li><strong>js</strong>: A collection of utilities for the js backend.</li>
</ul>
</li>
<li>
<p>  <strong>math</strong></p>
<ul>
<li><strong>math_common</strong>: Commonly used math routines, similar to <code>std/math</code>.</li>
<li><strong>vectors</strong>: Helpers for writing vectorized code, converting types into Array-Of-Structure-Of-Arrays (AOSOA) form and generalizing operations to wide types.</li>
<li><strong>linalg</strong>: Linear algebra for 3D rendering and simulation. Designed for maximum ergonomy, performance and generalization to vectorized types and algorithms.</li>
</ul>
</li>
<li>
<p>  <strong>threading</strong></p>
<ul>
<li><strong>async_primitives</strong>: Synchronization primitives for asynchronous programs, integrated with <code>Futures</code> and <code>async/await</code>.</li>
<li><strong>atomics</strong>: Atomic types and operations closely conforming to C++11 style atomics.</li>
<li><strong>threading_primitives</strong>: Syncrhonization primitives for multi-threaded programs, such as <em>spin locks</em> and <em>events</em>.</li>
</ul>
</li>
<li>
<p><strong>dsl</strong>: Macros to define custom Nim DSLs.</p>
</li>
<li>
<p><strong>memory</strong>: Custom allocators and helpers for allocating objects and managing their life-time.</p>
</li>
<li>
<p><strong>serialization</strong>: Fast binary serialization with automatically compile-time generated serializers.</p>
</li>
</ul>
<h2>Examples</h2>
<h3>ffi</h3>
<h4>cpp</h4>
<pre>  <code class="language-nimrod"># Build configuration
cppdefines(&quot;MYDEFINE&quot;, &quot;MYDEFINE2=10&quot;)
cppincludes(&quot;.&quot;)
cppfiles(&quot;MyClass.cpp&quot;)
cpplibpaths(&quot;.&quot;)

# Define nim types for C++ types will be used directly
defineCppType(MyClass, &quot;MyClass&quot;, &quot;MyClass.hpp&quot;)
defineCppType(MyClass2, &quot;MyClass2&quot;, &quot;MyClass.hpp&quot;)

# Construct an object
var x = cppinit(MyClass, 1)
var y = cast[ptr MyClass](alloc0(sizeof(MyClass)))

# Create a C++ object tracked by the Nim GC
var j: ref MyClass
cppnewref(j, 1)
j.number = 22
echo j.number.to(cint)

# Create an untracked C++ object
var k: ptr MyClass 
cppnewptr(k, 2)
k.number = 55
echo k.number.to(cint)
k.cppdelptr

# Accessing global variables and functions
echo global.globalNumber.to(cint)
global.globalNumber = 102
echo global.globalNumber.to(cint)
global.printf(&quot;Hello World\n&quot;.cstring).to(void)

# Accessing members
y.test3().to(void)
y.test4(7, 8).to(void)
</code></pre>
<h3>math</h3>
<h4>vectors</h4>
<pre>  <code class="language-nimrod">type
  MyType = object
    f1: int
    f2: float

  MyWideType = wide MyType

var x: wide MyType
x.setLane(1, x.getLane(0))
</code></pre>
<h4>linalg</h4>
<pre>  <code class="language-nimrod">var
  v2: Vector2
  v3: Vector3
  v4: Vector4
  m: Matrix4x4
  q: Quaternion

# Construction
v2 = (1.0f, 2.0f)
v4 = (v2, 3.0f, 4.0f)
v3 = Vector3.unitX
m = Matrix4x4.identity
q = Quaternion.identity

# Swizzling
v2.x = 3.0f
q.yxz = v4.wwx
v4.rgba = (v3.zxy, 1.0f)
m.m00m12m34m41 = v4
let v6 = v3.xyzxyz

# Basic transformation
let a = 
q = rotationAxisQuaternion(Vector3.unitX, PI/2)
v3 = Vector3.unitY.transform(q)
</code></pre>
<h3>threading</h3>
<h4>async_primitives</h4>
<pre>  <code class="language-nimrod">var lock: AsyncLock
lock.init()

# Yield asynchronous execution until the lock is available
withLock lock:
  await someAsynchronousOperation()
</code></pre>
<h4>threading_primitives</h4>
<p>  <strong>Spin-locks</strong></p>
<pre>  <code class="language-nimrod">var spinLock: SpinLock

# In multiple threads
withLock spinLock:
  someAtomicOperation()
</code></pre>
<p>  <strong>Events</strong></p>
<pre>  <code class="language-nimrod">var event: ManualResetEvent
event.init()

# Thread 1
event.signal()

# Thread 2
event.waitOne()
</code></pre>
<h4>atomics</h4>
<pre>  <code class="language-nimrod"># Atomic flags, trivially atomic types and types that require spin-locking
var
  guard: AtomicFlag
  foo: atomic int
  bar: atomic MyComplexType

# Atomic operations
var value = 5
foo.store(value, moRelease)
assert foo.compareExchange(value, 4, moAcquireRelease)
assert foo.load(moAcquire) == 4

# Possible spin-lock impelemtation
while guard.testAndSet(moAcquire): discard
  cpuRelax()
guard.clear(moRelease)
</code></pre>
<h3>serialization</h3>
<p>Feature:</p>
<ul>
<li>Atomatic serializer generation for object and tuple types</li>
<li>Efficient handling of blittable types</li>
<li>Reuse of objects when serializing references</li>
</ul>
<pre>  <code class="language-nimrod">type
  MyType = ref object
    trivial*: int
    skipped* {.serializable: false.}: int
    sequence*: seq[int]
    str*: string
    complex*: MyOtherType
    reference*: ref int
    anonymousTuple*: tuple[a: ref int]

  MyOtherType = object

var context = newSerializationContext(stream)
context.stream = newStringStream()

var x = new MyType
x.serialize(context)

var y: MyType
y.deserialize(context)
</code></pre>
<h3>dsl</h3>
<p>Macros to define custom nim DSLs, for example:</p>
<pre>  <code class="language-nimrod">type
  MyBase = object of RootObj
    value: string

method testMethod(b: ptr MyBase; wow: ref int) {.base.} = echo &quot;Base&quot;

archetype entity:
  super: MyBase
  mustBeVar: int
  mustBeVar2: float
  proc start()
  proc run(state: int) {.async.}
  proc stop()
  method testMethod(wow: ref int)

entity MyEntity:
  param0: 10
  param1 {.public.}: 20
  var0 {.public.}: float
  var1: float = 2.0
  mustBeVar {.public.}: 10

  start:
    var ten = param0
    var ten2 = param1
    var1 = (ten + ten2).float
  
  run:
    echo param0
    echo param1
    echo state
  
  stop:
    echo param0

  testMethod:
    echo &quot;Derived&quot;
    echo param0

</code></pre>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        MIT
                    </p>
                

                
                    <p> <a href="https://github.com/sinkingsugar/fragments">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-11-18T01:11:08Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
