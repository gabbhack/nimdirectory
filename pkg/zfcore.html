<!DOCTYPE html>
<html lang="en">
<head>
  <title>Nim Package Directory</title>
  <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="New and updated Nim packages" href="https://nimble.directory/packages.xml">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlite.css">
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top py-3">
  <div class="container">
    <a href="/" class="logo fw-500 display-1 text-black text-decoration-none navbar-brand"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mx-2">
          <a href="https://nim-lang.org/" class="nav-link">What's Nim?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="/about.html" class="nav-link">What's Nimble?</a>
        </li>
        <li class="nav-item mx-2">
          <a href="https://github.com/nim-lang/packages/" class="nav-link">Publish your package</a>
        </li>
        <!-- TODO: replace with something different -->
        <li class="nav-item ms-3">
          <a class="nav-link" href="https://www.youtube.com/channel/UCDAYn_VFt0VisL5-1a5Dk7Q/">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
          </a>
        </li>
        <li class="nav-item ms-3">
          <a class="nav-link theme-switcher-btn" id="darkmode" onclick="toggle_dark_mode()" href="#">
            <span id="light-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </span>
            <span id="dark-mode-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container">
    <div class="container pt-10">
        <h3 class="mb-3 fw-bold display-6 pt-4">zfcore</h3>
        <p class="tags">
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">web</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">http</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">framework</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">api</button></a>
                </span>
            
                <span class="tag">
                    <button class="btn-tag pkg-btn-tag">asynchttpserver</button></a>
                </span>
            
        </p>
        
            <p class="pkg-desc">zfcore is high performance asynchttpserver and web framework for nim lang</p>
        
        <a title="Copy" onclick="document.querySelector('#cmd').select();document.execCommand('copy');"
            alt="Copy on clipboard">
            <i class="fa fa-copy"></i>
        </a>
        <input id="cmd" onclick="this.select();" value="nimble install zfcore" readonly="">
        <br>
        <small style="font-size: 0.8rem;">Need help? Read <a
                href="https://github.com/nim-lang/nimble#creating-packages">Nimble</a></small>
    </div>

    <div class="container row pt-4" id="pkg-content">
        <div class="col-8 box rounded p-3" id="readme-section">
            
                <document><h1>zfcore</h1>
<p>zfcore is high performance http server and web framework for nim lang
we replace asynchttpserver with zfblast server https://github.com/zendbit/nim.zfblast</p>
<h1>Web Socket (yeah)</h1>
<p>from version 1.0.6 already support web socket</p>
<h1>Install from nimble</h1>
<pre>  <code>nimble install zfcore@#head
</code></pre>
<h1>usage</h1>
<p>Example code, this is example code from web template of zendflow, for zendflow usage follow this link https://github.com/zendbit/zendflow</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">#[
  zfcore web framework for nim language
  This framework if free to use and to modify
  License: BSD
  Author: Amru Rosyada
  Email: amru.rosyada@gmail.com
  Git: https://github.com/zendbit
]#</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">#[
  This module auto export from zendFlow module
  export
    HttpContext, -> zfcore module
    router, -> zfcore module
    Router, -> zfcore module
    route, -> zfcore module
    Route, -> zfcore module
    asyncdispatch, -> stdlib module
    zfblast, -> zf blast implementation of async http server with openssl
    tables, -> stdlib module
    formdata, -> zfcore module
    strtabs, -> stdlib module
    uri3, -> nimble package
    strutils, -> stdlib module
    times, -> stdlib module
    os, -> stdlib module
    Settings, -> zfcore module
    settings, -> zfcore module
    AsyncSocket, -> stdlib module
    asyncnet -> stdlib module
    zfplugs -> zfcore plugins
    stdext -> nim extended standard library
    zfmacros -> zfcore macros helper
]#</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">import</span> <span class="ide">zfcore</span><span class="op">/</span><span class="ide">server</span>, <span class="ide">example</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="com"># configuration:</span></div></div><div class="line"><div class="line-content"><span class="com"># copy settings.json.example as settings.json</span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="com"># this is the new fashion of the zendflow framework syntax, make it easy</span></div></div><div class="line"><div class="line-content"><span class="com"># and reduce defining multiple time of callback procedures</span></div></div><div class="line"><div class="line-content"><span class="com"># this new syntax not break the old fashion, we only add macros and modify the syntax</span></div></div><div class="line"><div class="line-content"><span class="com"># on compile time</span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="com"># Some Important note</span></div></div><div class="line"><div class="line-content"><span class="com"># inside routes</span></div></div><div class="line"><div class="line-content"><span class="com"># routes:</span></div></div><div class="line"><div class="line-content"><span class="com">#   get &quot;/hello&quot;:</span></div></div><div class="line"><div class="line-content"><span class="com">#     # in here we can call HttpContext</span></div></div><div class="line"><div class="line-content"><span class="com">#     # HttpContext is unique object that heandle client request and response</span></div></div><div class="line"><div class="line-content"><span class="com">#     # HttpContext containts:</span></div></div><div class="line"><div class="line-content"><span class="com">#     # ws (WebSocket):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   ws is ctx.webSocket shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     # req (Request):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   req is ctx.request shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     # res (Response):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   res is ctx.response shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     # params (table[string, string]):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   params is ctx.params shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   this will contains data request parameter from client</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   - key value of query string</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   - key value of form url encoded</span></div></div><div class="line"><div class="line-content"><span class="com">#     # reParams (table[string, @[string]]):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   reParams is ctx.reParams shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   this will contains pattern matching on the url segments</span></div></div><div class="line"><div class="line-content"><span class="com">#     # formData (FormData):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   formData is ctx.formData shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   this will handle form data multipart including uploaded data</span></div></div><div class="line"><div class="line-content"><span class="com">#     # json (JsonNode):</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   json is ctx.json shorthand</span></div></div><div class="line"><div class="line-content"><span class="com">#     #   this will handle application/json request from client</span></div></div><div class="line"><div class="line-content"><span class="com">#     </span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="com">#     # you can response to client with following type response:</span></div></div><div class="line"><div class="line-content"><span class="com">#     # HttpCode.resp(&quot;body response&quot;, httpheaders)</span></div></div><div class="line"><div class="line-content"><span class="com">#     # HttpCode is HttpCode value from the nim httpcore standard library</span></div></div><div class="line"><div class="line-content"><span class="com">#     # for example we want to reponse with Http200</span></div></div><div class="line"><div class="line-content"><span class="com">#     # Http200.resp(&quot;Hello World&quot;)</span></div></div><div class="line"><div class="line-content"><span class="com">#     # </span></div></div><div class="line"><div class="line-content"><span class="com">#     # the default response type is text/plain</span></div></div><div class="line"><div class="line-content"><span class="com">#     # for html response use</span></div></div><div class="line"><div class="line-content"><span class="com">#     # Http200.respHtml(&quot;This is html content&quot;)</span></div></div><div class="line"><div class="line-content"><span class="com">#     #</span></div></div><div class="line"><div class="line-content"><span class="com">#     # for json response you only need to pas JsonNode object to the resp</span></div></div><div class="line"><div class="line-content"><span class="com">#     # Http200.resp(%*{&quot;Hello&quot;: &quot;World&quot;})</span></div></div><div class="line"><div class="line-content"><span class="com">#     #</span></div></div><div class="line"><div class="line-content"><span class="com">#     # for send redirection web can use respRedirect</span></div></div><div class="line"><div class="line-content"><span class="com">#     # Http200.respRedirect(&quot;https://google.com&quot;)</span></div></div><div class="line"><div class="line-content"><span class="com">#     #</span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="com">#</span></div></div><div class="line"><div class="line-content"><span class="ide">routes</span>:</div></div><div class="line"><div class="line-content">  <span class="com"># websocket example :-)</span></div></div><div class="line"><div class="line-content">  <span class="ide">get</span> <span class="str">&quot;/ws&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="com"># ctx instance of HttpCtx exposed here :-)</span></div></div><div class="line"><div class="line-content">    <span class="com"># ws is shorthand of ctx.websocket</span></div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="kwd">if</span> <span class="kwd">not</span> <span class="ide">ws</span><span class="op">.</span><span class="ide">isNil</span>:</div></div><div class="line"><div class="line-content">      <span class="kwd">case</span> <span class="ide">ws</span><span class="op">.</span><span class="ide">state</span>:</div></div><div class="line"><div class="line-content">      <span class="kwd">of</span> <span class="ide">WSState</span><span class="op">.</span><span class="ide">HandShake</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;HandShake state&quot;</span></div></div><div class="line"><div class="line-content">        <span class="com"># this state will evaluate</span></div></div><div class="line"><div class="line-content">        <span class="com"># right before handshake process</span></div></div><div class="line"><div class="line-content">        <span class="com"># in here we can add the additionals response headers</span></div></div><div class="line"><div class="line-content">        <span class="com"># normaly we can skip this step</span></div></div><div class="line"><div class="line-content">        <span class="com"># about the handshake:</span></div></div><div class="line"><div class="line-content">        <span class="com"># handshake is using http headers</span></div></div><div class="line"><div class="line-content">        <span class="com"># this process is only happen 1 time</span></div></div><div class="line"><div class="line-content">        <span class="com"># after handshake success then the protocol will be switch to the websocket</span></div></div><div class="line"><div class="line-content">        <span class="com"># you can check the handshake header request in</span></div></div><div class="line"><div class="line-content">        <span class="com"># -&gt; ws.handShakeReqHeaders this is the HtttpHeaders type</span></div></div><div class="line"><div class="line-content">        <span class="com"># and you also can add the additional headers information in the response handshake</span></div></div><div class="line"><div class="line-content">        <span class="com"># by adding the:</span></div></div><div class="line"><div class="line-content">        <span class="com"># -&gt; ws.handShakeResHeaders</span></div></div><div class="line"><div class="line-content">      <span class="kwd">of</span> <span class="ide">WSState</span><span class="op">.</span><span class="ide">Open</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Open state&quot;</span></div></div><div class="line"><div class="line-content">        <span class="com"># in this state all swaping process will accur</span></div></div><div class="line"><div class="line-content">        <span class="com"># like send or received message</span></div></div><div class="line"><div class="line-content">        <span class="kwd">case</span> <span class="ide">ws</span><span class="op">.</span><span class="ide">statusCode</span>:</div></div><div class="line"><div class="line-content">        <span class="kwd">of</span> <span class="ide">WSStatusCode</span><span class="op">.</span><span class="ide">Ok</span>:</div></div><div class="line"><div class="line-content">          <span class="kwd">case</span> <span class="ide">ws</span><span class="op">.</span><span class="ide">inFrame</span><span class="op">.</span><span class="ide">opCode</span>:</div></div><div class="line"><div class="line-content">          <span class="kwd">of</span> <span class="ide">WSOpCode</span><span class="op">.</span><span class="ide">TextFrame</span><span class="op">.</span><span class="ide">uint8</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;Text frame received&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Fin {ws.inFrame.fin}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Rsv1 {ws.inFrame.rsv1}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Rsv2 {ws.inFrame.rsv2}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Rsv3 {ws.inFrame.rsv3}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;OpCode {ws.inFrame.opCode}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Mask {ws.inFrame.mask}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Mask Key {ws.inFrame.maskKey}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;PayloadData {ws.inFrame.payloadData}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;PayloadLen {ws.inFrame.payloadLen}&quot;</span></div></div><div class="line"><div class="line-content">            <span class="com"># how to show decoded data</span></div></div><div class="line"><div class="line-content">            <span class="com"># we can use the encodeDecode</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;Received data (decoded):&quot;</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="ide">ws</span><span class="op">.</span><span class="ide">inFrame</span><span class="op">.</span><span class="ide">encodeDecode</span>()</div></div><div class="line"><div class="line-content">            <span class="com"># let send the data to the client</span></div></div><div class="line"><div class="line-content">            <span class="com"># set fin to 1 if this is independent message</span></div></div><div class="line"><div class="line-content">            <span class="com"># 1 meaning for read and finish</span></div></div><div class="line"><div class="line-content">            <span class="com"># if you want to use continues frame</span></div></div><div class="line"><div class="line-content">            <span class="com"># set it to 0</span></div></div><div class="line"><div class="line-content">            <span class="com"># for more information about web socket frame and protocol</span></div></div><div class="line"><div class="line-content">            <span class="com"># refer to the web socket documentation ro the RFC document</span></div></div><div class="line"><div class="line-content">            <span class="com">#</span></div></div><div class="line"><div class="line-content">            <span class="com"># WSOpCodeEnum:</span></div></div><div class="line"><div class="line-content">            <span class="com"># WSOpCode* = enum</span></div></div><div class="line"><div class="line-content">            <span class="com">#    ContinuationFrame = 0x0</span></div></div><div class="line"><div class="line-content">            <span class="com">#    TextFrame = 0x1</span></div></div><div class="line"><div class="line-content">            <span class="com">#    BinaryFrame = 0x2</span></div></div><div class="line"><div class="line-content">            <span class="com">#    ConnectionClose = 0x8</span></div></div><div class="line"><div class="line-content">            <span class="ide">ws</span><span class="op">.</span><span class="ide">outFrame</span> <span class="op">=</span> <span class="ide">newWSFrame</span>(</div></div><div class="line"><div class="line-content">              <span class="str">&quot;This is from the endpoint :-)&quot;</span>,</div></div><div class="line"><div class="line-content">              <span class="num">1</span>,</div></div><div class="line"><div class="line-content">              <span class="ide">WSOpCode</span><span class="op">.</span><span class="ide">TextFrame</span><span class="op">.</span><span class="ide">uint8</span>)</div></div><div class="line"><div class="line-content">            <span class="ide">ws</span><span class="op">.</span><span class="ide">send</span>()</div></div><div class="line"><div class="line-content">          <span class="kwd">of</span> <span class="ide">WSOpCode</span><span class="op">.</span><span class="ide">BinaryFrame</span><span class="op">.</span><span class="ide">uint8</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;Binary frame received&quot;</span></div></div><div class="line"><div class="line-content">          <span class="kwd">of</span> <span class="ide">WSOpCode</span><span class="op">.</span><span class="ide">ContinuationFrame</span><span class="op">.</span><span class="ide">uint8</span>:</div></div><div class="line"><div class="line-content">            <span class="com"># the frame continues from previous frame</span></div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;Continuation frame received&quot;</span></div></div><div class="line"><div class="line-content">          <span class="kwd">of</span> <span class="ide">WSOpCode</span><span class="op">.</span><span class="ide">ConnectionClose</span><span class="op">.</span><span class="ide">uint8</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="str">&quot;Connection close frame received&quot;</span></div></div><div class="line"><div class="line-content">          <span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">              <span class="kwd">discard</span></div></div><div class="line"><div class="line-content">        <span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">            <span class="ide">echo</span> <span class="op">&amp;</span><span class="str">&quot;Failed status code {ws.statusCode}&quot;</span></div></div><div class="line"><div class="line-content">      <span class="kwd">of</span> <span class="ide">WSState</span><span class="op">.</span><span class="ide">Close</span>:</div></div><div class="line"><div class="line-content">        <span class="ide">echo</span> <span class="str">&quot;Close state&quot;</span></div></div><div class="line"><div class="line-content">        <span class="com"># this state will execute if the connection close</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com"># this static route wil serve under</span></div></div><div class="line"><div class="line-content">  <span class="com"># all static resource will serve under / uri path</span></div></div><div class="line"><div class="line-content">  <span class="com"># address:port/</span></div></div><div class="line"><div class="line-content">  <span class="com"># example address:port/style/*.css</span></div></div><div class="line"><div class="line-content">  <span class="com"># if you custumize the static route for example zf.r.static(&quot;/public&quot;)</span></div></div><div class="line"><div class="line-content">  <span class="com"># it will serve with address:port/public/</span></div></div><div class="line"><div class="line-content">  <span class="com"># we can retrieve using address:port/public/style/*.css</span></div></div><div class="line"><div class="line-content">  <span class="ide">staticDir</span> <span class="str">&quot;/&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com"># using regex for matching the request</span></div></div><div class="line"><div class="line-content">  <span class="com"># the regex is regex match like in pcre standard like regex on python, perl etc</span></div></div><div class="line"><div class="line-content">  <span class="com"># &lt;ids:re[([0-9]+)_([0-9]+)]&gt;</span></div></div><div class="line"><div class="line-content">  <span class="com"># - the ids wil capture as parameter name</span></div></div><div class="line"><div class="line-content">  <span class="com"># - the len[2] is for len for capturing in this case in the () bracket,</span></div></div><div class="line"><div class="line-content">  <span class="com">#   will capture ([0-9]+) twice</span></div></div><div class="line"><div class="line-content">  <span class="com"># - if only want to capture one we must exactly match len[n]</span></div></div><div class="line"><div class="line-content">  <span class="com">#   with number of () capturing bracket</span></div></div><div class="line"><div class="line-content">  <span class="com"># - capture regex will return list of match and can be access using ctx.reParams</span></div></div><div class="line"><div class="line-content">  <span class="com"># - if we want to capture segment parameter we can use &lt;param_to_capture&gt;</span></div></div><div class="line"><div class="line-content">  <span class="com">#   in this case we use &lt;name&gt;</span></div></div><div class="line"><div class="line-content">  <span class="com"># - &lt;name&gt; will capture segment value in there as name,</span></div></div><div class="line"><div class="line-content">  <span class="com">#   we can access param value and query string in HttpCtx.params[&quot;name&quot;] or other param name</span></div></div><div class="line"><div class="line-content">  <span class="ide">get</span> <span class="str">&quot;/home/&lt;ids:re[([0-9]+)_([0-9]+)]&gt;/&lt;name&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Welcome home&quot;</span></div></div><div class="line"><div class="line-content">    <span class="com"># capture regex result from the url</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">reParams</span>[<span class="str">&quot;ids&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="com"># capture &lt;name&gt; value parameter from the url</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;name&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="com"># we can also set custom header for the response</span></div></div><div class="line"><div class="line-content">    <span class="com"># using ctx.responseHeaders.add(&quot;header kye&quot;, &quot;header value&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="ide">res</span><span class="op">.</span><span class="ide">headers</span><span class="op">.</span><span class="ide">add</span>(<span class="str">&quot;Content-Type&quot;</span>, <span class="str">&quot;text/plain&quot;</span>)</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">respHtml</span>(<span class="str">&quot;Hello World get request&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com">#get &quot;/home/&lt;id&gt;/&lt;name&gt;&quot;:</span></div></div><div class="line"><div class="line-content">  <span class="com">#  echo ctx.params[&quot;name&quot;]</span></div></div><div class="line"><div class="line-content">  <span class="com">#  echo ctx.params[&quot;id&quot;]</span></div></div><div class="line"><div class="line-content">  <span class="com">#  resp(Http200, &quot;Ok&quot;)</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com"># accept request with /home/123456</span></div></div><div class="line"><div class="line-content">  <span class="com"># id will capture the value 12345</span></div></div><div class="line"><div class="line-content">  <span class="ide">post</span> <span class="str">&quot;/home/&lt;id&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># if we post as application url encoded, the field data key value will be in the ctx.params</span></div></div><div class="line"><div class="line-content">    <span class="com"># we can access using ctx.params[&quot;the name of the params&quot;]</span></div></div><div class="line"><div class="line-content">    <span class="com"># if we post as multipars we can capture the form field and files uploded in ctx.formData</span></div></div><div class="line"><div class="line-content">    <span class="com"># - access field form data using ctx.formData.getField(&quot;fieldform_name&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com">#   will return FieldData object</span></div></div><div class="line"><div class="line-content">    <span class="com"># - access file form data using ctx.formData.getFileByName(&quot;name&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com">#   will return FileData object</span></div></div><div class="line"><div class="line-content">    <span class="com"># - access file form data using ctx.formData.getFileByFilename(&quot;file_name&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com">#   will return FileData object</span></div></div><div class="line"><div class="line-content">    <span class="com"># - all uploded file will be in the tmp dir for default,</span></div></div><div class="line"><div class="line-content">    <span class="com">#   you can move the file to the destination file or dir by call</span></div></div><div class="line"><div class="line-content">    <span class="com"># - let uploadedFile = ctx.formData.getFileByFilename(&quot;file_name&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com"># - if not isNil(uploadedFile): uploadedFile.moveFileTo(&quot;the_destination_file_with_filename&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com"># - if not isNil(uploadedFile): uploadedFile.moveFileToDir(&quot;the_destination_file_to_dir&quot;)</span></div></div><div class="line"><div class="line-content">    <span class="com"># - or we can iterate the field</span></div></div><div class="line"><div class="line-content">    <span class="com">#       for field in ctx.formData.getFields():</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo field.name</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo field.contentDisposition</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo field.content</span></div></div><div class="line"><div class="line-content">    <span class="com"># - also capture uploaded file using</span></div></div><div class="line"><div class="line-content">    <span class="com">#       for file in ctx.formData.getFiles():</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo file.name</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo file.contentDisposition</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo file.content -&gt; is absolute path of the file in tmp folder</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo file.filename</span></div></div><div class="line"><div class="line-content">    <span class="com">#           echo file.contentType</span></div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="com">#  - for more information you can also check documentation form the source:</span></div></div><div class="line"><div class="line-content">    <span class="com">#       zfCore/zf/HttpCtx.nim</span></div></div><div class="line"><div class="line-content">    <span class="com">#       zfCore/zf/formData.nim</span></div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="com"># capture the &lt;id&gt; from the path</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;id&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">respHtml</span>(<span class="ide">HelloWorld</span>()<span class="op">.</span><span class="ide">printHelloWorld</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">patch</span> <span class="str">&quot;/home/&lt;id&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># capture the &lt;id&gt; from the path</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;id&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">resp</span>(<span class="str">&quot;Hello World patch request&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">delete</span> <span class="str">&quot;/home/&lt;id&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># capture the &lt;id&gt; from the path</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;id&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">resp</span>(<span class="str">&quot;Hello World delete request&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">put</span> <span class="str">&quot;/home/&lt;id&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># capture the &lt;id&gt; from the path</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;id&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">resp</span>(<span class="str">&quot;Hello World put request&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="ide">head</span> <span class="str">&quot;/home/&lt;id&gt;&quot;</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># capture the &lt;id&gt; from the path</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="ide">params</span>[<span class="str">&quot;id&quot;</span>]</div></div><div class="line"><div class="line-content">    <span class="ide">Http200</span><span class="op">.</span><span class="ide">resp</span>(<span class="str">&quot;Hello World head request&quot;</span>)</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com"># before Route here</span></div></div><div class="line"><div class="line-content">  <span class="com"># you can filter the context request here before route happen</span></div></div><div class="line"><div class="line-content">  <span class="com"># use full if we want to filtering the domain access or auth or other things that fun :-)</span></div></div><div class="line"><div class="line-content">  <span class="com"># make sure if call response directly from middleware</span></div></div><div class="line"><div class="line-content">  <span class="com"># require call return true for breaking the pipeline:</span></div></div><div class="line"><div class="line-content">  <span class="com">#   resp(Http404, &quot;page not found&quot;))</span></div></div><div class="line"><div class="line-content">  <span class="com">#   return true</span></div></div><div class="line"><div class="line-content">  <span class="ide">before</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># ctx instance of HttpCtx exposed here :-)</span></div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;before route&quot;</span></div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content">  <span class="com"># after Route here</span></div></div><div class="line"><div class="line-content">  <span class="com"># you can filter the context request here after route happen</span></div></div><div class="line"><div class="line-content">  <span class="com"># use full if we want to filtering the domain access or auth or other things that fun :-)</span></div></div><div class="line"><div class="line-content">  <span class="com"># make sure if call response directly from middleware</span></div></div><div class="line"><div class="line-content">  <span class="com"># require call return true for breaking the pipeline:</span></div></div><div class="line"><div class="line-content">  <span class="com">#   resp(Http404, &quot;page not found&quot;))</span></div></div><div class="line"><div class="line-content">  <span class="com">#   return true</span></div></div><div class="line"><div class="line-content">  <span class="ide">after</span>:</div></div><div class="line"><div class="line-content">    <span class="com"># ctx instance of HttpCtx exposed here :-)</span></div></div><div class="line"><div class="line-content">    <span class="com"># route instance of Route exposed here :-)</span></div></div><div class="line"><div class="line-content">    <span class="com">#</span></div></div><div class="line"><div class="line-content">    <span class="ide">echo</span> <span class="str">&quot;Hello World&quot;</span></div></div>  </code></pre>
<p>Some method from ctx we wrapped in the routes</p>
<pre>  <code>ctx.resp -&gt; resp
ctx.respRedirect -&gt; respRedirect
ctx.setCookie -&gt; setCookie
ctx.getCookie -&gt; getCookie
ctx.clearCookie -&gt; clearCookie
</code></pre>
<p>Configuration file create file settings.json in the same level with the source, keepAlive default is of</p>
<pre>  <code class="language-javascript"><div class="line"><div class="line-content">{</div></div><div class="line"><div class="line-content">  <span class="str">&quot;core&quot;</span>: {</div></div><div class="line"><div class="line-content">    <span class="str">&quot;keepAlive&quot;</span>: <span class="ide">false</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;maxBodyLength&quot;</span>: <span class="num">268435456</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;readBodyBuffer&quot;</span>: <span class="num">51200</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;responseRangeBuffer&quot;</span>: <span class="num">51200</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;maxResponseBodyLength&quot;</span>: <span class="num">52428800</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;trace&quot;</span>: <span class="ide">false</span>,</div></div><div class="line"><div class="line-content">    <span class="str">&quot;http&quot;</span>: {</div></div><div class="line"><div class="line-content">      <span class="str">&quot;port&quot;</span>: <span class="num">8080</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;address&quot;</span>: <span class="str">&quot;0.0.0.0&quot;</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;reuseAddress&quot;</span>: <span class="ide">true</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;reusePort&quot;</span>: <span class="ide">false</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;secure&quot;</span>: {</div></div><div class="line"><div class="line-content">        <span class="str">&quot;cert&quot;</span>: <span class="str">&quot;ssl/devel-selfsigned.pem&quot;</span>,</div></div><div class="line"><div class="line-content">        <span class="str">&quot;key&quot;</span>: <span class="str">&quot;ssl/devel-selfsigned-key.pem&quot;</span>,</div></div><div class="line"><div class="line-content">        <span class="str">&quot;verify&quot;</span>: <span class="ide">true</span>,</div></div><div class="line"><div class="line-content">        <span class="str">&quot;port&quot;</span>: <span class="num">8443</span></div></div><div class="line"><div class="line-content">      }</div></div><div class="line"><div class="line-content">    }</div></div><div class="line"><div class="line-content">  },</div></div><div class="line"><div class="line-content">  <span class="str">&quot;database&quot;</span>: {</div></div><div class="line"><div class="line-content">    <span class="str">&quot;pgsql&quot;</span>: {</div></div><div class="line"><div class="line-content">      <span class="str">&quot;host&quot;</span>: <span class="str">&quot;127.0.0.1&quot;</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;port&quot;</span>: <span class="num">5432</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;username&quot;</span>: <span class="str">&quot;admin&quot;</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;password&quot;</span>: <span class="str">&quot;secret&quot;</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;database&quot;</span>: <span class="str">&quot;mydb&quot;</span></div></div><div class="line"><div class="line-content">    }</div></div><div class="line"><div class="line-content">  },</div></div><div class="line"><div class="line-content">  <span class="str">&quot;auth&quot;</span>: {</div></div><div class="line"><div class="line-content">    <span class="str">&quot;basicAuth&quot;</span>: {</div></div><div class="line"><div class="line-content">      <span class="str">&quot;username&quot;</span>: <span class="str">&quot;foo&quot;</span>,</div></div><div class="line"><div class="line-content">      <span class="str">&quot;password&quot;</span>: <span class="str">&quot;bar&quot;</span></div></div><div class="line"><div class="line-content">    }</div></div><div class="line"><div class="line-content">  }</div></div><div class="line"><div class="line-content">}</div></div>  </code></pre>
<h2>Fluent validation</h2>
<p>Starting from version 1.0.1 we added fluent validation</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">validation</span> <span class="op">=</span> <span class="ide">newFluentValidation</span>()</div></div><div class="line"><div class="line-content">  <span class="ide">validation</span></div></div><div class="line"><div class="line-content">    <span class="op">.</span><span class="ide">add</span>(<span class="ide">newFieldData</span>(<span class="str">&quot;username&quot;</span>, <span class="ide">ctx</span><span class="op">.</span><span class="ide">params</span>[<span class="str">&quot;username&quot;</span>])</div></div><div class="line"><div class="line-content">      <span class="op">.</span><span class="ide">must</span>(<span class="str">&quot;Username is required.&quot;</span>)</div></div><div class="line"><div class="line-content">      <span class="op">.</span><span class="ide">reMatch</span>(<span class="str">&quot;([</span>\w\W<span class="str">]+@[</span>\w\W<span class="str">]+</span>\.<span class="str">[</span>\w<span class="str">])$&quot;</span>, <span class="str">&quot;Email format is not valid.&quot;</span>))</div></div><div class="line"><div class="line-content">    <span class="op">.</span><span class="ide">add</span>(<span class="ide">newFieldData</span>(<span class="str">&quot;password&quot;</span>, <span class="ide">ctx</span><span class="op">.</span><span class="ide">params</span>[<span class="str">&quot;password&quot;</span>])</div></div><div class="line"><div class="line-content">      <span class="op">.</span><span class="ide">must</span>(<span class="str">&quot;Password is required.&quot;</span>)</div></div><div class="line"><div class="line-content">      <span class="op">.</span><span class="ide">rangeLen</span>(<span class="num">10</span>, <span class="num">255</span>, <span class="str">&quot;Min password length is 10, max is 255.&quot;</span>))</div></div><div class="line"><div class="line-content">            </div></div><div class="line"><div class="line-content"><span class="ide">access</span> <span class="ide">the</span> <span class="ide">validation</span> <span class="ide">result</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">validation</span><span class="op">.</span><span class="ide">valids</span> <span class="op">-&gt;</span> <span class="ide">contain</span> <span class="ide">valids</span> <span class="ide">field</span> <span class="ide">on</span> <span class="ide">validation</span> (<span class="ide">JsonNode</span>)</div></div><div class="line"><div class="line-content">  <span class="ide">validation</span><span class="op">.</span><span class="ide">notValids</span> <span class="op">-&gt;</span> <span class="ide">contain</span> <span class="ide">notValids</span> <span class="ide">field</span> <span class="ide">on</span> <span class="ide">validation</span> (<span class="ide">JsonNode</span>)</div></div>  </code></pre>
<p>with new macro we can transform the validation using this (make it easy to understand maybe :-)):</p>
<pre>  <code class="language-nim"><div class="line"><div class="line-content"><span class="kwd">let</span> <span class="ide">validation</span> <span class="op">=</span> <span class="ide">fluentValidation</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">data</span> <span class="str">&quot;username&quot;</span> <span class="ide">params</span><span class="op">.</span><span class="ide">getOrDefault</span>(<span class="str">&quot;username&quot;</span>):</div></div><div class="line"><div class="line-content">    <span class="ide">must</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">err</span> <span class="str">&quot;Username is required.&quot;</span></div></div><div class="line"><div class="line-content">      <span class="ide">ok</span> <span class="str">&quot;Username available.&quot;</span></div></div><div class="line"><div class="line-content">    <span class="ide">reMatch</span> <span class="str">&quot;([</span>\w\W<span class="str">]+@[</span>\w\W<span class="str">]+</span>\.<span class="str">[</span>\w<span class="str">])$&quot;</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">err</span> <span class="str">&quot;Email format is not valid.&quot;</span></div></div><div class="line"><div class="line-content">  <span class="ide">data</span> <span class="str">&quot;password&quot;</span> <span class="ide">params</span><span class="op">.</span><span class="ide">getOrDefault</span>(<span class="str">&quot;password&quot;</span>):</div></div><div class="line"><div class="line-content">    <span class="ide">must</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">err</span> <span class="str">&quot;Password is required.&quot;</span></div></div><div class="line"><div class="line-content">    <span class="ide">rangeLen</span> <span class="num">10</span> <span class="num">255</span>:</div></div><div class="line"><div class="line-content">      <span class="ide">err</span> <span class="str">&quot;Min password length is 10, max is 255.&quot;</span></div></div><div class="line"><div class="line-content">      </div></div><div class="line"><div class="line-content"><span class="kwd">if</span> <span class="ide">validation</span><span class="op">.</span><span class="ide">isValid</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">echo</span> <span class="ide">validation</span><span class="op">.</span><span class="ide">valids</span><span class="op">.</span><span class="ide">pretty</span>(<span class="num">2</span>)</div></div><div class="line"><div class="line-content"><span class="kwd">else</span>:</div></div><div class="line"><div class="line-content">  <span class="ide">echo</span> <span class="ide">validation</span><span class="op">.</span><span class="ide">notValids</span><span class="op">.</span><span class="ide">pretty</span>(<span class="num">2</span>)</div></div>  </code></pre>
<p>Fluent Validation containts this procedures for validation each FieldData:</p>
<ol>
<li>
<p>must(errMsg: string = &quot;your err msg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if value empty</p>
</li>
<li>
<p>num(errMsg: string = &quot;your err msg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if value not a number</p>
</li>
<li>
<p>rangeNum(min: float64, max: float64, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if the number not in the range (min - max)</p>
</li>
<li>
<p>minNum(min: float64, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if the value less than min</p>
</li>
<li>
<p>maxNum(max: float64, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if the value larger than max</p>
</li>
<li>
<p>minLen(min: int, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if value length less than min</p>
</li>
<li>
<p>maxLen(max: int, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if value length more than max</p>
</li>
<li>
<p>rangeLen(min: int, max: int, errMsg: &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if value length not in range (min - max)</p>
</li>
<li>
<p>reMatch(regex: string, errMsg: string = &quot;your errMsg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if the value not match with regex match pattern</p>
</li>
<li>
<p>bool(errMsg: string = &quot;your err msg&quot;, okMsg: string = &quot;your ok msg&quot;)
will return errMsg if the value is not bool type</p>
</li>
</ol>
<h2>Core structure</h2>
<ul>
<li>zfCore</li>
</ul>
<p>This folder contain zfcore engine. The zfcore folder contains .nim file of zendflow building block also contain folder unpure, the unpure folder will contains unpure lib (thirdparty library)</p>
<p>zfcore contains:</p>
<ol>
<li>httpcontext.nim
this will handle request context also contains the response context</li>
</ol>
<pre>  <code class="language-nim"><div class="line"><div class="line-content">#[
    The field is widely used the asynchttpserver Request object but we add some field to its:
        url -> in ZendFlow we user uri3 from the nimble package
        params -> is table of the captured query string and path segment
        reParams -> is table of the captured regex match with the segment
        formData -> is FormData object and will capture if we use the multipart form
        json -> this will capture the application/json body from the post/put/patch method
        settings -> this is the shared settings
        request -> request context
        response -> response context
]#</div></div><div class="line"><div class="line-content"></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">HttpContext</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">ref</span> <span class="kwd">object</span> <span class="kwd">of</span> <span class="ide">zfblast</span><span class="op">.</span><span class="ide">HttpContext</span></div></div><div class="line"><div class="line-content">        <span class="ide">params</span><span class="op">*:</span> <span class="ide">Table</span>[<span class="ide">string</span>, <span class="ide">string</span>]</div></div><div class="line"><div class="line-content">        <span class="ide">reParams</span><span class="op">*:</span> <span class="ide">Table</span>[<span class="ide">string</span>, <span class="ide">seq</span>[<span class="ide">string</span>]]</div></div><div class="line"><div class="line-content">        <span class="ide">formData</span><span class="op">*:</span> <span class="ide">FormData</span></div></div><div class="line"><div class="line-content">        <span class="ide">json</span><span class="op">*:</span> <span class="ide">JsonNode</span></div></div><div class="line"><div class="line-content">        <span class="ide">settings</span><span class="op">*:</span> <span class="ide">Settings</span></div></div><div class="line"><div class="line-content">        </div></div><div class="line"><div class="line-content"><span class="com"># Where zfblast.HttpContext is zfblast context</span></div></div><div class="line"><div class="line-content"><span class="kwd">type</span></div></div><div class="line"><div class="line-content">    <span class="ide">HttpContext</span><span class="op">*</span> <span class="op">=</span> <span class="kwd">ref</span> <span class="kwd">object</span> <span class="kwd">of</span> <span class="ide">RootObj</span></div></div><div class="line"><div class="line-content">        <span class="com"># Request type instance</span></div></div><div class="line"><div class="line-content">        <span class="ide">request</span><span class="op">*:</span> <span class="ide">Request</span></div></div><div class="line"><div class="line-content">        <span class="com"># client asyncsocket for communicating to client</span></div></div><div class="line"><div class="line-content">        <span class="ide">client</span><span class="op">*:</span> <span class="ide">AsyncSocket</span></div></div><div class="line"><div class="line-content">        <span class="com"># Response type instance</span></div></div><div class="line"><div class="line-content">        <span class="ide">response</span><span class="op">*:</span> <span class="ide">Response</span></div></div><div class="line"><div class="line-content">        <span class="com"># send response to client, this is bridge to ZFBlast send()</span></div></div><div class="line"><div class="line-content">        <span class="ide">send</span><span class="op">*:</span> <span class="kwd">proc</span> (<span class="ide">ctx</span>: <span class="ide">HttpContext</span>): <span class="ide">Future</span>[<span class="ide">void</span>]</div></div><div class="line"><div class="line-content">        <span class="com"># Keep-Alive header max request with given persistent timeout</span></div></div><div class="line"><div class="line-content">        <span class="com"># read RFC (https://tools.ietf.org/html/rfc2616)</span></div></div><div class="line"><div class="line-content">        <span class="com"># section Keep-Alive and Connection</span></div></div><div class="line"><div class="line-content">        <span class="com"># for improving response performance</span></div></div><div class="line"><div class="line-content">        <span class="ide">keepAliveMax</span><span class="op">*:</span> <span class="ide">int</span></div></div><div class="line"><div class="line-content">        <span class="com"># Keep-Alive timeout</span></div></div><div class="line"><div class="line-content">        <span class="ide">keepAliveTimeout</span><span class="op">*:</span> <span class="ide">int</span></div></div>  </code></pre>
<ol start="2">
<li>formdata.nim</li>
</ol>
<p>This will handle the formdata multipart and parse the form field and uploaded file</p>
<ol start="3">
<li>middleware.nim</li>
</ol>
<p>This will handle the middleware of the engine, this contain before route and after route pipeline for filtering</p>
<ol start="4">
<li>mime.nim</li>
</ol>
<p>This is database of mime file, not all mime file registered here, if the mime file not found then the mime will be application/octet-stream</p>
<ol start="5">
<li>route.nim</li>
</ol>
<p>This file is model of the route</p>
<ol start="6">
<li>router.nim</li>
</ol>
<p>This file will handle registered route, for example user register the get, put, push, patch, head, post, options method to the router.</p>
<ol start="7">
<li>settings.nim</li>
</ol>
<p>This is the settings model for the zenflow application</p>
<ol start="9">
<li>zfcore.nim</li>
</ol>
<p>The is the starting building block</p>
<p>Thats it, feel free to modify and pull request if you have any idea, also this is the public domain we can share or you can cantact me on my email <a href="amru.rosyada@gmail.com">amru.rosyada@gmail.com</a> to discuss further.</p>
<p>This is production ready :-), feel free to send me a bug to solve.</p>
</document>
            
        </div>
        <div class="col-3" id="meta-section">
            <div class="container box rounded p-3">
                
                    <p>
                        <strong>Licence:</strong>
                        BSD
                    </p>
                

                
                    <p> <a href="https://github.com/zendbit/nim_zfcore">Project website</a> </p>
                

                
            </div>
        </div>
    </div>
</div>
</div>

<footer class="pt-10 px-3">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="col-lg-3">
        <h4 class="h5">Getting started with Nim</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://learnxinyminutes.com/docs/nim/">Learn Nim in 5 minutes</a></li>
          <li><a class="text-decoration-none" href="https://nim-by-example.github.io/">Nim by Example</a></li>
          <li><a class="text-decoration-none" href="https://play.nim-lang.org/">Official Playground</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Official Tutorials</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut1.html">General Tutorial</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut2.html">Advanced Features</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tut3.html">Macros and Metaprogramming</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Nim for...</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-C-programmers">C programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-Python-Programmers">Python programmers</a></li>
          <li><a class="text-decoration-none" href="https://github.com/nim-lang/Nim/wiki/Nim-for-TypeScript-Programmers">TypeScript programmers</a></li>
        </ul>
      </div>
      <div class="col-lg-3">
        <h4 class="h5">Documentation</h4>
        <ul>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/lib.html">Standard Library</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/manual.html">Language Manual</a></li>
          <li><a class="text-decoration-none" href="https://nim-lang.org/docs/tools.html">Tools Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center mt-4 mx-auto">
        <a href="#" class="d-block mb-3 mx-auto bw"></a>
        <p class="text-muted">
        Created in <a href="https://nim-lang.org/">Nim</a> on <a href="https://pages.github.com/">GitHub Pages</a>.
        <a href="https://github.com/gabbhack/nimidirectory">Available</a>
        under <a href="https://en.wikipedia.org/wiki/GNU_General_Public_License#Version_3">GPLv3</a>
        </p>
        <p class="text-muted">
        Builded at 2023-12-15T01:13:16Z
        </p>
      </div>
    </div>
  </div>
</footer>
<script>
</script>
</body>
</html>
